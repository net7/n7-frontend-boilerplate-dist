!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/common"),require("@n7-frontend/components"),require("rxjs"),require("@angular/router"),require("@n7-frontend/core"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@n7-frontend/boilerplate",["exports","@angular/core","@angular/common","@n7-frontend/components","rxjs","@angular/router","@n7-frontend/core","rxjs/operators"],n):n(((t=t||self)["n7-frontend"]=t["n7-frontend"]||{},t["n7-frontend"].boilerplate={}),t.ng.core,t.ng.common,t.components,t.rxjs,t.ng.router,t.core$1,t.rxjs.operators)}(this,function(t,n,e,o,r,i,a,s){"use strict";var u=function(t,n){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function c(t,n){function e(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var l=function(){function t(t){var n=this;this.config=t,this.defaults={},this.get=function(t){return n.defaults[t]},this.set=function(t,e){return n.defaults[t]=e},this.config.global&&Object.keys(this.config.global).forEach(function(t){n.set(t,n.config.global[t])})}return t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:["config"]}]}]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject("config"))},token:t,providedIn:"root"}),t}();var d=function(){function t(t){var n=this;this.config=t,this.defaults={},this.get=function(t){return n.defaults[t]},this.set=function(t,e){return n.defaults[t]=e},this.config.layouts&&Object.keys(this.config.layouts).forEach(function(t){n.set(t,n.config.layouts[t])})}return t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:["config"]}]}]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject("config"))},token:t,providedIn:"root"}),t}();var f=function(){function t(){var t=this;this.custom={},this.default={headTitle:new r.Subject,pageTitle:new r.Subject,subnav:new r.Subject,breadcrumbs:new r.Subject,filters:new r.Subject},this.get$=function(n){return t._get("default",n)},this.getCustom$=function(n){return t._get("custom",n)},this.update=function(n,e){return t._update("default",n,e)},this.updateCustom=function(n,e){return t._update("custom",n,e)},this.has=function(n){return!!t.default[n]},this.hasCustom=function(n){return!!t.custom[n]}}return t.prototype.addCustom=function(t,n){if(this.custom[t])throw Error("custom stream "+t+" exists!");this.custom[t]=n},t.prototype._update=function(t,n,e){if(!this[t])throw Error(t+" stream group does not exists!");if(!this[t][n])throw Error(t+" stream "+n+" does not exists!");this[t][n].next(e)},t.prototype._get=function(t,n){if(!this[t])throw Error(t+" stream group does not exists!");if(!this[t][n])throw Error(t+" stream "+n+" does not exists!");return this[t][n]},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();var p=function(){function t(t){this.config=t,this.widgets=this.config.widgets,this.lb=new a.LayoutBuilder(this.config.layoutId)}return t.prototype.initPayload=function(){},t.prototype.onInit=function(){var t=this;this.lb.ready$.subscribe(function(){t.lb.eventHandler.emitInner("init",t.initPayload())}),this.lb.init({widgetsConfig:this.widgets,widgetsDataSources:this.config.widgetsDataSources,widgetsEventHandlers:this.config.widgetsEventHandlers,dataSource:new this.config.layoutDS,eventHandler:new this.config.layoutEH})},t.prototype.onDestroy=function(){this.lb.eventHandler.emitInner("destroy")},t}();var y=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.mainStateMap=[{widgetId:"subnav",streamKey:"subnav"}],n}return c(n,t),n.prototype.onInit=function(t){var n=this,e=t.configuration,o=t.mainState,r=t.router,i=t.options;this.configuration=e,this.mainState=o,this.router=r,this.options=i,this.one("header").update(this.configuration.get("header")),this.mainStateMap.forEach(function(t){var e=t.widgetId,o=t.streamKey;n.mainState.get$(o).pipe(s.tap(function(t){return console.log("stream",t)})).subscribe(function(t){return n.one(e).update(t)})})},n.prototype.onNavigate=function(t){if("router"===t.handler){if(!t.path)throw Error("onNavigate: no path for router navigate");this.router.navigate(t.path)}},n}(a.LayoutDataSource);var g=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.destroyed$=new r.Subject,n}return c(n,t),n.prototype.listen=function(){var t=this;this.innerEvents$.subscribe(function(n){var e=n.type,o=n.payload;switch(e){case"main-layout.init":t.dataSource.onInit(o);break;case"main-layout.destroy":t.destroyed$.next()}}),a.EventHandler.globalEvents$.pipe(s.takeUntil(this.destroyed$)).subscribe(function(n){var e=n.type,o=n.payload;switch(e){case"global.navigate":t.dataSource.onNavigate(o)}})},n}(a.EventHandler);var h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.transform=function(t){if(console.log("header",t),t)return t},n}(a.DataSource),b=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.transform=function(t){return{classes:"main-subnav",items:t}},n.prototype.setActive=function(t){this.output.items.forEach(function(n){n._meta.id===t?(n.classes="is-current",n._meta.isActive=!0):(n.classes="",n._meta.isActive=!1)})},n.prototype.getActive=function(){return this.output.items.filter(function(t){return t._meta.isActive})[0]||null},n}(a.DataSource),m=Object.freeze({HeaderDS:h,SubnavDS:b}),v=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.listen=function(){var t=this;this.innerEvents$.subscribe(function(n){var e=n.type,o=n.payload;switch(e){case"header.click":"navigate"===o.source&&t.emitGlobal("navigate",o),t.emitGlobal(e,o)}})},n}(a.EventHandler),w=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.listen=function(){var t=this;this.innerEvents$.subscribe(function(n){var e=n.type,o=n.payload;switch(e){case"subnav.click":"navigate"===o.source&&t.emitGlobal("navigate",o),t.emitGlobal(e,o)}})},n}(a.EventHandler),S={layoutId:"main-layout",widgets:[{id:"header"},{id:"subnav"}],layoutDS:y,layoutEH:g,widgetsDataSources:m,widgetsEventHandlers:Object.freeze({HeaderEH:v,SubnavEH:w}),options:{}},I=function(t){function e(n,e,o,r){var i=t.call(this,o.get("MainLayoutConfig")||S)||this;return i.router=n,i.configuration=e,i.layoutsConfiguration=o,i.mainState=r,i}return c(e,t),e.prototype.initPayload=function(){return{configuration:this.configuration,mainState:this.mainState,router:this.router,options:this.config.options||{}}},e.prototype.ngOnInit=function(){this.onInit()},e.prototype.ngOnDestroy=function(){this.onDestroy()},e.decorators=[{type:n.Component,args:[{selector:"main-layout",template:'<div class="n7b-page-wrapper" id="main-layout">\n    <div class="n7b-page-content">\n        <n7-header \n        [emit]="lb.widgets[\'header\'].emit"\n        [data]="lb.widgets[\'header\'].ds.out$ | async"></n7-header>\n\n        <n7-nav \n        [emit]="lb.widgets[\'subnav\'].emit"\n        [data]="lb.widgets[\'subnav\'].ds.out$ | async">\n        </n7-nav>\n\n        <main class="n7b-content">\n            <div class="n7b-top-page-bar">\n                <div class="n7b-top-page-bar__main">\n                    <h1 class="n7b-top-page-bar__title">#PAGE TITLE</h1>\n                    \x3c!-- <n7-breadcrumbs *ngIf="lb.widgets[\'breadcrumbs\'].ds.isVisible()" \n                    [emit]="lb.widgets[\'breadcrumbs\'].emit"\n                    [data]="lb.widgets[\'breadcrumbs\'].ds.out$ | async"></n7-breadcrumbs>--\x3e \n                </div>\n                \x3c!--<div *ngIf="lb.dataSource.pageTools" class="n7b-top-page-bar__tools">\n                    <a *ngFor="let tool of lb.dataSource.pageTools" \n                    (click)="lb.eventHandler.emitInner(\'tools-click\', tool.payload)" \n                    class="n7-btn {{ tool.classes || \'\' }}">\n                        {{ tool.label | translate }}\n                    </a>\n                </div>--\x3e\n            </div>\n            \n            <div class="n7b-alert-bar">\n                \x3c!--<n7-alert\n                [attr.id]="\'main-layout-alert\'"\n                [data]="lb.dataSource.alertData$ | async"\n                [emit]="lb.dataSource.closeAlert.bind(lb.dataSource)"></n7-alert>--\x3e\n            </div>\n            <ng-content></ng-content>\n        </main>\n    </div>\n\n    <div class="n7b-footer-wrapper"></div>\n</div>'}]}],e.ctorParameters=function(){return[{type:i.Router},{type:l},{type:d},{type:f}]},e}(p);var E=[I],D=function(){function t(){}return t.forRoot=function(n){return{ngModule:t,providers:[f,l,d,{provide:"config",useValue:n}]}},t.decorators=[{type:n.NgModule,args:[{declarations:E,imports:[e.CommonModule,o.DvComponentsLibModule],providers:[],exports:E}]}],t}(),H=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.onInit=function(t){},n}(a.LayoutDataSource),j=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.listen=function(){},n}(a.EventHandler),A=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.transform=function(t){return o.TABLE_MOCK},n}(a.DataSource),L=Object.freeze({AwTableDS:A}),C=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.listen=function(){},n}(a.EventHandler),_=Object.freeze({AwTableEH:C}),x={layoutId:"aw-home-layout",widgets:[{id:"aw-table",hasStaticData:!0}],layoutDS:H,layoutEH:j,widgetsDataSources:L,widgetsEventHandlers:_,options:{}},M=function(t){function e(){return t.call(this,x)||this}return c(e,t),e.prototype.ngOnInit=function(){this.onInit()},e.prototype.ngOnDestroy=function(){this.onDestroy()},e.decorators=[{type:n.Component,args:[{selector:"aw-home-layout",template:'<div class="" *ngIf="lb.dataSource">\n    <n7-table\n    [data]="lb.widgets[\'aw-table\'].ds.out$ | async"\n    [emit]="lb.widgets[\'aw-table\'].emit">\n    </n7-table>\n</div>'}]}],e.ctorParameters=function(){return[]},e}(p),O=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.onInit=function(t){},n}(a.LayoutDataSource),k=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.listen=function(){},n}(a.EventHandler),$={layoutId:"aw-about-layout",widgets:[],layoutDS:O,layoutEH:k,widgetsDataSources:L,widgetsEventHandlers:_,layoutOptions:{}},P=function(t){function e(){return t.call(this,$)||this}return c(e,t),e.prototype.ngOnInit=function(){this.onInit()},e.prototype.ngOnDestroy=function(){this.onDestroy()},e.decorators=[{type:n.Component,args:[{selector:"aw-about-layout",template:'<div class="" *ngIf="lb.dataSource">\n    About page!\n</div>'}]}],e.ctorParameters=function(){return[]},e}(p),T=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.onInit=function(t){},n}(a.LayoutDataSource),N=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return c(n,t),n.prototype.listen=function(){},n}(a.EventHandler),q={layoutId:"aw-works-layout",widgets:[],layoutDS:T,layoutEH:N,widgetsDataSources:L,widgetsEventHandlers:_,layoutOptions:{}},W=function(t){function e(){return t.call(this,q)||this}return c(e,t),e.prototype.ngOnInit=function(){this.onInit()},e.prototype.ngOnDestroy=function(){this.onDestroy()},e.decorators=[{type:n.Component,args:[{selector:"aw-works-layout",template:'<div class="" *ngIf="lb.dataSource">\n    Works page!\n</div>'}]}],e.ctorParameters=function(){return[]},e}(p),B=[M,P,W],G=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:B,imports:[e.CommonModule,o.DvComponentsLibModule,D],providers:[],exports:B}]}],t}(),z=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[e.CommonModule],providers:[],exports:[D,G]}]}],t}();t.AbstractLayout=p,t.AwAboutLayoutComponent=P,t.AwAboutLayoutConfig=$,t.AwAboutLayoutDS=O,t.AwAboutLayoutEH=k,t.AwHomeLayoutComponent=M,t.AwHomeLayoutConfig=x,t.AwHomeLayoutDS=H,t.AwHomeLayoutEH=j,t.AwTableDS=A,t.AwTableEH=C,t.AwWorksLayoutComponent=W,t.AwWorksLayoutConfig=q,t.AwWorksLayoutDS=T,t.AwWorksLayoutEH=N,t.ConfigurationService=l,t.HeaderDS=h,t.HeaderEH=v,t.LayoutsConfigurationService=d,t.MainLayoutComponent=I,t.MainLayoutConfig=S,t.MainLayoutDS=y,t.MainLayoutEH=g,t.MainStateService=f,t.N7BoilerplateAriannaWebModule=G,t.N7BoilerplateCommonModule=D,t.N7BoilerplateLibModule=z,t.SubnavDS=b,t.SubnavEH=w,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=n7-frontend-boilerplate.umd.min.js.map