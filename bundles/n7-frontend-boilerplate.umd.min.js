!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@n7-frontend/components"),require("rxjs"),require("rxjs/operators"),require("@angular/router"),require("@angular/platform-browser"),require("@n7-frontend/core"),require("tippy.js"),require("lodash")):"function"==typeof define&&define.amd?define("@n7-frontend/boilerplate",["exports","@angular/core","@angular/common","@angular/common/http","@n7-frontend/components","rxjs","rxjs/operators","@angular/router","@angular/platform-browser","@n7-frontend/core","tippy.js","lodash"],t):t(((e=e||self)["n7-frontend"]=e["n7-frontend"]||{},e["n7-frontend"].boilerplate={}),e.ng.core,e.ng.common,e.ng.common.http,e.components,e.rxjs,e.rxjs.operators,e.ng.router,e.ng.platformBrowser,e.core$1,e.tippy,e.lodash)}(this,function(e,t,n,a,i,o,r,s,l,u,c,d){"use strict";c=c&&c.hasOwnProperty("default")?c.default:c;var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function b(e,t){function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var h=function(){return(h=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,i,o=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)r.push(a.value)}catch(e){i={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}var g=function(){function e(e){var t=this;this.config=e,this.defaults={},this.get=function(e){return t.defaults[e]},this.set=function(e,n){return t.defaults[e]=n},this.config.global&&Object.keys(this.config.global).forEach(function(e){t.set(e,t.config.global[e])})}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:["config"]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject("config"))},token:e,providedIn:"root"}),e}();var m=function(){function e(e){var t=this;this.config=e,this.defaults={},this.get=function(e){return t.defaults[e]},this.set=function(e,n){return t.defaults[e]=n},this.config.layouts&&Object.keys(this.config.layouts).forEach(function(e){t.set(e,t.config.layouts[e])})}return e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:["config"]}]}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject("config"))},token:e,providedIn:"root"}),e}();var v=function(){function e(){var e=this;this.custom={},this.default={headTitle:new o.ReplaySubject,pageTitle:new o.ReplaySubject,subnav:new o.ReplaySubject,breadcrumbs:new o.ReplaySubject,filters:new o.ReplaySubject},this.get$=function(t){return e._get("default",t)},this.getCustom$=function(t){return e._get("custom",t)},this.update=function(t,n){return e._update("default",t,n)},this.updateCustom=function(t,n){return e._update("custom",t,n)},this.has=function(t){return!!e.default[t]},this.hasCustom=function(t){return!!e.custom[t]}}return e.prototype.addCustom=function(e,t){if(this.custom[e])throw Error("custom stream "+e+" exists!");this.custom[e]=t},e.prototype._update=function(e,t,n){if(!this[e])throw Error(e+" stream group does not exists!");if(!this[e][t])throw Error(e+" stream "+t+" does not exists!");this[e][t].next(n)},e.prototype._get=function(e,t){if(!this[e])throw Error(e+" stream group does not exists!");if(!this[e][t])throw Error(e+" stream "+t+" does not exists!");return this[e][t]},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var w={getLastPosts:{queryName:"getLastPosts",queryBody:"\n      {\n        getLastPosts(__PARAMS__) {\n          id\n          title\n        }\n      }\n    "},getTree:{queryName:"getTreeOfItems",queryBody:"\n    {\n      getTreeOfItems{\n        id\n        label\n        icon\n        branches {\n          label\n          id\n          img\n          branches {\n            label\n            id\n            icon\n            img\n            branches {\n              label\n              id\n              icon\n              img\n              branches {\n                label\n                id\n                icon\n                img\n                branches {\n                  label\n                  id\n                  icon\n                  img\n                  branches {\n                    label\n                    id\n                    icon\n                    img\n                    branches {\n                      label\n                      id\n                      icon\n                      img\n                      branches {\n                        label\n                        id\n                        icon\n                        img\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    "},globalFilter:{queryName:"globalFilter",queryBody:"{\n      globalFilter(__PARAMS__){\n        entitiesData {\n          entity {\n              id\n              label\n              typeOfEntity\n          } count\n        }\n        typeOfEntityData {\n          type\n          count\n        }\n        itemsPagination {\n          totalCount\n          items {\n            thumbnail\n            item {\n              id\n              label\n              fields\n              {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n              }\n            }\n            relatedTypesOfEntity {\n              type\n              count\n            }\n          }\n        }\n      }\n      }"},getEntityDetails:{queryName:"getEntity",queryBody:"{\n      getEntity(__PARAMS__){\n        overviewTab\n        label\n        id\n        typeOfEntity\n        fields {\n          ...\n          on KeyValueField {\n            key\n            value\n          }\n          ... on\n          KeyValueFieldGroup {\n            label\n            fields\n            {\n              ...\n              on KeyValueField {\n                key\n                value\n              }\n            }\n          }\n        }\n        extraTab\n        wikiTab {\n          text\n          url\n        }\n        relatedItems {\n          thumbnail\n          item {\n            label\n            id\n            fields\n            {\n              ...\n              on KeyValueField {\n                key\n                value\n              }\n            }\n          }\n          relatedTypesOfEntity {\n            type\n            count\n          }\n        }\n        relatedEntities {\n          entity {\n              id\n              label\n              typeOfEntity\n          }\n          count\n        }\n      }\n    }\n    "},getItem:{queryName:"getItem",queryBody:"{\n      getItem(__PARAMS__) {\n        id\n        label\n        icon\n        title\n        subTitle\n        image\n        text\n        fields {\n          ...\n          on KeyValueField {\n            key\n            value\n          }\n          ... on KeyValueFieldGroup {\n            label\n            fields {\n              ...\n              on KeyValueField {\n                key\n                value\n              }\n            }\n          }\n          }\n          relatedEntities {\n            count\n            entity{\n              id\n              label\n              typeOfEntity\n            }\n          }\n          relatedItems {\n            thumbnail\n            item {\n              label\n              id\n          }\n          relatedTypesOfEntity {\n            type\n            count\n          }\n        }\n        breadcrumbs {\n          label\n          link\n        }\n      }\n    }"},getNode:{queryName:"getNode",queryBody:"{\n      getNode(__PARAMS__) {\n        ... on Item {\n          id\n          label\n          icon\n          title\n          subTitle\n          image\n          text\n          fields {\n            ...\n            on KeyValueField {\n              key\n              value\n            }\n            ... on KeyValueFieldGroup {\n              label\n              fields {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n              }\n            }\n          }\n          relatedEntities {\n              count\n              entity{\n                id\n                label\n                typeOfEntity\n              }\n          }\n          relatedItems {\n              thumbnail\n              item {\n                label\n                id\n            }\n            relatedTypesOfEntity {\n              type\n              count\n            }\n          }\n          breadcrumbs {\n            label\n            link\n          }\n        }\n        ... on Node {\n          id\n          label\n          img\n          fields {\n            ...\n            on KeyValueField {\n              key\n              value\n            }\n            ... on KeyValueFieldGroup {\n              label\n              fields {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      }\n    }"},autoComplete:{queryName:"autoComplete",queryBody:"{\n      autoComplete(__PARAMS__){\n        totalCount\n        entities {\n          entity {\n              id\n              label\n              typeOfEntity\n              fields {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n                ... on\n                KeyValueFieldGroup {\n                  label\n                  fields\n                  {\n                    ...\n                    on KeyValueField {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n          }\n          count\n        }\n      }\n    }"},search:{queryName:"search",queryBody:"{\n      search(__PARAMS__){\n        totalCount\n        facets\n        filters\n        results\n        page\n      }\n    }"}},S=function(){function e(e,t){this.config=e,this.http=t;try{this.providerConfig=this.config.get("communication").providers.apollo}catch(e){throw Error("No config found for apollo provider!")}}return e.prototype.request$=function(e,t){var n=t.params,a=t.method,i=t.httpOptions,o=w[e];this.providerConfig.config&&this.providerConfig.config[e]&&(o=this.providerConfig.config[e]);var s=(o=o||{}).queryName,l=o.queryBody;if(!s||!l)throw Error('No config found for requestId "'+e+'"');if(n){var u=this.makeParamsStr(n);l=l.replace("__PARAMS__",u)}else l=l.replace("(__PARAMS__)","");return(a&&"GET"===a?this.http.get(this.providerConfig.baseUrl):this.http.post(this.providerConfig.baseUrl,{query:l},i)).pipe(r.map(function(e){return e.data[s]}))},e.prototype.makeParamsStr=function(e){var t=this,n=[];return Object.keys(e).forEach(function(a){if(Array.isArray(e[a])){var i=[];e[a].forEach(function(e){if("object"==typeof e){var n=t.makeParamsStr(e);i.push("{ "+n+" }")}else isNaN(e)?i.push('"'+e+'"'):i.push(""+e)}),n.push(a+": ["+i.join(",")+"]")}else if("object"==typeof e[a]&&e[a]){var o=t.makeParamsStr(e[a]);n.push(a+": { "+o+" }")}else"string"==typeof e[a]&&0===a.indexOf("$")?n.push(a.replace("$","")+": "+e[a]):isNaN(e[a])?n.push(a+': "'+e[a]+'"'):n.push(a+": "+e[a])}),n.join(" ")},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:g},{type:a.HttpClient}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(g),t.ɵɵinject(a.HttpClient))},token:e,providedIn:"root"}),e}();var I={getLastPosts:"posts"},_=function(){function e(e,t){this.config=e,this.http=t;try{this.providerConfig=this.config.get("communication").providers.rest}catch(e){throw Error("No config found for rest provider!")}}return e.prototype.request$=function(e,t){void 0===t&&(t={});var n=t.params,a=t.method,i=t.httpOptions,o=I[e];if(a||(a=this.providerConfig.defaultMethod||"GET"),this.providerConfig.config&&this.providerConfig.config[e]&&(o=this.providerConfig.config[e]),!o)throw Error('No config found for requestId "'+e+'"');if("POST"===a||"PUT"===a)return this.http[a.toLowerCase()](this.providerConfig.baseUrl+o,n,i);if("GET"===a||"DELETE"===a)return this.http[a.toLowerCase()](this.providerConfig.baseUrl+o,i);throw Error("Rest method "+a+" not supported")},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:g},{type:a.HttpClient}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(g),t.ɵɵinject(a.HttpClient))},token:e,providedIn:"root"}),e}();var E=function(){function e(e,t,n){this.config=e,this.apollo=t,this.rest=n;try{this.communicationConfig=this.config.get("communication"),this.defaultProvider=this.communicationConfig.defaultProvider}catch(e){throw Error("No communications.defaultProvider setted in config")}}return e.prototype.request$=function(e,t,n){var a=this;if(void 0===t&&(t={}),!this[n=n||this.defaultProvider])throw Error("There is no "+n+" provider");var i=t.onError;return this[n].request$(e,t).pipe(r.catchError(function(e){return a.handleError(e,i)}))},e.prototype.handleError=function(e,t){return t?t(e):console.warn("No error handler for communication request",e),o.empty()},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:g},{type:S},{type:_}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(g),t.ɵɵinject(S),t.ɵɵinject(_))},token:e,providedIn:"root"}),e}();var k=function(){function e(e){this.config=e,this.widgets=this.config.widgets,this.lb=new u.LayoutBuilder(this.config.layoutId)}return e.prototype.initPayload=function(){},e.prototype.onInit=function(){var e=this;this.lb.ready$.subscribe(function(){e.lb.eventHandler.emitInner("init",e.initPayload())}),this.lb.init({widgetsConfig:this.widgets,widgetsDataSources:this.config.widgetsDataSources,widgetsEventHandlers:this.config.widgetsEventHandlers,dataSource:new this.config.layoutDS,eventHandler:new this.config.layoutEH})},e.prototype.onDestroy=function(){this.lb.eventHandler.emitInner("destroy")},e}();var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.onInit=function(e){var t=this,n=e.configuration,a=e.mainState,i=e.router,r=e.options,s=e.titleService,l=e.route;this.configuration=n,this.mainState=a,this.router=i,this.route=l,this.titleService=s,this.options=r,this.mainState.addCustom("currentNav",new o.Subject),this.one("header").update({items:this.configuration.get("header")}),this.mainState.get$("headTitle").subscribe(function(e){return t.titleService.setTitle(e)}),this.mainState.get$("pageTitle").subscribe(function(e){return t.pageTitle=e}),this.mainState.get$("subnav").subscribe(function(e){return t.one("subnav").update(e)}),this.mainState.get$("breadcrumbs").subscribe(function(e){return t.one("breadcrumbs").update(e)}),this.mainState.getCustom$("currentNav").subscribe(function(e){return t.one("header").update({items:t.configuration.get("header"),selected:e})})},t.prototype.onNavigate=function(e){if("router"===e.handler){var t=e.path,n=e.queryParams;if(!t)throw Error("onNavigate: no path for router navigate");n?this.router.navigate(t,{relativeTo:this.route,queryParams:n,queryParamsHandling:"merge"}):this.router.navigate(t),this._onRouterNavigate()}},t.prototype._onRouterNavigate=function(){c.hideAll()},t}(u.LayoutDataSource);var x=function(){function e(e,t){this.http=e,this.config=t}return e.prototype.load=function(e){var t=this;return this.http.get(e).pipe(r.catchError(function(e){return o.of({})}),r.tap(function(e){return t._handleResponse(e)})).toPromise()},e.prototype._handleResponse=function(e){var t=this;if(e&&(Object.keys(e).forEach(function(n){return t.config.set(n,e[n])}),e["config-keys"])){var n=document.querySelector("head"),a=document.createElement("style"),i=[];Object.keys(e["config-keys"]).forEach(function(t){var n=e["config-keys"][t]||{};n.color&&n.color.hex&&i.push("--color-"+t+": "+n.color.hex+";")}),i.length&&(i.unshift(":root {"),i.push("}"),a.appendChild(document.createTextNode(i.join("\n"))),n.appendChild(a))}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:a.HttpClient},{type:g}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(a.HttpClient),t.ɵɵinject(g))},token:e,providedIn:"root"}),e}();var D=function(){function e(t){var n=this;this.update=function(){return n.output=n.transform()},this.getId=function(){return n.id},this.getData=function(){return n.data},this.getConfig=function(){return n.config},this.getFacetId=function(){return n.config.facetId},this.getInputIndex=function(){return n.config.inputIndex},this.getSectionIndex=function(){return n.config.sectionIndex},this.getContext=function(){return n.config.filterConfig.context||"external"},this.getTarget=function(){return n.config.filterConfig.target||null},this.getSearchIn=function(){return n.config.filterConfig.searchIn||null},this.getType=function(){return n.config.type},this.getOutput=function(){return n.output},this.setData=function(e){return n.data=e},this.config=t,this._setId(),e.index++}return e.prototype._setId=function(){this.id="facet-input-"+this.getType()+"-"+e.index},e.index=0,e}();var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(){var e=this,t=this.getFacetId();return this.data.map(function(n,a){var i=n.label,o=n.value;return o=""+o,{type:"checkbox",id:e.getId()+"-"+a,label:i,payload:{facetId:t,source:"input-checkbox",value:o},_meta:{facetId:t,value:o}}})},t.prototype.setActive=function(e){var t=this.config.filterConfig.isArray;this.output.forEach(function(n){t&&Array.isArray(e)&&-1!==e.indexOf(n._meta.value)?n.checked=!0:e===n._meta.value?n.checked=!0:n.checked=!1})},t}(D),B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(){var e=this.getFacetId(),t={facetId:e,source:"input-text"};return{type:"text",id:this.getId(),label:this.config.label,disabled:this.config.disabled,placeholder:this.config.placeholder,icon:this.config.icon,inputPayload:h({},t,{trigger:"input"}),enterPayload:h({},t,{trigger:"enter"}),iconPayload:h({},t,{trigger:"icon"}),_meta:{facetId:e}}},t.prototype.setActive=function(e){this.output.value=e||null},t}(D),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(){var e=this,t=this.getFacetId();return this.data.map(function(n){var a=n.label,i=n.value,o=n.counter,r=n.hidden,s=n.options;i=""+i;var l=[];return(s=s||{}).classes&&l.push(s.classes),r&&l.push("is-hidden"),e._isActive(e.facetValue,i)&&l.push("is-active"),{type:"link",id:e.getId(),text:a,counter:o,payload:{facetId:t,source:"input-link",value:i},icon:s.icon||null,classes:l.join(" "),_meta:{facetId:t,value:i}}})},t.prototype.setActive=function(e){var t=this;this.output.forEach(function(n){var a=n.classes?n.classes.split(" "):[];t._isActive(e,n._meta.value)?-1===a.indexOf("is-active")&&a.push("is-active"):a=a.filter(function(e){return"is-active"!==e}),n.classes=a.join(" ")})},t.prototype._isActive=function(e,t){return this.facetValue=e,Array.isArray(e)&&-1!==e.indexOf(t)||e===t},t}(D);var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(){var e=this.getFacetId();return{type:"select",id:this.getId(),label:this.config.label,disabled:this.config.disabled,options:this.data.map(function(e){return{value:""+e.value,label:e.label}}),payload:{facetId:e,source:"input-select"},_meta:{facetId:e}}},t.prototype.setActive=function(e){this.output.options.filter(function(t){return t.value===e}).forEach(function(e){return e.selected=!0})},t}(D),T={checkbox:A,text:B,link:P,select:O};var H=function(){function e(e,t){var n=this;this._filters=[],this._facets=[],this._inputs=[],this._results$=new o.Subject,this.getId=function(){return n._id},this.getFilters=function(){return n._filters},this.getFacets=function(){return n._facets},this.getInputs=function(){return n._inputs},this.getConfig=function(){return n._config},this.getTotalCount=function(){return n._totalCount},this.getFields=function(){return n._config.fields},this.getResults$=function(){return n._results$},this.setResults=function(e){return n._results$.next(e)},this._id=e,this._config=t,this._setFilters(),this._setFacets(),this._setPage(),this._setInputs(),this._setInputsData(),this._setTotalCount()}return e.prototype.updateFilter=function(e,t,n){this.getFiltersByFacetId(e).forEach(function(e){Array.isArray(e.value)&&n?e.value=e.value.filter(function(e){return e!==t}):Array.isArray(e.value)&&-1===e.value.indexOf(t)?e.value.push(t):e.value=n?null:t})},e.prototype.updateFiltersFromQueryParams=function(e){var t=this;Object.keys(e).forEach(function(n){var a=t.getFiltersByFacetId(n),i=e[n];a.forEach(function(e){e.value=e.isArray?i.split(","):i})})},e.prototype.updateInputsFromFilters=function(){var e=this;this._filters.forEach(function(t){var n=t.facetId,a=t.value;e.getInputByFacetId(n).setActive(a)})},e.prototype.updateFacets=function(e){var t=this;e.forEach(function(e){var n=e.id,a=e.data;return t.updateFacet(n,a)}),this._setInputsData()},e.prototype.updateTotalCount=function(e){this._totalCount=e},e.prototype.updateFacet=function(e,t){var n=this._facets.filter(function(t){return t.id===e});if(!n.length)throw Error('Facet with id "'+e+'" does not exists');n.forEach(function(e){return e.data=t})},e.prototype.reset=function(){this._filters.forEach(function(e){return e.value=null})},e.prototype.getRequestParams=function(){return{facets:this._facets,page:this._page,results:this._config.results,filters:this._filters.filter(function(e){return"internal"!==e.context}).map(function(e){return{facetId:e.facetId,value:e.value,searchIn:e.searchIn}})}},e.prototype.getInternalFilters=function(){return this._filters.filter(function(e){return"internal"===e.context&&(Array.isArray(e.value)&&e.value.length||!Array.isArray(e.value)&&e.value)}).map(function(e){return{facetId:e.facetId,value:e.value,searchIn:e.searchIn}})},e.prototype.filtersAsQueryParams=function(e){var t={};return e.forEach(function(e){return t[e.facetId]=Array.isArray(e.value)?e.value.join(","):e.value}),t},e.prototype.getFiltersByFacetId=function(e){return this._filters.filter(function(t){return t.facetId===e})},e.prototype.getInputByFacetId=function(e){return this._inputs.filter(function(t){return t.getFacetId()===e})[0]},e.prototype.setInputData=function(e,t){this.getInputByFacetId(e).setData(t)},e.prototype.filterTarget=function(e){var t=this,n=this._inputs.filter(function(t){return t.getTarget()===e}),a=this.getInputByFacetId(e),i=this._facets.filter(function(t){return t.id===e})[0].data,o=[];n.forEach(function(e){var n=t.getFiltersByFacetId(e.getFacetId())[0],a=e.getSearchIn(),i=n.value;o.push([a,i])}),i.forEach(function(e){return t._filterData(o,e)}),a.setData(i),a.update()},e.prototype.setSearchConfigOrderBy=function(e){this._config.results.order.type=e},e.prototype.setSearchConfigDirection=function(e){this._config.results.order.direction=e},e.prototype.setPageConfigOffset=function(e){this._config.page.offset=e},e.prototype.setPageConfigLimit=function(e){this._config.page.limit=e},e.prototype._filterData=function(e,t){e.forEach(function(e){var n=f(e,2),a=n[0],i=n[1];a.forEach(function(e){var n=e.key,a=e.operator;switch(a){case"=":Array.isArray(i)?t.hidden=!(!i.length||-1!==i.indexOf(t.metadata[n])):t.hidden=!(i&&i===t.metadata[n]);break;case">":Array.isArray(i)||(t.hidden=!(i&&i>t.metadata[n]));break;case"<":Array.isArray(i)||(t.hidden=!(i&&i<t.metadata[n]));break;case">=":Array.isArray(i)||(t.hidden=!(i&&i>=t.metadata[n]));break;case"<=":Array.isArray(i)||(t.hidden=!(i&&i<=t.metadata[n]));break;case"<>":Array.isArray(i)||(t.hidden=!(i&&i!==t.metadata[n]));break;case"LIKE":if(i&&t.metadata[n]&&"string"==typeof i&&"string"==typeof t.metadata[n]){var o=t.metadata[n].toLowerCase(),r=i.toLocaleLowerCase();t.hidden=!(-1!==o.indexOf(r))}break;default:console.warn("SearchIn: operator "+a+" not supported")}})})},e.prototype._setFilters=function(){var e=this;this._config.fields.forEach(function(t){t.inputs.forEach(function(t){return e._filters.push(h({},t.filterConfig,{facetId:t.facetId,value:t.filterConfig.isArray?[]:null}))})})},e.prototype._setFacets=function(){this._facets=this._config.facets},e.prototype._setPage=function(){this._page=this._config.page},e.prototype._setTotalCount=function(){this._totalCount=this._config.totalCount},e.prototype._setInputs=function(){var e=this;this._config.fields.forEach(function(t,n){t.inputs.forEach(function(t,a){var i=T[t.type];if(!i)throw Error("Input type "+t.type+" not supported");e._inputs.push(new i(h({},t,{inputIndex:a,sectionIndex:n})))})})},e.prototype._setInputsData=function(){var e=this;this._facets.forEach(function(t){return e.setInputData(t.id,t.data)})},e}();var F=function(){function e(){this._models={}}return e.prototype.add=function(e,t){if(this._models[e])throw Error('Search model "'+e+'" already exists!');this._models[e]=new H(e,t)},e.prototype.model=function(e){return this._models[e]||null},e.queryParams=null,e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var j=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.destroyed$=new o.Subject,t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"main-layout.init":e.dataSource.onInit(a),e.route=a.route,e.router=a.router,e._listenRouterChanges();break;case"main-layout.destroy":e.destroyed$.next()}}),u.EventHandler.globalEvents$.pipe(r.takeUntil(this.destroyed$)).subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"global.navigate":e.dataSource.onNavigate(a)}})},t.prototype._listenRouterChanges=function(){var e=this;this.route.queryParams.pipe(r.filter(function(e){return!!Object.keys(e).length}),r.first()).subscribe(function(t){e.emitGlobal("queryparams",t),F.queryParams=t})},t}(u.EventHandler);var L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e.selected&&this.selectNavItem(e.selected),e.items},t.prototype.selectNavItem=function(e){this.output.nav.items.forEach(function(t){t.classes="",t.payload==e&&(t.classes="is-current")}),this.update({items:this.output})},t}(u.DataSource),M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return{classes:"main-subnav",items:e}},t.prototype.setActive=function(e){this.output.items.forEach(function(t){t._meta.id===e?(t.classes="is-current",t._meta.isActive=!0):(t.classes="",t._meta.isActive=!1)})},t.prototype.getActive=function(){return this.output.items.filter(function(e){return e._meta.isActive})[0]||null},t}(u.DataSource),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e},t}(u.DataSource),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){var t=e.fields,n=this.options.searchModel;return this.searchModel=n,t},t}(u.DataSource);var q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRequestParams=function(){return t.searchModel.getRequestParams()},t.filtersAsQueryParams=function(e){return t.searchModel.filtersAsQueryParams(e)},t.updateFiltersFromQueryParams=function(e){return t.searchModel.updateFiltersFromQueryParams(e)},t.getInputByFacetId=function(e){return t.searchModel.getInputByFacetId(e)},t.filterTarget=function(e){return t.searchModel.filterTarget(e)},t}return b(t,e),t.prototype.transform=function(e){var t=this;this.searchModel||(this.searchModel=e.searchModel);var n=this.searchModel.getId(),a=this.searchModel.getFields(),i=[];return a.forEach(function(e,a){var o="group-"+n+"-"+a,r=t._headerConfig(e.header,o),s=[];t.searchModel.getInputs().filter(function(e){return e.getSectionIndex()===a}).map(function(e){return e.update(),{facetId:e.getFacetId(),type:e.getType(),output:e.getOutput()}}).forEach(function(e){var n=e.type,a=e.output,i=e.facetId;s.push({classes:t._getSectionClasses(n),inputs:Array.isArray(a)?a:[a],_meta:{facetId:i}})}),i.push({header:r,facet:{sections:s},classes:"n7-facets-wrapper__"+o,isOpen:!0,_meta:{groupId:o}})}),F.queryParams&&(this.searchModel.updateFiltersFromQueryParams(F.queryParams),this.searchModel.updateInputsFromFilters(),F.queryParams=null),{groups:i,classes:"n7-facets-wrapper__"+this.searchModel.getId()}},t.prototype.toggleGroup=function(e){var t=e.eventPayload;this.output.groups.forEach(function(e){e._meta.groupId===t.groupId&&(e.isOpen=!e.isOpen,e.header.iconRight=e.isOpen?"n7-icon-angle-down":"n7-icon-angle-right")})},t.prototype.onFacetChange=function(e){var t=e.eventPayload,n=t.inputPayload,a=n.facetId,i=n.source,o=n.trigger,r=(this.searchModel.getFiltersByFacetId(a)[0]||{}).value,s=!1,l=t.inputPayload.value||t.value;l=""+l,s=Array.isArray(r)?-1!==r.indexOf(l):r===l,"input-text"===i&&-1!==["enter","icon"].indexOf(o)||(this.searchModel.updateFilter(a,l,s),this.searchModel.updateInputsFromFilters())},t.prototype.updateFilteredTarget=function(e){var t=this.searchModel.getInputByFacetId(e);this.output.groups.map(function(e){return e.facet}).map(function(e){return e.sections}).map(function(n){n.forEach(function(n){if(n._meta.facetId===e){var a=t.getOutput();n.inputs=Array.isArray(a)?a:[a]}})})},t.prototype.updateInputLinks=function(){var e=this,t=this.searchModel.getInputs().filter(function(e){return"link"===e.getType()}).map(function(e){return e.getFacetId()});this.output.groups.map(function(e){return e.facet}).map(function(e){return e.sections}).map(function(n){n.forEach(function(n){if(-1!==t.indexOf(n._meta.facetId)){var a=e.searchModel.getInputByFacetId(n._meta.facetId);a.update();var i=a.getOutput();n.inputs=Array.isArray(i)?i:[i]}})})},t.prototype.updateInputsFromFilters=function(){this.searchModel.updateInputsFromFilters()},t.prototype._getSectionClasses=function(e){return"n7-facet__section-input-"+{text:"text",checkbox:"checkboxes",link:"links",select:"select"}[e]},t.prototype._headerConfig=function(e,t){return e?{text:e.label,iconRight:"n7-icon-angle-down",classes:e.classes,payload:{source:"group-header",id:t+"-header",groupId:t},_meta:{id:t+"-header"}}:null},t}(u.DataSource);var N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return i.FOOTER_MOCK},t}(u.DataSource),W=Object.freeze({HeaderDS:L,SubnavDS:M,BreadcrumbsDS:$,FacetsDS:R,FacetsWrapperDS:q,FooterDS:N}),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"header.click":e.dataSource.selectNavItem(a),e.emitGlobal("navigate",{handler:"router",path:[a]})}})},t}(u.EventHandler),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"subnav.click":"navigate"===a.source&&e.emitGlobal("navigate",a),e.emitGlobal(n,a)}})},t}(u.EventHandler),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"breadcrumbs.click":"navigate"===a.source&&e.emitGlobal("navigate",a),e.emitGlobal(n,a)}})},t}(u.EventHandler),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){this.innerEvents$.subscribe(function(e){var t=e.type;e.payload})},t}(u.EventHandler),U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._facetsChanged=!1,t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"facets-wrapper.facet":var i=a.eventPayload.inputPayload.facetId,o=e.dataSource.getInputByFacetId(i),r=o.getContext();if(e._facetsChanged=!0,e.dataSource.onFacetChange(a),"internal"===r)e.dataSource.filterTarget(o.getTarget()),e.dataSource.updateFilteredTarget(o.getTarget());else{var s=e.dataSource.getRequestParams(),l=e.dataSource.filtersAsQueryParams(s.filters);Object.keys(l).forEach(function(e){return l[e]=l[e]||null}),e.emitOuter("facetschange"),e.emitGlobal("navigate",{handler:"router",path:[],queryParams:l})}break;case"facets-wrapper.facetheader":e.dataSource.toggleGroup(a)}}),u.EventHandler.globalEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"global.searchresponse":e.dataSource.searchModel.getId()===a&&e.dataSource.updateInputLinks()}})},t}(u.EventHandler);var Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){this.innerEvents$.subscribe(function(e){var t=e.type;e.payload;console.warn("unhandled inner event of type",t)})},t}(u.EventHandler),X=Object.freeze({HeaderEH:z,SubnavEH:V,BreadcrumbsEH:G,FacetsEH:K,FacetsWrapperEH:U,FooterEH:Q}),Z={layoutId:"main-layout",widgets:[{id:"header"},{id:"subnav"},{id:"breadcrumbs"},{id:"footer",hasStaticData:!0}],layoutDS:C,layoutEH:j,widgetsDataSources:W,widgetsEventHandlers:X,options:{}},J=function(e){function n(t,n,a,i,o,r){var s=e.call(this,i.get("MainLayoutConfig")||Z)||this;return s.router=t,s.route=n,s.configuration=a,s.layoutsConfiguration=i,s.mainState=o,s.titleService=r,s}return b(n,e),n.prototype.initPayload=function(){return{configuration:this.configuration,mainState:this.mainState,router:this.router,route:this.route,titleService:this.titleService,options:this.config.options||{}}},n.prototype.ngOnInit=function(){this.onInit()},n.prototype.ngOnDestroy=function(){this.onDestroy()},n.decorators=[{type:t.Component,args:[{selector:"main-layout",template:'<div class="n7-main-layout" id="main-layout">\n    <div class="n7-page-content">\n        <n7-header\n            [data]="lb.widgets[\'header\'].ds.out$ | async"\n            [emit]="lb.widgets[\'header\'].emit">\n        </n7-header>\n        <main class="n7-content">\n            <div class="n7-top-page-bar">\n                <div class="n7-top-page-bar__main"></div>\n            </div>\n            <div class="n7-alert-bar">\n                \x3c!--<n7-alert\n                [attr.id]="\'main-layout-alert\'"\n                [data]="lb.dataSource.alertData$ | async"\n                [emit]="lb.dataSource.closeAlert.bind(lb.dataSource)"></n7-alert>--\x3e\n            </div>\n            <ng-content></ng-content>\n        </main>\n    </div>\n    <n7-footer \n        [data]="lb.widgets[\'footer\'].ds.out$ | async" \n        [emit]="lb.widgets[\'footer\'].emit">\n    </n7-footer>\n</div>'}]}],n.ctorParameters=function(){return[{type:s.Router},{type:s.ActivatedRoute},{type:g},{type:m},{type:v},{type:l.Title}]},n}(k);var Y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.onInit=function(e){var t=e.options;this.options=t},t}(u.LayoutDataSource);var ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.destroyed$=new o.Subject,t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"n7-page404-layout.init":e.dataSource.onInit(a);break;case"n7-page404-layout.destroy":e.destroyed$.next()}})},t}(u.EventHandler);var te={layoutId:"n7-page404-layout",widgets:[],layoutDS:Y,layoutEH:ee,widgetsDataSources:W,widgetsEventHandlers:X,options:{}},ne=function(e){function n(t){return e.call(this,t.get("Page404LayoutConfig")||te)||this}return b(n,e),n.prototype.initPayload=function(){return{options:this.config.options||{}}},n.prototype.ngOnInit=function(){this.onInit()},n.prototype.ngOnDestroy=function(){this.onDestroy()},n.decorators=[{type:t.Component,args:[{selector:"n7-page404-layout",template:'<div class="n7-page404-layout">\n    404 - Resource not found\n</div>'}]}],n.ctorParameters=function(){return[{type:m}]},n}(k),ae=function(){function e(){}return e.prototype.headerEmit=function(e,t){this.emit&&this.emit("facetheader",{eventType:e,eventPayload:t})},e.prototype.facetEmit=function(e,t){this.emit&&this.emit("facet",{eventType:e,eventPayload:t})},e.decorators=[{type:t.Component,args:[{selector:"n7-facets-wrapper",template:'<div *ngIf="data" class="n7-facets-wrapper {{ data.classes || \'\' }}">\n    <div *ngFor="let group of data.groups" class="n7-facets-wrapper__group {{ group.classes || \'\' }}">\n        <n7-facet-header\n            [data]="group.header"\n            [emit]="headerEmit.bind(this)"\n        ></n7-facet-header>\n\n        <n7-facet\n            *ngIf="group.isOpen"\n            [data]="group.facet"\n            [emit]="facetEmit.bind(this)"\n        ></n7-facet>\n    </div>\n</div>'}]}],e.propDecorators={data:[{type:t.Input}],emit:[{type:t.Input}]},e}();var ie=[J,ne,ae],oe=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[v,g,m,E,S,{provide:"config",useValue:t}]}},e.decorators=[{type:t.NgModule,args:[{declarations:ie,imports:[n.CommonModule,a.HttpClientModule,i.DvComponentsLibModule],providers:[],exports:ie}]}],e}(),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.onInit=function(e){},t}(u.LayoutDataSource),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){},t}(u.EventHandler),le=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loadingData=!1,t.checkForMore=function(e){t.loadedData.actions&&(void 0===e?t.loadedData.result.length>=t.totalObjects?t.loadedData.actions[1].disabled=!0:t.loadedData.actions[1].disabled=!1:t.loadedData.actions[1].disabled=!e)},t.handleIncomingData=function(e){t.currentPage+=1;var n=t.unpackData(e.itemsPagination);t.loadedData.result=t.loadedData.result.concat(n.result),t.checkForMore(),t.loadedData.isLoading=!1},t.addPagination=function(e,n,a){t.loadedData.pagination={first:{payload:"goto-1",classes:1==e?"is-disabled":""},prev:{payload:"goto-"+(e/1-1),classes:1==e?"is-disabled":""},next:{payload:"goto-"+(e/1+1),classes:e==n?"is-disabled":""},last:{payload:"goto-"+n,classes:e==n?"is-disabled":""},links:t.makePagination(n,e),select:{label:"Numero di risultati",options:[10,25,50].map(function(e){return{text:e,selected:e==a}}),payload:"select-size"}}},t.makePagination=function(e,n){var a=[],i=t.paths.paginationLimit-1;if(i){var o=void 0,r=void 0;n>Math.floor(i/2)?n<e-Math.floor(i/2)?(o=n/1+Math.floor(i/2),r=n/1-Math.floor(i/2)):(o=e,r=n-i+(e-n)):(o=i+1,r=1);for(var s=r;s<=o;s++)a.push({text:String(s),payload:"page-"+String(s),classes:n==s?"is-active":""})}else{a.push({text:"1",payload:"page-1",classes:1==n?"is-active":""});for(s=1;s<e;s++)a.push({text:String(s+1),payload:"page-"+String(s+1),classes:n==s+1?"is-active":""})}return a},t.unpackData=function(e){var n=t.options.config,a=n.get("item-preview"),i=e.totalCount,o=(t.totalPages,t.currentPage),r=t.context,s=t.pageSize,l=e.items?e.items:e.relatedItems;if(n){var u=n.get("config-keys");if(n.get(r+"-layout"))var c=n.get(r+"-layout")["max-item-length"],p=n.get(r+"-layout")["results-limit"]}s&&o?l=l.slice(o*s-s,o*s):s&&(l=l.slice(0,s));var b=[];return l.forEach(function(e){var t={image:d.get(e,a.image,e.image),title:Number(a.title.maxLength)&&d.get(e,a.title,e.item.label).length>Number(a.title.maxLength)?d.get(e,a.title,e.item.label).slice(0,Number(a.title.maxLength))+"…":d.get(e,a.title,e.item.label),text:Number(a.text.maxLength)&&d.get(e,a.text.data,e.item.text).length>Number(a.text.maxLength)?d.get(e,a.text.data,e.item.text).slice(0,Number(a.text.maxLength))+"…":d.get(e,a.text.data,e.item.text),payload:d.get(e,a.payload,e.item.id),classes:["entita","search"].includes(r)?"is-fullwidth":"",metadata:[d.get(e,a.metadata.info.data,e.item.fields)?{classes:"n7-objects__metadata-artist",items:d.get(e,a.metadata.info.data,e.item.fields).map(function(e){return{label:a.metadata.info.customLabel?a.metadata.info.customLabel:d.get(e,a.metadata.info.label,e.key),value:d.get(e,a.metadata.info.value,e.value)}})}:{},{classes:"n7-objects__metadata-linked",items:d.get(e,a.metadata.toe.data,e.relatedTypesOfEntity)?d.get(e,a.metadata.toe.data,e.relatedTypesOfEntity).map(function(e){return{value:d.get(e,a.metadata.toe.value,e.count),icon:u[d.get(e,a.metadata.toe.icon,e.type).replace(" ","-")]?u[d.get(e,a.metadata.toe.icon,e.type).replace(" ","-")].icon:"",classes:"color-"+d.get(e,a.metadata.toe.icon,e.type).replace(" ","-")}}):null}]};d.get(e,a.metadata.breadcrumbs.data,e.breadcrumbs)&&(t.breadcrumbs={items:d.get(e,a.metadata.breadcrumbs.data,e.breadcrumbs).map(function(e){return{label:d.get(e,a.metadata.breadcrumbs.label,e.label),payload:d.get(e,a.metadata.breadcrumbs.payload,e.link)}})}),b.push(t)}),"home"===r?{result:b,actions:[{label:"Mostra Tutti ("+i+")"},c?{label:"Mostra Altri ("+p+")",disabled:!1}:null],isLoading:!1}:{previews:b}},t}return b(t,e),t.prototype.transform=function(e){return this.paths=this.options.config.get("item-preview"),this.pageSize=this.options.size,this.totalObjects=e.totalCount,this.currentPage=this.options.page?this.options.page:1,e.items?this.totalPages=Math.ceil(e.items.length/this.pageSize):e.relatedItems&&(this.totalPages=Math.ceil(e.relatedItems.length/this.pageSize)),this.context=this.options.context,this.loadedData=this.unpackData(e),this.options.pagination&&this.addPagination(this.currentPage,this.totalPages,this.pageSize),this.checkForMore(),this.loadedData.loaderData={},this.loadedData},t}(u.DataSource);var ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){var t=e.key,n=e.response,a=new RegExp("(.*?)"+t+"(.*)","i"),i=[],o=this.options.config.get("home-layout")["max-item-length"]/2;return n.entities.forEach(function(e){var n=a.exec(e.entity.label);if(n){var r=n[1],s=n[2];o&&r.length>o&&(r="..."+r.slice(r.length-o,r.length)),o&&s.length>o&&(s=s.slice(0,o)+"..."),i.push({match:n.input.slice(n[1].length,n[1].length+t.length),prefix:r,suffix:s,payload:e.entity.id})}}),{suggestion:i}},t}(u.DataSource),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.thresholdShowTitle=50,t.thresholdShowValue=60,t.allBubbles=null,t.entityBubbleIdMap={},t.selectedBubbles=[],t.facetData=null,t.bubblePopup=null,t.currentHoverEntity=null,t._bubbleChart=null,t.maxBubblesSelectable=3,t.windowResizeSet=!1,t.maxBubbleRadius=100,t.minBubbleRadius=10,t.maxBubbleTextRadiusRatio=6,t}return b(t,e),t.prototype.transform=function(e){var t=this;if(!e)return null;this.destroyTooltip(),this.facetData=e.facetData?e.facetData:[],this.tippy=c,e.bubbles=this.filterBubblesBasedOnFacetsEnabled();var n=document.getElementById(this.options.containerId),a=e.width?e.width:n.offsetWidth,i=700*a,o={containerId:this.options.bubbleContainerId,containerWidth:a,containerHeight:700,isForceSimulationEnabled:!0,maxBubblesSelected:3,bubblesData:[]},r=-1,s=-1,l=0,u=0;return e.bubbles.forEach(function(e){r<e.count&&(r=e.count),(s<0||s>e.count)&&(s=e.count),l++,u+=e.count,e.selected&&0}),e.bubbles.forEach(function(e){var n=e.id,c=u/l,d=(e.count-s/3)/(3*r-s/3),p=r/c;p>1&&(d=(e.count*(p/3)-s/3)/(3*r-s/3));var b=Math.log(i)/10*(3*d)*(70-Math.sqrt(l));b>t.maxBubbleRadius?b=t.maxBubbleRadius:b<t.minBubbleRadius&&(b=t.minBubbleRadius);var h=e.entity.label,f=[];if(b/e.entity.label.length<t.maxBubbleTextRadiusRatio){var g=b/t.maxBubbleTextRadiusRatio,m=e.entity.label.indexOf(" ",g-5),v=e.entity.label.slice(0,m),w=e.entity.label.slice(m,2*g);f.push({id:n+"_label0",label:function(e){return e.radius<t.thresholdShowTitle?null:v},x_function:function(e){return e.x},y_function:function(e){var n=e.radius/9;return e.radius<t.thresholdShowValue&&(n=0),e.y-n-20},user_select:"none",fontSize_function:function(e){return e.radius/5},color:"white",classes:""},{id:n+"_label01",label:function(e){return e.radius<t.thresholdShowTitle?null:w},x_function:function(e){return e.x},y_function:function(e){var n=e.radius/9;return e.radius<t.thresholdShowValue&&(n=0),e.y-n},user_select:"none",fontSize_function:function(e){return e.radius/5},color:"white",classes:""})}else f.push({id:n+"_label0",label:function(e){return e.radius<t.thresholdShowTitle?null:h},x_function:function(e){return e.x},y_function:function(e){var n=e.radius/9;return e.radius<t.thresholdShowValue&&(n=0),e.y-n},user_select:"none",fontSize_function:function(e){return e.radius/5},color:"white",classes:""});var S={id:n,texts:y(f,[{id:n+"_label1",label:function(n){return n.radius<t.thresholdShowValue?null:e.count},x_function:function(e){return e.x},y_function:function(e){return e.y+e.radius/9},user_select:"none",color:"white",classes:"aw-bubble-num"}]),x:a/2+50,y:400,radius:b,color:e.color,hasCloseIcon:!!e.selected&&e.selected,payload:{id:n}};o.bubblesData.push(S)}),o.forceSimulationData={xPull:a/2,xPullStrength:-.01,yPull:350,yPullStrength:-.01,collisionStrengh:.99,collisionIterations:1,velocityDecay:.65},e.reset&&(o.reset=e.reset),e.setUpdateReference&&(o.setUpdateReference=e.setUpdateReference),e.setBubbleChart&&(o.setBubbleChart=e.setBubbleChart),this.setWindowResize(),o},t.prototype.setAllBubblesFromApolloQuery=function(e,t){var n=this;void 0===t&&(t=!0);var a=e.source;if(this.allBubbles=[],e.selectedBubbles&&(this.selectedBubbles=e.selectedBubbles),a.entitiesData)for(var i=0;i<a.entitiesData.length;i++)this.allBubbles.push(h({},a.entitiesData[i],{color:this.options.configKeys[a.entitiesData[i].entity.typeOfEntity.replace(" ","-")]?this.options.configKeys[a.entitiesData[i].entity.typeOfEntity.replace(" ","-")].color.hex:""}));else for(i=0;i<a.relatedEntities.length;i++){var o=this.options.configKeys?this.options.configKeys[a.relatedEntities[i].entity.typeOfEntity.replace(" ","-")]?this.options.configKeys[a.relatedEntities[i].entity.typeOfEntity.replace(" ","-")].color.hex:"":null;this.allBubbles.push(h({id:this.convertEntityIdToBubbleId(a.relatedEntities[i].entity.id)},a.relatedEntities[i],{color:o}))}this.entityBubbleIdMap={},this.allBubbles.forEach(function(e){return e.id=n.convertEntityIdToBubbleId(e.entity.id),n.entityBubbleIdMap[e.id]=e.entity.id,e}),this.allBubbles.forEach(function(e){e.selected=!1;for(var t=0;t<n.selectedBubbles.length;t++)n.selectedBubbles[t].id===e.id&&(e.selected=!0)}),t&&this.update(e)},t.prototype.convertEntityIdToBubbleId=function(e){return e?"B_"+e.replace(/-/g,"_"):null},t.prototype.filterBubblesBasedOnFacetsEnabled=function(){var e=this,t=0;return this.allBubbles.filter(function(n){for(var a=0;a<e.facetData.length;a++)if(n.entity.typeOfEntity===e.facetData[a].type&&!e.facetData[a].enabled)return!1;return!(t>e.options.maxNumber)&&(t++,!0)})},t.prototype.onBubbleMouseEnter=function(e){var t=this;if(e&&e.bubble){for(var n=e.bubble.id,a=this.entityBubbleIdMap[e.bubble.id],i=0;i<this.allBubbles.length;i++){var o=this.allBubbles[i];if(o.entity.id===a){this.currentHoverEntity=o.entity,this.currentHoverEntity.count=o.count;break}}this.bubblePopup&&(this.bubblePopup.hide(),this.bubblePopup.destroy(),this.bubblePopup=null),setTimeout(function(){var e=document.getElementById("bubble-popup-menu").cloneNode(!0);e.style.display="inline-block",t.bubblePopup=t.tippy("#"+n,{content:e,allowHTML:!0,trigger:"manual",interactive:!0,arrow:!0,theme:"light-border no-padding",placement:"top",maxWidth:500})[0],setTimeout(function(){t.bubblePopup&&t.bubblePopup.show()},800)})}},t.prototype.destroyTooltip=function(){this.bubblePopup&&(this.bubblePopup.hide(),this.bubblePopup.destroy(),this.bubblePopup=null)},t.prototype.onBubbleTooltipClick=function(e,t){switch(e){case"select":if(!t)return;var n=this.convertEntityIdToBubbleId(t.entityId);if(!n)return;var a=null;if(t._bubbleChart&&(t._bubbleChart.selectAll("g").each(function(e){e.id===n&&(a=e)}),a))return a}},t.prototype.onBubbleSelected=function(e){e&&(this.selectedBubbles.includes(e)||this.selectedBubbles.length<this.maxBubblesSelectable&&this.selectedBubbles.push(e))},t.prototype.getBubbleFromId=function(e){var t=this.convertEntityIdToBubbleId(e);if(t){var n=null;return this._bubbleChart&&(this._bubbleChart.selectAll("g").each(function(e){e.id===t&&(n=e)}),n)?n:void 0}},t.prototype.getSelectedBubbles=function(){return this.selectedBubbles},t.prototype.getAllBubbles=function(){return this.allBubbles},t.prototype.getEntityIdMap=function(){return this.entityBubbleIdMap},t.prototype.setWindowResize=function(){var e=this;this.windowResizeSet||(o.fromEvent(window,"resize").pipe(r.debounce(function(){return o.interval(200)})).subscribe(function(){var t=document.getElementById(e.options.containerId);if(null!=t.offsetParent){var n={width:t.offsetWidth,reset:!0};e.update(n)}}),this.windowResizeSet=!0)},t}(u.DataSource);var de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){var t=e.title,n=e.text,a=e.button,i=e.backgroundImage,o=e.input;return{title:t,text:n,backgroundImage:i,button:{text:a.text,payload:"cerca"},input:{placeholder:o.placeholder,payload:"cerca-in-maxxi"}}},t}(u.DataSource),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return i.TABLE_MOCK},t}(u.DataSource),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return{title:e.title,backgroundImage:e.backgroundImage,image:e.image,text:e.text,button:{text:e.button.text,payload:"naviga-patrimonio"}}},t}(u.DataSource),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoComplete={},t.tippyMaker=function(e,n){if(n=n.replace(/ /g,"-"),!t.autoComplete[n]){t.autoComplete[n]={tippy:void 0,open:!0};var a=t.autoComplete[n];if(!a.tippy){var i="."+n;a.tippy=c(i,{content:(o=document.getElementsByClassName("aw-simple-autocomplete__"+n.replace(/-search/,""))[0],o.setAttribute("style","display: block"),o),trigger:"manual",interactive:!0,arrow:!1,flip:!1,appendTo:"parent",theme:"light-border aw-home__facet-tippy",placement:"bottom-start",maxWidth:"100%"})[1]}}var o,r=t.autoComplete[n];console.log({res:e}),e.entities.length>0&&r.tippy?r.tippy.show():r.tippy.hide(),console.log(t.autoComplete)},t}return b(t,e),t.prototype.transform=function(e){var t=e.facetData,n=e.lockedFacets,a=[],i=[];t.forEach(function(e){Object.keys(n).length&&(n[e.type]?e.locked=!0:e.locked=!1);var o=[],r=[e.icon];e.enabled||o.push("is-disabled"),e.configKey&&(o.push("color-"+e.configKey),r.push("color-"+e.configKey)),a.push({iconLeft:r.join(" "),text:e.label,additionalText:e.count,iconRight:e.enabled?"n7-icon-eye":"n7-icon-eye-slash",classes:o.join(" ")+(e.locked?" is-blocked":t.every(function(t){return!t.enabled||t.type===e.type})?" is-blocked":" not-blocked"),payload:e.type.replace(" ","-")}),i.push({sections:[{inputs:[{type:"text",placeholder:e["input-placeholder"],icon:"n7-icon-search",disabled:!e.enabled,inputPayload:String(e.type)+"-search",iconPayload:String(e.type)+"-search",enterPayload:String(e.type)+"-search",classes:String(e.type.replace(" ","-"))+"-search"}]}]})});var o=[];return a.map(function(e,t){o.push({header:e,input:i[t]})}),o},t}(u.DataSource);var fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e},t}(u.DataSource),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){var t=e.entities,n=e.totalCount,a=this.options.config,i=[],o={};return console.log(t),t.forEach(function(e){var t=e.entity;e.count;if(!o[t.typeOfEntity]){var n=a[t.typeOfEntity.replace(" ","-")],r=n.label,s=n.icon;o[t.typeOfEntity.replace(" ","-")]={title:r,icon:s,classes:"color-"+t.typeOfEntity.replace(" ","-"),items:[]}}if(-1===i.indexOf(t.id)){var l=" ";if(t.fields){var u=a[t.typeOfEntity.replace(" ","-")]["main-metadata"];t.fields.forEach(function(e){e.key===u&&(l=" - "+e.value)})}o[t.typeOfEntity.replace(" ","-")].items.push({label:t.label,value:l,payload:{source:"item",id:t.id}})}}),{results:Object.keys(o).map(function(e){return{group:h({},o[e])}}),actions:{showMore:{text:"Visualizza tutti i "+n+" risultati",payload:{source:"showMore"}}},fallback:"Spiacenti, non è stato trovato nessun risultato. <br> Riprova con una nuova ricerca."}},t}(u.DataSource),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){if(e){var t=e.data,n=e.selected,a={items:[],payload:"entita-nav"};return a.items.push({text:"OVERVIEW",payload:"overview",classes:"overview"==n?"is-selected":""}),t.fields&&t.fields.length>0&&a.items.push({text:"CAMPI",payload:"campi",classes:"campi"==n?"is-selected":""}),t.relatedItems&&a.items.push({text:"OGGETTI-COLLEGATI",payload:"oggetti-collegati",classes:"oggetti-collegati"==n?"is-selected":""}),t.relatedEntities&&this.options.bubblesEnabled&&a.items.push({text:"ENTITÀ COLLEGATE",payload:"entita-collegate",classes:"entita-collegate"==n?"is-selected":""}),t.extraTab&&a.items.push({text:"MAXXI",payload:"maxxi",classes:"maxxi"==n?"is-selected":""}),t.wikiTab&&a.items.push({text:"WIKIPEDIA",payload:"wiki",classes:"wiki"==n?"is-selected":""}),a}},t}(u.DataSource),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return{group:t.unpackFields(e)}},t.unpackFields=function(e){var n=[];if(e instanceof Array)return[{items:n=e.map(function(e){return{label:e.key,value:e.value}})}];if(!e)return[];for(var a=0;a<e.length;a++){var i=e[a],o=i.label,r=i.key,s=i.value,l=i.fields,u={};o&&(u.title=o),r&&s&&(u.label=r,u.value=s),l&&(l[0].key?u.items=t.unpackFields(l):u.group=t.unpackFields(l)),n.push(u)}return n},t}(u.DataSource),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return this.icons=this.options.icons,e},t.prototype.updateTree=function(e,t,n){var a=this.updateTreeData(e,t,n);this.update(a)},t.prototype.updateTreeData=function(e,t,n){var a=this;return e||(e=this.output),e.items.forEach(function(e){var i=e.classes;e._meta==n?i&&i.indexOf("is-expanded")>-1?(e.classes=i.replace(/is-expanded/g,"is-collapsed"),e.toggle&&(e.toggle.icon="n7-icon-angle-right")):(e.classes=i.replace(/is-collapsed/g,"is-expanded"),e.toggle&&(e.toggle.icon="n7-icon-angle-down")):t&&t.indexOf(e._meta)>=0&&(e.classes=i.replace(/is-collapsed/g,"is-expanded"),e.toggle&&(e.toggle.icon="n7-icon-angle-down")),void 0!==e.items&&e.items.length>0&&a.updateTreeData(e,t,n)}),e},t.prototype.selectTreeItem=function(e,t){var n=this;t||(t=this.output),this.currentItem&&this.currentItem._meta==e||(t.items.forEach(function(t){if(t._meta==e&&t.classes.indexOf("is-active")<0)t.classes=t.classes+" is-active",n.currentItem=t;else{var a=t.classes;t.classes=a.replace("is-active","")}void 0!==t.items&&t.items.length>0&&n.selectTreeItem(e,t)}),this.update(t))},t.prototype.toggleSidebar=function(){var e=this.output;"is-expanded"==e.classes?e.classes="is-collapsed":e.classes="is-expanded",this.update(e)},t.prototype.parseData=function(e){var t=this,n={items:[]},a=e.tree;a.branches&&a.branches.length>0&&a.branches.forEach(function(e){n.items.push(t.parseTree(e,!1,[]))}),this.update(n),e.currentItem==e.currentItem!=null&&(this.selectTreeItem(e.currentItem,null),this.updateTree(null,this.currentItem.parents,e.currentItem))},t.prototype.parseTree=function(e,t,n){var a=this,i=y(n),o={},r=t&&null!=e.branches&&e.branches.length>0;return r&&(o.toggle={icon:"n7-icon-angle-right",payload:{source:"toggle",id:e.id,parents:i}}),Object.keys(e).forEach(function(n){if("branches"!=n){switch(n){case"label":o.text=e[n];break;case"img":o.img=e[n];break;case"icon":r&&null!=e[n]?o.toggle.icon=e[n]:o.icon=e[n];break;case"id":o._meta=e[n],o.payload={source:"menuItem",id:e.id};break;default:e[n]}o.classes="is-collapsed",o.parents=i}else null!=e.branches&&(i.push(e.id),t||(o.payload.source="ToggleMenuItem",o.payload.parents=i),o.items=[],e[n].forEach(function(e){""!=e.img&&null!=e.img&&(o.iconright="n7-icon-images"),o.items.push(a.parseTree(e,!0,i))}))}),o},t}(u.DataSource);var we=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e},t.prototype.toggleSidebar=function(){var e=this.output;"is-expanded"==e.classes?(e.classes="is-collapsed",e.iconRight="n7-icon-tree-icon"):(e.classes="is-expanded",e.iconRight="n7-icon-angle-left"),this.update(e)},t}(u.DataSource),Se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e},t.prototype.toggleSidebar=function(){var e=this.output;"is-expanded"==e.classes?e.classes="is-collapsed":e.classes="is-expanded",this.update(e)},t}(u.DataSource),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e},t}(u.DataSource),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e},t}(u.DataSource),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.transform=function(e){return e},t}(u.DataSource),ke=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selected="list",t}return b(t,e),t.prototype.transform=function(e){return{items:[{text:"LISTA",payload:"list",classes:"list"===this.selected?"is-selected":""},{text:"GRAFICO",payload:"chart",classes:"chart"===this.selected?"is-selected":""},{text:"TIMELINE",payload:"timeline",classes:"timeline"===this.selected?"is-selected":""}]}},t.prototype.setSelected=function(e){this.selected=e},t}(u.DataSource);var Ce=Object.freeze({AwLinkedObjectsDS:le,AwAutocompleteWrapperDS:ue,AwBubbleChartDS:ce,AwHeroDS:de,AwTableDS:pe,AwHomeHeroPatrimonioDS:be,AwHomeFacetsWrapperDS:he,AwHomeItemTagsWrapperDS:fe,AwHomeAutocompleteDS:ye,AwEntitaNavDS:ge,AwEntitaMetadataViewerDS:me,AwTreeDS:ve,AwSidebarHeaderDS:we,AwSchedaBreadcrumbsDS:Se,AwSchedaMetadataDS:Ie,AwSchedaImageDS:_e,AwSchedaInnerTitleDS:Ee,AwSearchLayoutTabsDS:ke}),xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleScroll=function(e){e.scrollTop+e.clientHeight>=e.scrollHeight-150&&0==t.dataSource.loadedData.isLoading&&(t.dataSource.loadedData.isLoading=!0,t.emitOuter("datarequest",{currentPage:t.dataSource.currentPage}))},t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-linked-objects.click":if(a.startsWith("page"))e.emitOuter("pagination",a);else if(a.startsWith("goto")){var i=Number(a.replace("goto-",""));if(i>e.dataSource.totalPages)return;if(i<1||i===e.dataSource.currentPage)return;e.emitOuter("goto",a)}else e.emitGlobal("navigate",{handler:"router",path:["aw/patrimonio/"+a]});break;case"aw-linked-objects.change":e.emitOuter("change",Number(a.value));break;default:console.warn("unhandled event type: ",n," with payload: ",a)}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-home-layout.viewmore":e.dataSource.checkForMore(!1),e.emitOuter("datarequest",{currentPage:e.dataSource.currentPage});break;case"aw-home-layout.dataresponse":var i=a.res;e.dataSource.handleIncomingData(i);case"aw-home-layout.scroll":e.handleScroll(a)}})},t}(u.EventHandler);var De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-autocomplete-wrapper.click":e.emitOuter("clickresult",a);break;default:console.warn("unhandled event of type:",n)}})},t}(u.EventHandler),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){switch(t.type){case"aw-bubble-chart.init":break;case"aw-bubble-chart.click":t.payload.entityIdmap=e.dataSource.getEntityIdMap(),t.payload.allBubbles=e.dataSource.getAllBubbles(),e.emitOuter("click",t.payload);break;case"aw-bubble-chart.mouse_enter":var n=e.dataSource.onBubbleMouseEnter({bubblePayload:t.payload.bubblePayload,bubble:t.payload.bubble});t.payload.currBubble=n,e.emitOuter("mouse_enter",t.payload);break;case"aw-bubble-chart.mouse_leave":e.emitOuter("mouse_leave",t.payload);break;case"aw-bubble-chart.bubble-tooltip-close-click":e.emitOuter("bubble-tooltip-close-click",t.payload);break;case"aw-bubble-chart.bubble-tooltip-goto-click":e.emitOuter("bubble-tooltip-goto-click",t.payload);break;case"aw-bubble-chart.bubble-tooltip-select-click":e.emitOuter("bubble-tooltip-select-click",t.payload);break;default:console.warn("unhandled inner event of type",t.type)}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-home-layout.bubble-tooltip-select-click":var i={bubble:e.dataSource.onBubbleTooltipClick("select",a),entityIdmap:e.dataSource.getEntityIdMap(),allBubbles:e.dataSource.getAllBubbles(),source:"bubble"};e.emitOuter("click",i);break;case"aw-home-layout.bubble-filter":e.emitOuter("bubble-filtered",{allBubbles:e.dataSource.getAllBubbles(),selected:e.dataSource.getSelectedBubbles()});break;case"aw-scheda-layout.filterbubbleresponse":case"aw-entita-layout.filterbubbleresponse":case"aw-home-layout.filterbubbleresponse":a.source?(e.dataSource.setAllBubblesFromApolloQuery(a,a.reload),e.emitOuter("bubble-filtered",{allBubbles:e.dataSource.getAllBubbles(),selected:e.dataSource.getSelectedBubbles(),entityIdmap:e.dataSource.getEntityIdMap()})):e.dataSource.update(a)}})},t}(u.EventHandler),Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-hero.click":break;case"aw-hero.change":e.emitOuter("change",a)}})},t}(u.EventHandler),Pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){switch(t.type){case"aw-home-bubble-chart.click":e.emitOuter("click",t.payload);break;case"aw-home-bubble-chart.mouse_enter":e.emitOuter("mouse_enter",t.payload);break;case"aw-home-bubble-chart.mouse_leave":e.emitOuter("mouse_leave",t.payload)}})},t}(u.EventHandler),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-home-facets-wrapper.click":e.emitOuter("click",a);break;case"aw-home-facets-wrapper.change":e.emitOuter("change",a);break;case"aw-home-facets-wrapper.enter":e.emitOuter("enter",a);break;default:console.warn("unhandled inner event of type:",n)}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-home-layout.facetswrapperresponse":e.dataSource.tippyMaker(a.response,a.facetId.inputPayload)}})},t}(u.EventHandler),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type;t.payload;switch(n){case"aw-home-hero-patrimonio.click":e.emitGlobal("navigate",{handler:"router",path:["aw/patrimonio"]})}})},t}(u.EventHandler),He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){switch(t.type){case"aw-home-item-tags-wrapper.click":e.emitOuter("click",t.payload)}})},t}(u.EventHandler),Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-home-autocomplete.click":a&&"item"===a.source&&e.emitOuter("click",a)}})},t}(u.EventHandler),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-entita-nav.click":e.emitOuter("click",a);break;default:console.warn("unhandled event type")}})},t}(u.EventHandler),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;"aw-sidebar-header.click"==n&&(e.dataSource.toggleSidebar(),e.emitOuter(n,a))})},t}(u.EventHandler),Me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;"aw-sidebar-header.click"==n&&(e.dataSource.toggleSidebar(),e.emitOuter("click",a))})},t}(u.EventHandler),$e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){t.type;var n=t.payload;if(n&&void 0!==n.source)switch(n.source){case"toggle":e.dataSource.updateTree(null,n.parents,n.id);break;case"ToggleMenuItem":e.dataSource.updateTree(null,n.parents,n.id);case"menuItem":e.dataSource.selectTreeItem(n.id),e.emitOuter("click",n.id)}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-sidebar-header.click":e.dataSource.toggleSidebar();break;case"aw-scheda-layout.selectItem":e.dataSource.selectTreeItem(a),void 0!==e.dataSource.currentItem?e.dataSource.updateTree(null,e.dataSource.currentItem.payload.toggle.parents,a):console.warn("The object in the URL does not exist.");break;case"aw-scheda-layout.navigationresponse":e.dataSource.parseData(a)}})},t}(u.EventHandler),Re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){},t}(u.EventHandler),qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){},t}(u.EventHandler),Ne=Object.freeze({AwLinkedObjectsEH:xe,AwAutocompleteWrapperEH:De,AwBubbleChartEH:Ae,AwHeroEH:Be,AwHomeBubbleChartEH:Pe,AwHomeFacetsWrapperEH:Oe,AwHomeHeroPatrimonioEH:Te,AwHomeItemTagsWrapperEH:He,AwHomeAutocompleteEH:Fe,AwEntitaNavEH:je,AwSchedaSidebarEH:Le,AwSidebarHeaderEH:Me,AwTreeEH:$e,AwSearchLayoutTabsEH:Re,AwTableEH:qe}),We={layoutId:"aw-about-layout",widgets:[],layoutDS:re,layoutEH:se,widgetsDataSources:Ce,widgetsEventHandlers:Ne,layoutOptions:{}},ze=function(e){function n(){return e.call(this,We)||this}return b(n,e),n.prototype.ngOnInit=function(){this.onInit()},n.prototype.ngOnDestroy=function(){this.onDestroy()},n.decorators=[{type:t.Component,args:[{selector:"aw-about-layout",template:'<div class="" *ngIf="lb.dataSource">\n    About page!\n</div>'}]}],n.ctorParameters=function(){return[]},n}(k),Ve=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.myResponse={},t.navHeader={},t.pageSize=10,t.bubblesSize=10,t.handlePageNavigation=function(){t.one("aw-linked-objects").updateOptions({context:t.selectedTab,config:t.configuration,page:t.currentPage,pagination:!0,size:t.pageSize}),t.one("aw-linked-objects").update({items:t.myResponse.relatedItems}),t.location.go(t.configuration.get("paths").entitaBasePath+t.currentId+"/oggetti-collegati/"+t.currentPage)},t.handleNavUpdate=function(e){t.selectedTab=e,t.updateWidgets(t.myResponse);var n="oggetti-collegati"==e?"/1":"";"oggetti-collegati"==e?(t.one("aw-linked-objects").updateOptions({context:t.selectedTab,config:t.configuration,page:t.currentPage,pagination:!0,size:t.pageSize}),t.one("aw-linked-objects").update({items:t.myResponse.relatedItems})):"overview"==e&&(t.one("aw-linked-objects").updateOptions({size:3,config:t.configuration,context:"entita"}),t.one("aw-linked-objects").update({items:t.myResponse.relatedItems})),"overview"!=e&&"entita-collegate"!=e||setTimeout(function(){t.updateBubbes(t.myResponse)},800),t.location.go(t.configuration.get("paths").entitaBasePath+t.currentId+"/"+e+n)},t}return b(t,e),t.prototype.onInit=function(e){var t=e.configuration,n=e.mainState,a=e.router,i=e.location,o=e.options,r=e.titleService,s=e.communication;this.communication=s,this.configuration=t,this.mainState=n,this.options=o,this.router=a,this.location=i,this.titleService=r,this.currentId="",this.currentPage=1,this.bubbleLoaded=!1,this.bubblesEnabled=!!this.configuration.get("features-enabled")&&this.configuration.get("features-enabled").bubblechart,this.bubblesSize=this.configuration.get("entita-layout")?this.configuration.get("entita-layout")["max-bubble-num"]:this.bubblesSize},t.prototype.getNavigation=function(e){return this.communication.request$("getEntityDetails",{onError:function(e){return console.error(e)},params:{entityId:e,entitiesListSize:this.bubblesSize}})},t.prototype.updateWidgets=function(e){var t=this.selectedTab;this.one("aw-entita-nav").update({data:e,selected:t})},t.prototype.updateBubbes=function(e){this.bubbleLoaded||(this.one("aw-bubble-chart").update(e),this.bubbleLoaded=!0)},t.prototype.loadItem=function(e,t){if(e&&t)return this.currentId=e,this.selectedTab=t,this.communication.request$("getEntityDetails",{onError:function(e){return console.error(e)},params:{entityId:e,entitiesListSize:this.bubblesSize}});this.pageTitle="Entità Test"},t.prototype.loadContent=function(e){console.log("(entita) Apollo responded with: ",{res:e}),this.myResponse=e,this.navHeader={icon:this.configuration.get("config-keys")[this.myResponse.typeOfEntity]?this.configuration.get("config-keys")[this.myResponse.typeOfEntity].icon:"",text:this.myResponse.label,color:this.myResponse.typeOfEntity},this.one("aw-entita-nav").updateOptions({bubblesEnabled:this.bubblesEnabled}),this.one("aw-bubble-chart").updateOptions({context:"scheda",configKeys:this.configuration.get("config-keys"),bubbleContainerId:"overviewBubbleChartContainer",containerId:"bubble-chart-container-overview"}),this.one("aw-entita-metadata-viewer").updateOptions({context:this.selectedTab}),this.one("aw-entita-metadata-viewer").update(e.fields),"oggetti-collegati"==this.selectedTab?this.one("aw-linked-objects").updateOptions({context:this.selectedTab,config:this.configuration,page:this.currentPage,pagination:!0,size:this.pageSize}):this.one("aw-linked-objects").updateOptions({size:3,config:this.configuration,context:"entita"}),this.one("aw-linked-objects").update({items:e.relatedItems})},t}(u.LayoutDataSource);var Ge=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.destroyed$=new o.Subject,t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-entita-layout.init":e.dataSource.onInit(a),e.configuration=a.configuration,e.route=a.route,e.entityId=e.route.snapshot.params.id||"",e.dataSource.currentPage=e.route.snapshot.params.page||1,e.listenRoute(e.entityId);break;case"aw-entita-layout.destroy":e.destroyed$.next();break;case"aw-entita-layout.showmore":a&&(e.dataSource.handleNavUpdate(a),e.emitGlobal("navigate",{path:[e.configuration.get("paths").entitaBasePath+"/"+e.entityId+"/"+a],handler:"router"}))}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-entita-nav.click":a&&(e.dataSource.selectedTab=a,e.dataSource.handleNavUpdate(a));break;case"aw-linked-objects.pagination":e.dataSource.currentPage=a.split("-")[1],e.dataSource.handlePageNavigation();break;case"aw-linked-objects.goto":e.dataSource.currentPage=Number(a.replace("goto-","")),e.dataSource.handlePageNavigation();break;case"aw-linked-objects.change":e.dataSource.pageSize=a,e.listenRoute("",!0);case"aw-bubble-chart.bubble-tooltip-goto-click":if(!a||!a.entityId)return;e.emitGlobal("navigate",{handler:"router",path:["aw/entita/"+a.entityId]});break;case"aw-bubble-chart.bubble-filtered":"overview"!=e.dataSource.selectedTab&&"entita-collegate"!=e.dataSource.selectedTab||(a.reload=!0,a.reset=!0,e.emitOuter("filterbubbleresponse",a))}})},t.prototype.listenRoute=function(e,t){var n=this;void 0===e&&(e=""),void 0===t&&(t=!1),this.route.paramMap.subscribe(function(a){if(a.get("id")){if(n.dataSource.currentId==a.get("id")&&!t)return;n.dataSource.loadItem(a.get("id"),a.get("tab")).subscribe(function(t){if(t){n.dataSource.loadContent(t),n.dataSource.bubbleLoaded=!1;var a={source:t,reload:!1};n.emitOuter("filterbubbleresponse",a),n.dataSource.updateWidgets(t),e&&n.emitOuter("selectItem",e)}})}else n.dataSource.loadItem()})},t}(u.EventHandler);var Ke={layoutId:"aw-entita-layout",widgets:[{id:"aw-entita-nav",hasStaticData:!0},{id:"aw-entita-metadata-viewer"},{id:"aw-linked-objects"},{id:"aw-bubble-chart"}],layoutDS:Ve,layoutEH:Ge,widgetsDataSources:Ce,widgetsEventHandlers:Ne,options:{}},Ue=function(e){function a(t,n,a,i,o,r,s,l){var u=e.call(this,o.get("AwEntitaLayoutConfig")||Ke)||this;return u.router=t,u.route=n,u.location=a,u.configuration=i,u.layoutsConfiguration=o,u.communication=r,u.mainState=s,u.titleService=l,u}return b(a,e),a.prototype.initPayload=function(){return{configuration:this.configuration,mainState:this.mainState,router:this.router,route:this.route,location:this.location,titleService:this.titleService,communication:this.communication,options:this.config.options||{}}},a.prototype.ngOnInit=function(){this.onInit()},a.prototype.ngOnDestroy=function(){this.onDestroy()},a.decorators=[{type:t.Component,args:[{selector:"aw-entita-layout",template:'<div class="aw-entity n7-side-auto-padding" *ngIf="lb.dataSource">\n    <div class="aw-entity__sidebar">\n        \x3c!-- Custom header --\x3e\n        <div class="aw-entity__sidebar-title-wrapper color-{{lb.dataSource.navHeader.color}}">\n            <h1 class="aw-entity__sidebar-title">\n                <span class="aw-entity__sidebar-title-icon {{lb.dataSource.navHeader.icon}}"></span>\n                <span class="aw-entity__sidebar-title-text">{{lb.dataSource.navHeader.text}}</span>\n            </h1>\n        </div>\n        \x3c!-- Navigation --\x3e\n        <n7-nav\n            [data]="lb.widgets[\'aw-entita-nav\'].ds.out$ | async" \n            [emit]="lb.widgets[\'aw-entita-nav\'].emit">\n        </n7-nav>\n    </div>\n    \x3c!-- lb.dataSource.selectedTab --\x3e\n    <div class="aw-entity__content">\n        <section>\n            <div *ngIf="lb.dataSource.myResponse.wikiTab || lb.dataSource.myResponse.extraTab" class="aw-entity__content-section" [hidden]="lb.dataSource.selectedTab != \'overview\'">\n                <div class="aw-entity__overview-description">\n                    {{lb.dataSource.myResponse.extraTab}}\n                </div>\n                <div class="aw-entity-layout__button-wrapper">\n                    <button *ngIf="lb.dataSource.myResponse.wikiTab" class="n7-btn n7-btn-light"\n                        (click)="lb.eventHandler.emitInner(\'showmore\', \'wiki\')">\n                        DESCRIZIONE WIKIPEDIA <i class="n7-icon-angle-right"></i>\n                    </button>\n                    <button *ngIf="lb.dataSource.myResponse.extraTab" class="n7-btn n7-btn-light"\n                        (click)="lb.eventHandler.emitInner(\'showmore\', \'maxxi\')">\n                        DESCRIZIONE MAXXI <i class="n7-icon-angle-right"></i>\n                    </button>\n                </div>\n            </div>\n\n            <ng-container *ngIf="lb.dataSource.myResponse.fields && lb.dataSource.myResponse.fields.length > 0">\n                <div class="aw-entity__content-section aw-entity__content-section-overview"\n                    [hidden]="lb.dataSource.selectedTab != \'overview\' && lb.dataSource.selectedTab != \'campi\'">\n                    <div class="aw-entity__content-section-header">\n                        <h2 class="aw-entity__content-section-title">Campi</h2>\n                        <button\n                            class="n7-btn n7-btn-light" (click)="lb.eventHandler.emitInner(\'showmore\', \'campi\')">\n                            TUTTI I CAMPI <i class="n7-icon-angle-right"></i>\n                        </button>\n                    </div>\n                    <n7-metadata-viewer class="aw-entity-layout__metadata-viewer"\n                        [data]="lb.widgets[\'aw-entita-metadata-viewer\'].ds.out$ | async ">\n                    </n7-metadata-viewer>\n                </div>\n            </ng-container>\n\n            <div class="aw-entity__content-section aw-entity__content-section-overview"\n                [hidden]="lb.dataSource.selectedTab != \'overview\' && lb.dataSource.selectedTab != \'oggetti-collegati\'">\n                <div class="aw-entity__content-section-header">\n                    <h2 class="aw-entity__content-section-title">Oggetti collegati</h2>\n\n                    <button class="n7-btn n7-btn-light"\n                    *ngIf="lb.dataSource.selectedTab == \'overview\'"\n                        (click)="lb.eventHandler.emitInner(\'showmore\', \'oggetti-collegati\')">\n                        TUTTI GLI OGGETTI COLLEGATI <i class="n7-icon-angle-right"></i>\n                    </button>\n                </div>\n                <div class="aw-entity__content-item-previews">\n                    <ng-container *ngFor="let preview of (lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.previews">\n                        <n7-smart-breadcrumbs [data]="preview.breadcrumbs">\n                        </n7-smart-breadcrumbs>\n                        <n7-item-preview [data]="preview" [emit]="lb.widgets[\'aw-linked-objects\'].emit">\n                        </n7-item-preview>\n                    </ng-container>    \n                </div>\n                <n7-pagination [data]="(lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.pagination"\n                    [emit]="lb.widgets[\'aw-linked-objects\'].emit">\n                </n7-pagination>\n            </div>\n\n            <div class="aw-entity__content-section aw-entity__content-section-overview"\n                *ngIf="lb.dataSource.bubblesEnabled"\n                [hidden]="lb.dataSource.selectedTab != \'overview\' && lb.dataSource.selectedTab != \'entita-collegate\'">\n                <div class="aw-entity__content-section-header">\n                    <h2 class="aw-entity__content-section-title">Entità collegate</h2>\n                    <button class="n7-btn n7-btn-light"\n                    (click)="lb.eventHandler.emitInner(\'showmore\', \'entita-collegate\')"\n                    *ngIf="lb.dataSource.selectedTab == \'overview\'">\n                        TUTTE LE ENTITÀ COLLEGATE <i class="n7-icon-angle-right"></i>\n                    </button>\n                </div>\n                <div [style.overflow]="\'hidden\'">\n                    <aw-bubble-chart-wrapper [hover]="lb.widgets[\'aw-bubble-chart\'].ds.currentHoverEntity"\n                        [emit]="lb.widgets[\'aw-bubble-chart\'].emit" [container]="\'bubble-chart-container-overview\'"\n                        [buttons]="[\'goto\']">\n                        <n7-bubble-chart [data]="lb.widgets[\'aw-bubble-chart\'].ds.out$ | async"\n                            [emit]="lb.widgets[\'aw-bubble-chart\'].emit">\n                        </n7-bubble-chart>\n                    </aw-bubble-chart-wrapper>\n                </div>\n            </div>\n            <div class="aw-entity__content-section aw-entity__content-section-maxxi"\n                *ngIf="lb.dataSource.myResponse.extraTab"\n                [hidden]="lb.dataSource.selectedTab != \'maxxi\'">\n                <div class="aw-entity__content-section-header aw-entity__content-section-header-decorated">\n                    <h2 class="aw-entity__content-section-title">Descrizione Maxxi</h2>\n                </div>\n                <div>\n                    {{lb.dataSource.myResponse.extraTab}}\n                </div>\n            </div>\n            <div class="aw-entity__content-section aw-entity__content-section-wiki"\n            *ngIf="lb.dataSource.myResponse.wikiTab"\n            [hidden]="lb.dataSource.selectedTab != \'wiki\'">\n                <div class="aw-entity__content-section-header aw-entity__content-section-header-decorated">\n                    <h2 class="aw-entity__content-section-title">Descrizione Wikipedia</h2>\n                </div>\n                <div>\n                    {{lb.dataSource.myResponse.wikiTab.text}}\n                </div>\n                <a href="{{lb.dataSource.myResponse.wikiTabUrl}}">\n                    {{lb.dataSource.myResponse.wikiTab.url}}\n                </a>\n            </div>\n        </section>\n    </div>\n</div>'}]}],a.ctorParameters=function(){return[{type:s.Router},{type:s.ActivatedRoute},{type:n.Location},{type:g},{type:m},{type:E},{type:v},{type:l.Title}]},a}(k);var Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.facetData=null,t.lockedFacets={},t.lockLastFacet=!1,t.facetInputs={},t.allBubbles=null,t.autocompletePopoverOpen=!1,t.autocompleteChanged$=new o.Subject,t.selectedBubbles=[],t.numOfItemsStr=null,t._bubbleChart=null,t.maxBubblesSelectable=3,t.entityBubbleIdMap={},t.lastWindowWidth=-1,t.bubblePopup=null,t.currentHoverEntity=null,t.hasScrollBackground=!1,t.loadingBubbles=!1,t.bubblesEnabled=!1,t.resultsLimit=-1,t.selectedEntitiesIds=[],t.updateComponent=function(e,n,a){a&&t.one(e).updateOptions(a),t.one(e).update(n)},t}return b(t,e),t.prototype.onInit=function(e){var t=e.communication,n=e.mainState,a=e.configuration,i=e.tippy;this.communication=t,this.configuration=a,this.facetData=[],this.lastWindowWidth=window.outerWidth,this.mainState=n,this.tippy=i,this.bubblesEnabled=!!this.configuration.get("features-enabled")&&this.configuration.get("features-enabled").bubblechart,this.resultsLimit=this.configuration.get("home-layout")["results-limit"],this.one("aw-hero").update(this.configuration.get("home-layout")["top-hero"]),this.one("aw-home-hero-patrimonio").update(this.configuration.get("home-layout")["bottom-hero"]),this.mainState.update("headTitle","Arianna Web > Home"),this.mainState.update("pageTitle","Arianna Web: Home Layout"),this.mainState.updateCustom("currentNav","aw/home"),this._listenAutoCompleteChanges()},t.prototype.makeRequest$=function(e,t){return this.communication.request$(e,{onError:function(e){return console.error(e)},params:t})},t.prototype.initialFilterRequest=function(){return this.communication.request$("globalFilter",{onError:function(e){return console.error(e)},params:{entitiesListSize:4*this.configuration.get("home-layout")["max-bubble-num"]}})},t.prototype.parseInitialRequest=function(e){var t=this;e.typeOfEntityData.forEach(function(e){var n=t.configuration.get("config-keys")[e.type.replace(" ","-")];t.facetData.push(h({},e,{enabled:!0,locked:!1,configKey:e.type.replace(" ","-")},n))}),this.one("aw-home-facets-wrapper").update({facetData:this.facetData,lockedFacets:this.lockedFacets}),this.one("aw-bubble-chart").updateOptions({context:"home",configKeys:this.configuration.get("config-keys"),bubbleContainerId:"bubbleChartContainer",containerId:"bubble-chart-container",maxNumber:this.configuration.get("home-layout")["max-bubble-num"]}),this.renderPreviewsFromApolloQuery(e)},t.prototype.renderPreviewsFromApolloQuery=function(e){if(e&&e.itemsPagination){var t=e.itemsPagination.totalCount;if(t>0){for(var n=0;t>999;)t-=1e3,n+=1;var a=t+"";t<10?a="00"+t:t<100&&(a="0"+t),this.numOfItemsStr=n>0?n+"."+a:t+""}else this.numOfItemsStr=null;this.one("aw-linked-objects").updateOptions({context:"home",config:this.configuration}),this.one("aw-linked-objects").update(e.itemsPagination)}},t.prototype.onBubbleTooltipClick=function(e,t){switch(e){case"select":if(!t)return;var n=t.bubbleId;if(!n)return;var a=null;this._bubbleChart&&(this._bubbleChart.selectAll("g").each(function(e){e.id===n&&(a=e)}),a&&this.onBubbleSelected(a))}},t.prototype.onBubbleSelected=function(e){return e&&!this.selectedBubbles.includes(e)&&this.selectedBubbles.length<this.maxBubblesSelectable?(this.loadingBubbles=0==this.selectedBubbles.length,this.selectedBubbles.push(e),!0):null},t.prototype.onBubbleDeselected=function(e){if(e&&e.bubble&&(this.selectedBubbles=this.selectedBubbles.filter(function(t){return t.id!==e.bubble.id}),e.bubble.hasCloseIcon))return e.bubble.hasCloseIcon=!1,this.filterRequest()},t.prototype.getBubblePayload=function(e){var t=this;return{reset:!0,setBubbleChart:function(e){return t._bubbleChart=e},facetData:this.facetData,source:e,selectedBubbles:this.selectedBubbles}},t.prototype.filterRequest=function(){var e=this;if(this.entityBubbleIdMap){var t=this.configuration.get("config-keys"),n={places:!1,people:!1,concepts:!1,organizations:!1};this.selectedBubbles.length<=0&&(this.selectedEntitiesIds=[]),this.selectedBubbles.forEach(function(a){var i,o,r=a.color;n[(i=t,o=r,Object.keys(i).find(function(e){return i[e].color.hex===o}))]=!0;var s=e.entityBubbleIdMap[a.id];s&&e.selectedEntitiesIds.push(s)}),this.lockedFacets=n,this.one("aw-home-facets-wrapper").update({facetData:this.facetData,lockedFacets:this.lockedFacets})}return this.communication.request$("globalFilter",{onError:function(e){return console.error(e)},params:{selectedEntitiesIds:this.selectedEntitiesIds,itemsPagination:{offset:0,limit:this.resultsLimit}}})},t.prototype.updateBubbles=function(e,t){t||this.renderPreviewsFromApolloQuery(e)},t.prototype.updateBubbleFilter=function(e){this.allBubbles=e.allBubbles,this.entityBubbleIdMap=e.entityIdmap},t.prototype.updateTags=function(e){e||this.renderItemTags()},t.prototype.filterBubblesBasedOnFacetsEnabled=function(){var e=this;return this.allBubbles.filter(function(t){for(var n=0;n<e.facetData.length;n++)if(t.entity.typeOfEntity.id===e.facetData[n].type.id&&!e.facetData[n].enabled)return!1;return!0})},t.prototype.handleFacetSearchChange=function(e){var t=e.inputPayload,n=e.value;this.facetInputs[t]=n},t.prototype.handleFacetSearchEnter=function(e){var t=e.inputPayload;this.facetInputs[t]},t.prototype.handleFacetHeaderClick=function(e){var t=this,n=!1,a=this.facetData.filter(function(e){return e.enabled}).length-1;if(this.facetData.forEach(function(t){t.type===e&&!0===t.locked||t.type===e&&!0===t.enabled&&a<1||(t.type===e?t.enabled&&a>0?(t.enabled=!1,t.locked=!1,n=!0):(t.enabled=!0,t.locked=!1,n=!0):a<=1&&t.enabled?t.locked=!0:t.locked=!1)}),this.one("aw-home-facets-wrapper").update({facetData:this.facetData,lockedFacets:this.lockedFacets}),n){var i=[];if(this.facetData.forEach(function(e){e.enabled||i.push(e.type.id)}),i){var o=this.selectedBubbles.filter(function(e){for(var n="",a=0;a<t.allBubbles.length;a++)if(t.allBubbles[a].id===e.id){n=t.allBubbles[a].entity.typeOfEntity.id;break}return!i.includes(n)});o.length!=this.selectedBubbles.length&&(this.selectedBubbles=o)}this.allBubbles.forEach(function(e){e.selected=!1;for(var n=0;n<t.selectedBubbles.length;n++)t.selectedBubbles[n].id===e.id&&(e.selected=!0)}),this.one("aw-bubble-chart").update(this.getBubblePayload(null))}},t.prototype.renderItemTags=function(){var e=this,t=[];this.selectedBubbles.forEach(function(n){for(var a="",i=0;i<e.allBubbles.length;i++)if(e.allBubbles[i].id===n.id){a=e.allBubbles[i].entity.label,t.push({label:a,icon:"n7-icon-close",payload:n.id,classes:"tag-"+e.allBubbles[i].entity.typeOfEntity.id});break}}),this.one("aw-home-item-tags-wrapper").update(t)},t.prototype.onTagClicked=function(e){if(e){var t=e;return this._bubbleChart&&this._bubbleChart.selectAll("g").each(function(e){e.id===t&&(e.hasCloseIcon=!1)}),this.selectedBubbles=this.selectedBubbles.filter(function(t){return t.id!==e}),this.filterRequest()}},t.prototype.onHeroChange=function(e){this.autocompleteChanged$.next(e)},t.prototype._scrollBackgroundControl=function(){var e=this,t=document.getElementById("bubble-results-list"),n=o.fromEvent(document.getElementById("bubble-results-list"),"scroll");setTimeout(function(){e._setHasScrollBackground(t)},500),n.pipe(r.debounceTime(50)).subscribe(function(t){var n=t.target;e._setHasScrollBackground(n)})},t.prototype._setHasScrollBackground=function(e){var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;this.hasScrollBackground=n>t+a},t.prototype._listenAutoCompleteChanges=function(){var e=this;this.one("aw-home-autocomplete").updateOptions({config:this.configuration.get("config-keys")}),this.autocompleteChanged$.pipe(r.debounceTime(500)).subscribe(function(t){t?e.communication.request$("autoComplete",{onError:function(e){return console.error(e)},params:{input:t,itemsPagination:{offset:0,limit:e.configuration.get("home-layout")["results-limit"]}}}).subscribe(function(t){e.one("aw-home-autocomplete").update(t),e.autocompletePopoverOpen||e._toggleAutocompletePopover()}):e._toggleAutocompletePopover()})},t.prototype._toggleAutocompletePopover=function(){var e=this;if(!this.autocompletePopover){var t=document.getElementById("aw-home-advanced-autocomplete-popover");t.style.display="block",this.autocompletePopover=this.tippy(".aw-home__top-hero .n7-hero__input",{content:t,trigger:"manual",interactive:!0,arrow:!1,flip:!1,appendTo:"parent",theme:"light-border",placement:"bottom-start",maxWidth:"100%",onHidden:function(){return e.autocompletePopoverOpen=!1}})[0]}this.autocompletePopoverOpen?this.autocompletePopover.hide():this.autocompletePopover.show(),this.autocompletePopoverOpen=!this.autocompletePopoverOpen},t}(u.LayoutDataSource);var Xe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.destroyed$=new o.Subject,t.handleSimpleAutocompleteClick=function(e){var n=t.dataSource.allBubbles.find(function(t){var n="B_"+e.replace(/-/g,"_");return t.id==n});n&&t.dataSource.onBubbleSelected(n),t.dataSource.selectedEntitiesIds.indexOf(e)<0&&(t.dataSource.selectedEntitiesIds.push(e),t.dataSource.communication.request$("globalFilter",{onError:function(e){return console.error(e)},params:{selectedEntitiesIds:t.dataSource.selectedEntitiesIds,itemsPagination:{offset:0,limit:t.dataSource.resultsLimit}}}).subscribe(function(e){e&&(t.dataSource.updateBubbleFilter({allBubbles:t.dataSource.allBubbles,bubble:n,bubblePayload:{id:n.id},entityIdmap:t.dataSource.entityBubbleIdMap,source:"bubble"}),t.dataSource.filterRequest().subscribe(function(e){e&&(t.emitOuter("filterbubbleresponse",t.dataSource.getBubblePayload(e)),t.dataSource.updateBubbles(e))}))}))},t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-home-layout.init":e.dataSource.onInit(a),e.loadFilters(),e.configuration=a.configuration;break;case"aw-home-layout.destroy":e.destroyed$.next()}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-hero.change":e.dataSource.onHeroChange(a.value);break;case"aw-home-facets-wrapper.click":e.dataSource.handleFacetHeaderClick(a);break;case"aw-home-facets-wrapper.change":if(a.value){var i={input:a.value,typeOfEntity:a.inputPayload.replace("-search",""),itemsPagination:{offset:0,limit:e.configuration.get("home-layout")["results-limit"]}};e.dataSource.makeRequest$("autoComplete",i).subscribe(function(t){e.emitOuter("facetswrapperresponse",{facetId:a,response:t}),e.dataSource.updateComponent("aw-autocomplete-wrapper",{key:a.value,response:t},{config:e.configuration})})}break;case"aw-home-facets-wrapper.enter":e.dataSource.handleFacetSearchEnter(a);break;case"aw-bubble-chart.bubble-tooltip-close-click":e.dataSource.onBubbleTooltipClick("close",a);break;case"aw-bubble-chart.bubble-tooltip-goto-click":if(!a||!a.entityId)return;e.emitGlobal("navigate",{handler:"router",path:["aw/entita/"+a.entityId]});break;case"aw-bubble-chart.bubble-tooltip-select-click":a._bubbleChart=e.dataSource._bubbleChart,e.emitOuter("bubble-tooltip-select-click",a);break;case"aw-bubble-chart.click":"bubble"===a.source?a.bubble&&(console.log({payload:a}),e.dataSource.updateBubbleFilter(a),e.dataSource.onBubbleSelected(a.bubble)&&e.dataSource.filterRequest().subscribe(function(t){t&&(e.emitOuter("filterbubbleresponse",e.dataSource.getBubblePayload(t)),e.dataSource.updateBubbles(t))})):"close"===a.source&&(e.dataSource.updateBubbleFilter(a),e.dataSource.onBubbleDeselected({bubblePayload:a.bubblePayload,bubble:a.bubble}).subscribe(function(t){t&&(e.emitOuter("filterbubbleresponse",e.dataSource.getBubblePayload(t)),e.dataSource.updateBubbles(t))}));break;case"aw-bubble-chart.bubble-filtered":e.dataSource.updateBubbleFilter(a),e.dataSource.updateTags();var o=e.dataSource;setTimeout(function(){o.loadingBubbles=!1},500);break;case"aw-home-item-tags-wrapper.click":e.dataSource.onTagClicked(a).subscribe(function(t){e.emitOuter("filterbubbleresponse",e.dataSource.getBubblePayload(t)),e.dataSource.updateBubbles(t),e.dataSource.renderItemTags()});break;case"aw-linked-objects.datarequest":var r=a.currentPage,s={selectedEntitiesIds:e.dataSource.selectedEntitiesIds,itemsPagination:{offset:r*e.dataSource.resultsLimit,limit:e.dataSource.resultsLimit}};e.dataSource.makeRequest$("globalFilter",s).subscribe(function(t){t?e.emitOuter("dataresponse",{res:t}):console.log("Unable to fetch additional data.")});break;case"aw-autocomplete-wrapper.clickresult":e.handleSimpleAutocompleteClick(a)}})},t.prototype.loadFilters=function(){var e=this;this.dataSource.initialFilterRequest().subscribe(function(t){if(console.log("(home) Apollo responded with:",t),t&&(e.dataSource.parseInitialRequest(t),e.dataSource.bubblesEnabled)){var n={setBubbleChart:function(t){return e.dataSource._bubbleChart=t},source:t,reset:!1,facetData:e.dataSource.facetData};e.emitOuter("filterbubbleresponse",n)}})},t}(u.EventHandler);var Ze={layoutId:"aw-home-layout",widgets:[{id:"aw-hero"},{id:"aw-home-hero-patrimonio"},{id:"aw-bubble-chart"},{id:"aw-home-facets-wrapper"},{id:"aw-home-item-tags-wrapper"},{id:"aw-home-autocomplete"},{id:"aw-linked-objects"},{id:"aw-autocomplete-wrapper"}],layoutDS:Qe,layoutEH:Xe,widgetsDataSources:Ce,widgetsEventHandlers:Ne,options:{}},Je=function(e){function n(t,n,a,i,o){var r=e.call(this,t.get("AwHomeLayoutConfig")||Ze)||this;return r.router=n,r.configuration=a,r.communication=i,r.mainState=o,r}return b(n,e),n.prototype.initPayload=function(){return{configuration:this.configuration,mainState:this.mainState,router:this.router,communication:this.communication,options:this.config.options||{},tippy:c}},n.prototype.ngOnInit=function(){this.onInit()},n.prototype.ngOnDestroy=function(){this.onDestroy()},n.decorators=[{type:t.Component,args:[{selector:"aw-home-layout",template:'<div class="aw-home" *ngIf="lb.dataSource">\n    \x3c!-- Hero section at the top of the page --\x3e\n    <div class="aw-home__top-hero">\n        <n7-hero [data]="lb.widgets[\'aw-hero\'].ds.out$ | async" [emit]="lb.widgets[\'aw-hero\'].emit">\n        </n7-hero>\n    </div>\n\n    \x3c!-- Bubble chart --\x3e\n    <div class="aw-home__bubble-wrapper n7-side-auto-padding"\n        [ngClass]="{ \'has-results\' : lb.dataSource.selectedBubbles.length > 0 }"\n        *ngIf="lb.dataSource.bubblesEnabled"\n    >\n        <div class="aw-home__facets-wrapper">\n            <span class="aw-home__facet"\n                *ngFor="let widgetData of lb.widgets[\'aw-home-facets-wrapper\'].ds.out$ | async;">\n                <n7-facet-header [data]="widgetData.header" [emit]="lb.widgets[\'aw-home-facets-wrapper\'].emit">\n                </n7-facet-header>\n                <n7-facet [data]="widgetData.input" [emit]="lb.widgets[\'aw-home-facets-wrapper\'].emit">\n                </n7-facet>\n            </span>\n        </div>\n        <div\n            class="aw-home__bubble-chart-wrapper"\n            [style.overflow]="lb.dataSource.loadingBubbles ? \'visible\' : \'hidden\'"\n        >\n            <aw-bubble-chart-wrapper\n                [hover]="lb.widgets[\'aw-bubble-chart\'].ds.currentHoverEntity"\n                [emit]="lb.widgets[\'aw-bubble-chart\'].emit"\n                [container]="\'bubble-chart-container\'"\n                [buttons]="[\'select\', \'goto\']"\n            >\n                    <n7-bubble-chart\n                        [data]="lb.widgets[\'aw-bubble-chart\'].ds.out$ | async"\n                        [emit]="lb.widgets[\'aw-bubble-chart\'].emit">\n                </n7-bubble-chart>\n            </aw-bubble-chart-wrapper>\n        </div>\n\n        \x3c!-- Linked objects --\x3e\n        <ng-container *ngIf="lb.dataSource.selectedBubbles.length > 0" >\n            <div class="aw-home__bubble-results"\n                 id="home-bubble-results"\n                 [ngStyle]="{ \'display\': \'flex\' , \'flex-direction\': \'column\', \'transition\': \'opacity 1s ease-in-out;\' }"\n                 [style.opacity]="lb.dataSource.loadingBubbles ? \'0\' : \'1\'">\n                <div *ngIf="lb.dataSource.numOfItemsStr">\n                    <h1 class="aw-home__bubble-results-title"><strong class="aw-home__bubble-results-title-counter">\n                        {{ lb.dataSource.numOfItemsStr }}</strong> <span> Oggetti culturali</span>\n                    </h1>\n                </div>\n                <div class="aw-home__bubble-tags-wrapper">\n                    <h3 class="aw-home__bubble-tags-title">Collegati a </h3>\n                    <ng-container *ngFor="let widgetData of lb.widgets[\'aw-home-item-tags-wrapper\'].ds.out$ | async;">\n                        <n7-tag [data]="widgetData" [emit]="lb.widgets[\'aw-home-item-tags-wrapper\'].emit">\n                        </n7-tag>\n                        <br>\n                    </ng-container>\n                </div>\n                <div class="aw-home__bubble-results-list-wrapper" >\n                    <div class="aw-home__bubble-results-list" \n                        [attr.id]="\'bubble-results-list\'" \n                        (scroll)="lb.eventHandler.emitOuter(\'scroll\', $event.target)">\n                        <ng-container *ngFor="let widgetData of (lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.result;">\n                            <n7-item-preview\n                                [data]="widgetData"\n                                [emit]="lb.widgets[\'aw-linked-objects\'].emit">\n                            </n7-item-preview>\n                        </ng-container>\n                        <ng-container *ngIf="(lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.isLoading">\n                            <n7-loader\n                                [data]="(lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.loaderData">\n                            </n7-loader>\n                        </ng-container>\n                    </div>\n                    <div *ngIf="lb.dataSource.hasScrollBackground" class="aw-home__bubble-results-list-wrapper-with-scroll"></div>\n                    \x3c!-- aw-linked-objects__actions --\x3e\n                    <div *ngIf="(lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.actions as action" class="aw-home__bubble-results-list-actions">\n                        <button class="n7-btn n7-btn-light n7-btn-l aw-home__bubble-results-list-view-all">\n                            {{action[0].label}}\n                        </button>\n                        \x3c!-- <button *ngIf="action[1]" \n                                class="n7-btn n7-btn-light n7-btn-l aw-home__bubble-results-list-view-others"\n                                (click)="lb.eventHandler.emitOuter(\'viewmore\', \'linked-objects\')"\n                                [disabled]="action[1].disabled">\n                            {{action[1].label}}\n                        </button> --\x3e\n                    </div>\n                </div>\n\n            </div>\n        </ng-container>\n    </div>\n\n    \x3c!-- Hero section at the bottom of the page --\x3e\n    <div class="aw-home__bottom-hero">\n        <n7-hero [data]="lb.widgets[\'aw-home-hero-patrimonio\'].ds.out$ | async"\n            [emit]="lb.widgets[\'aw-home-hero-patrimonio\'].emit">\n        </n7-hero>\n    </div>\n\n    \x3c!-- Adavanced autocomplete popover  --\x3e\n    <div id="aw-home-advanced-autocomplete-popover" style="display: none;">\n        <n7-advanced-autocomplete\n            [data]="lb.widgets[\'aw-home-autocomplete\'].ds.out$ | async"\n            [emit]="lb.widgets[\'aw-home-autocomplete\'].emit">\n        </n7-advanced-autocomplete>\n    </div>\n\n    \x3c!-- Simple autocomplete popover. DO NOT CHANGE parent div class! --\x3e\n    \x3c!-- Creating one template for each facet --\x3e\n    <div *ngFor="let widgetData of lb.widgets[\'aw-home-facets-wrapper\'].ds.out$ | async;"\n         class="aw-simple-autocomplete__{{widgetData.header.payload}}"\n         style="display: none;">\n         <n7-simple-autocomplete\n            [data]="lb.widgets[\'aw-autocomplete-wrapper\'].ds.out$ | async"\n            [emit]="lb.widgets[\'aw-autocomplete-wrapper\'].emit">\n        </n7-simple-autocomplete>\n    </div>\n</div>'}]}],n.ctorParameters=function(){return[{type:m},{type:s.Router},{type:g},{type:E},{type:v}]},n}(k);var Ye=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.allBubbles=null,t.selectedBubbles=[],t}return b(t,e),t.prototype.onInit=function(e){var t=e.configuration,n=e.mainState,a=e.router,i=e.options,o=e.titleService,r=e.communication;this.configuration=t,this.mainState=n,this.router=a,this.titleService=o,this.communication=r,this.options=i,this.sidebarCollapsed=!1,this.bubbleChartSectionTitle=this.configuration.get("scheda-layout")["bubble-chart"].title,this.similarItemsSectionTitle=this.configuration.get("scheda-layout")["related-items"].title,this.metadataSectionTitle=this.configuration.get("scheda-layout").metadata.title,this.hasSimilarItems=!1,this.bubblesEnabled=!!this.configuration.get("features-enabled")&&this.configuration.get("features-enabled").bubblechart,this.mainState.update("headTitle","Arianna Web > Patrimonio"),this.mainState.update("pageTitle","Arianna Web: patrimonio Layout"),this.mainState.updateCustom("currentNav","aw/patrimonio")},t.prototype.getNavigation=function(e){return this.communication.request$("getTree",{onError:function(e){return console.error(e)},params:{treeId:e}})},t.prototype.updateNavigation=function(e){var t={iconLeft:"n7-icon-tree-icon",text:e.label,iconRight:"n7-icon-angle-left",classes:"is-expanded",payload:"header"};this.one("aw-sidebar-header").update(t)},t.prototype.loadItem=function(e){if(e){var t=this.configuration.get("scheda-layout")["related-items"]["max-related-items"];return this.communication.request$("getNode",{onError:function(e){return console.error(e)},params:{id:e,maxSimilarItems:t}})}this.pageTitle="Collezione d'Arte",this.contentParts=[{type:"text",title:"Collezione d'Arte",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi gravida sagittis pulvinar. Etiam iaculis maximus metus, id tincidunt libero auctor et. Proin tempus turpis vel erat ultrices, id vestibulum ante cursus. Vestibulum lobortis, ante at eleifend consequat, massa libero bibendum justo, id fermentum magna odio ac nulla. Cras aliquet scelerisque malesuada. Mauris congue fermentum tristique. Nulla imperdiet accumsan dui, tristique lobortis metus eleifend non. Donec quis odio massa. Cras sit amet sem eu turpis molestie blandit vitae sed nibh. Pellentesque ornare enim nisl, et efficitur ante elementum a. Ut nec ex finibus, congue libero feugiat, aliquam ante. Cras sem neque, pellentesque eget mi at, auctor vulputate tellus. Sed aliquam mi a tortor ultricies interdum. Etiam tincidunt nunc commodo nulla porttitor semper. Etiam porta lacinia libero a mattis. Lorem ipsum dolor sit amet, consectetur adipiscing elit."},{type:"text",title:"Centro Archivi",content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi gravida sagittis pulvinar. Etiam iaculis maximus metus, id tincidunt libero auctor et. Proin tempus turpis vel erat ultrices, id vestibulum ante cursus. Vestibulum lobortis, ante at eleifend consequat, massa libero bibendum justo, id fermentum magna odio ac nulla. Cras aliquet scelerisque malesuada. Mauris congue fermentum tristique. Nulla imperdiet accumsan dui, tristique lobortis metus eleifend non. Donec quis odio massa. Cras sit amet sem eu turpis molestie blandit vitae sed nibh. Pellentesque ornare enim nisl, et efficitur ante elementum a. Ut nec ex finibus, congue libero feugiat, aliquam ante. Cras sem neque, pellentesque eget mi at, auctor vulputate tellus. Sed aliquam mi a tortor ultricies interdum. Etiam tincidunt nunc commodo nulla porttitor semper. Etiam porta lacinia libero a mattis. Lorem ipsum dolor sit amet, consectetur adipiscing elit."}];this.one("aw-scheda-breadcrumbs").update({items:[]})},t.prototype.loadContent=function(e){var t=this;if(e){console.log("(Scheda) Apollo responded with: ",e),this.contentParts=[];var n={};if(this.one("aw-tree").updateOptions({icons:this.configuration.get("scheda-layout").tree}),this.one("aw-bubble-chart").updateOptions({context:"scheda",configKeys:this.configuration.get("config-keys"),bubbleContainerId:"bubbleChartContainer",containerId:"bubble-chart-container"}),e.text&&(n.content=e.text),this.contentParts.push(n),e.image){var a=[{type:"image",url:e.image,buildPyramid:!1}];this.imageViewerIstance?this.imageViewerIstance.open(a):this.one("aw-scheda-image").update({viewerId:"scheda-layout-viewer",_setViewer:function(e){t.imageViewerIstance=e,e.open(a)}})}var i={icon:e.icon,title:{main:{text:e.title||e.label,classes:"bold"}},tools:e.subTitle,actions:{}};this.one("aw-scheda-inner-title").update(i);var o={group:[]};this.hasMetadata=null!=e.fields,this.hasMetadata&&e.fields.forEach(function(e){var t=[];e.fields?(e.fields.forEach(function(e){t.push({label:e.key,value:e.value})}),o.group.push({title:e.label,items:t})):(t.push({label:e.key,value:e.value}),o.group.push({items:t}))}),this.one("aw-scheda-metadata").update(o);var r={items:[]};e.breadcrumb&&(e.breadcrumbs.forEach(function(e){r.items.push({label:e.label,payload:e.link})}),this.one("aw-scheda-breadcrumbs").update(r))}e.relatedItems?(this.hasSimilarItems=!0,this.one("aw-linked-objects").updateOptions({context:"scheda",config:this.configuration}),this.one("aw-linked-objects").update(e)):this.hasSimilarItems=!1},t.prototype.collapseSidebar=function(){this.sidebarCollapsed=!this.sidebarCollapsed},t.prototype.setAllBubblesFromApolloQuery=function(e,t){if(e&&e.relatedEntities){this.allBubbles=[];for(var n=0;n<e.relatedEntities.length;n++){var a=this.configuration.get("config-keys")[e.relatedEntities[n].entity.typeOfEntity.configKey]?this.configuration.get("config-keys")[e.relatedEntities[n].entity.typeOfEntity.configKey].color.hex:"";this.allBubbles.push(h({id:this.convertEntityIdToBubbleId(e.relatedEntities[n].entity.id)},e.relatedEntities[n],{color:a}))}this.one("aw-scheda-bubble-chart").update({containerId:"bubble-chart-container",width:window.innerWidth/1.8,bubbles:this.allBubbles,reset:t||!1})}else this.hasBubbles=!1},t.prototype.convertEntityIdToBubbleId=function(e){return e?"B_"+e.replace(/-/g,"_"):null},t}(u.LayoutDataSource);var et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.destroyed$=new o.Subject,t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-scheda-layout.init":e.dataSource.onInit(a),e.configuration=a.configuration,e.route=a.route;var i=e.route.snapshot.params.id||"";e.listenRoute(),e.loadNavigation(i);break;case"aw-scheda-layout.destroy":e.destroyed$.next()}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-tree.click":a&&e.emitGlobal("navigate",{path:[e.configuration.get("paths").schedaBasePath+a],handler:"router"});break;case"aw-sidebar-header.click":e.dataSource.collapseSidebar();break;case"aw-bubble-chart.bubble-tooltip-goto-click":if(!a||!a.entityId)return;e.emitGlobal("navigate",{handler:"router",path:["aw/entita/"+a.entityId+"/overview"]})}})},t.prototype.listenRoute=function(){var e=this;this.route.paramMap.subscribe(function(t){t.get("id")?e.dataSource.loadItem(t.get("id")).subscribe(function(t){if(console.log("getNode() res: ",t),t&&(e.dataSource.loadContent(t),t.relatedEntities)){e.dataSource.hasBubbles=!0;var n={source:t,relatedEntities:t.relatedEntities,reset:!0};e.dataSource.bubblesEnabled&&e.emitOuter("filterbubbleresponse",n)}}):e.dataSource.loadItem()})},t.prototype.loadNavigation=function(e){var t=this;this.dataSource.getNavigation("patrimonio").subscribe(function(n){n&&(console.log("Apollo responded with tree:",n),t.dataSource.updateNavigation(n),t.emitOuter("navigationresponse",{tree:n,currentItem:e}))})},t}(u.EventHandler);var tt={layoutId:"aw-scheda-layout",widgets:[{id:"aw-sidebar-header"},{id:"aw-tree"},{id:"aw-scheda-breadcrumbs"},{id:"aw-scheda-metadata"},{id:"aw-scheda-image"},{id:"aw-scheda-inner-title"},{id:"aw-bubble-chart"},{id:"aw-linked-objects"}],layoutDS:Ye,layoutEH:et,widgetsDataSources:Ce,widgetsEventHandlers:Ne,options:{}},nt=function(e){function n(t,n,a,i,o,r,s){var l=e.call(this,i.get("AwPatrimonioLayoutConfig")||tt)||this;return l.router=t,l.route=n,l.configuration=a,l.layoutsConfiguration=i,l.mainState=o,l.titleService=r,l.communication=s,l}return b(n,e),n.prototype.initPayload=function(){return{configuration:this.configuration,mainState:this.mainState,router:this.router,route:this.route,titleService:this.titleService,communication:this.communication,options:this.config.options||{}}},n.prototype.ngOnInit=function(){this.onInit()},n.prototype.ngOnDestroy=function(){this.onDestroy()},n.decorators=[{type:t.Component,args:[{selector:"aw-scheda-layout",template:'<div class="aw-scheda" id="scheda-layout">\n    <div class="aw-scheda__content n7-side-auto-padding"\n         [ngClass]="{ \'is-collapsed\' : lb.dataSource.sidebarCollapsed }">\n\n         \x3c!-- Left sidebar: tree --\x3e\n        <div class="aw-scheda__tree">\n            <n7-sidebar-header\n                [data]="lb.widgets[\'aw-sidebar-header\'].ds.out$ | async"\n                [emit]="lb.widgets[\'aw-sidebar-header\'].emit"\n            ></n7-sidebar-header>\n            <n7-tree\n                [data]="lb.widgets[\'aw-tree\'].ds.out$ | async"\n                [emit]="lb.widgets[\'aw-tree\'].emit"\n                *ngIf="!lb.dataSource.sidebarCollapsed"\n            ></n7-tree>\n        </div>\n\n        \x3c!-- Scheda details --\x3e\n        <div class="aw-scheda__scheda-wrapper">\n            <n7-breadcrumbs\n                [data]="lb.widgets[\'aw-scheda-breadcrumbs\'].ds.out$ | async"\n                [emit]="lb.widgets[\'aw-scheda-breadcrumbs\'].emit">\n            </n7-breadcrumbs>\n\n            <n7-inner-title\n                [data]="lb.widgets[\'aw-scheda-inner-title\'].ds.out$ | async">\n            </n7-inner-title>\n\n            <n7-image-viewer\n                [data]="lb.widgets[\'aw-scheda-image\'].ds.out$ | async">\n            </n7-image-viewer>\n\n            <section class="aw-scheda__description">\n                <div *ngFor="let part of lb.dataSource.contentParts">\n                    <div [innerHTML]="part.content"></div>\n                </div>\n            </section>\n\n            <section class="aw-scheda__metadata"\n                     *ngIf="lb.dataSource.hasMetadata">\n                <div class="aw-scheda__inner-title">\n                    {{lb.dataSource.metadataSectionTitle}}\n                </div>\n                <n7-metadata-viewer\n                    [data]="lb.widgets[\'aw-scheda-metadata\'].ds.out$ | async">\n                </n7-metadata-viewer>\n            </section>\n\n            <section\n                class="aw-scheda__bubble-chart"\n                *ngIf="lb.dataSource.bubblesEnabled">\n                <div\n                    *ngIf = "lb.dataSource.hasBubbles"\n                    class="aw-scheda__inner-title">{{lb.dataSource.bubbleChartSectionTitle}}\n                </div>\n                <div [style.overflow]="\'hidden\'">\n                    <aw-bubble-chart-wrapper\n                        [hover]="lb.widgets[\'aw-bubble-chart\'].ds.currentHoverEntity"\n                        [emit]="lb.widgets[\'aw-bubble-chart\'].emit"\n                        [container]="\'bubble-chart-container\'"\n                        [buttons]="[\'goto\']">\n                        <n7-bubble-chart\n                            [data]="lb.widgets[\'aw-bubble-chart\'].ds.out$ | async"\n                            [emit]="lb.widgets[\'aw-bubble-chart\'].emit">\n                        </n7-bubble-chart>\n                    </aw-bubble-chart-wrapper>\n                </div>\n            </section>\n\n            <section\n                *ngIf = "lb.dataSource.hasSimilarItems"\n                id="related-item-container" class="aw-scheda__related">\n                <div class="aw-scheda__inner-title">{{lb.dataSource.similarItemsSectionTitle}}</div>\n                <div class="aw-scheda__related-items">\n                    \x3c!--<ng-container *ngFor="let widgetData of lb.widgets[\'aw-linked-objects\'].ds.out$ | async;">--\x3e\n                    <ng-container *ngFor="let preview of (lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.previews">\n                        <n7-item-preview\n                            [data]="preview"\n                            [emit]="lb.widgets[\'aw-linked-objects\'].emit"\n                            >\n                        </n7-item-preview>\n                    </ng-container>\n                </div>\n             </section>\n        </div>\n    </div>\n</div>\n'}]}],n.ctorParameters=function(){return[{type:s.Router},{type:s.ActivatedRoute},{type:g},{type:m},{type:v},{type:l.Title},{type:E}]},n}(k);var at=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.onInit=function(e){},t}(u.LayoutDataSource),it=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.listen=function(){},t}(u.EventHandler),ot={layoutId:"aw-works-layout",widgets:[],layoutDS:at,layoutEH:it,widgetsDataSources:Ce,widgetsEventHandlers:Ne,layoutOptions:{}},rt=function(e){function n(){return e.call(this,ot)||this}return b(n,e),n.prototype.ngOnInit=function(){this.onInit()},n.prototype.ngOnDestroy=function(){this.onDestroy()},n.decorators=[{type:t.Component,args:[{selector:"aw-works-layout",template:'<div class="" *ngIf="lb.dataSource">\n    Works page!\n</div>'}]}],n.ctorParameters=function(){return[]},n}(k),st={totalCount:0,facets:[{id:"query",type:"value"},{id:"query-all",type:"value",data:[{value:"1",label:"Cerca in tutti campi delle schede"}]},{id:"query-links",type:"value",data:[]},{id:"entity-types",type:"value",operator:"OR",limit:10,order:"count",data:[]},{id:"entity-search",type:"value"},{id:"entity-links",type:"value",metadata:["title","entity-type"],data:[]},{id:"date-from",type:"value",data:[]},{id:"date-to",type:"value",data:[]}],fields:[{inputs:[{type:"text",facetId:"query",placeholder:"Cerca...",filterConfig:{delay:500,minChars:3,searchIn:[{key:"source.title",operator:"LIKE"}]}},{type:"checkbox",facetId:"query-all",filterConfig:{searchIn:[{key:"query-all",operator:"="}]}},{type:"link",facetId:"query-links",filterConfig:{isArray:!0,searchIn:[{key:"source.entityType",operator:"="}]}}]},{header:{label:"Relazione con",classes:"related-class"},inputs:[{type:"checkbox",facetId:"entity-types",filterConfig:{isArray:!0,context:"internal",target:"entity-links",searchIn:[{key:"entity-type",operator:"="}]}},{type:"text",facetId:"entity-search",placeholder:"Cerca entità",filterConfig:{delay:500,minChars:3,context:"internal",target:"entity-links",searchIn:[{key:"title",operator:"LIKE"}]}},{type:"link",facetId:"entity-links",filterConfig:{limit:20,searchIn:[{key:"source.id",operator:"="}]}}]},{header:{label:"Data",classes:"date-class"},inputs:[{type:"select",facetId:"date-from",label:"Dal",filterConfig:{searchIn:[{key:"source.dateStart",operator:">="}]}},{type:"select",facetId:"date-to",label:"Al",filterConfig:{searchIn:[{key:"source.dateEnd",operator:"<="}]}}]}],results:{order:{type:"score",key:"author",direction:"DESC"},fields:{title:{highlight:!0,limit:50}},items:[]},page:{offset:0,limit:10}},lt=function(e,t){return t.filter(function(t){return t.id===e})[0]},ut=function(e){return Object.keys(e).map(function(t){var n=e[t];return{value:t,label:n.label,counter:Math.floor(100*Math.random()),options:{icon:n.icon,classes:"color-"+t}}})},ct=function(e){return Object.keys(e).map(function(t){return{value:t,label:e[t].label}})},dt=function(){return["1990","1991","1992","1993"].map(function(e){return{value:e,label:e}})},pt=function(){return["2000","2001","2002","2003"].map(function(e){return{value:e,label:e}})},bt=function(){var e=["places","places","concepts","people","people"];return["milano","roma","spazio","rodolfo-marna","alighiero-boetti"].map(function(t,n){var a=t.replace("-"," ");return{value:t,label:a,counter:Math.floor(100*Math.random()),metadata:{title:a,"entity-type":e[n]}}})},ht="aw-search-layout",ft=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentPage=1,t.pageSize=10,t.orderByLabel="Ordina per",t.orderByOptions=[{value:"text_DESC",label:"Ordine alfabetico (DESC)"},{value:"text_ASC",label:"Ordine alfabetico (ASC)"}],t.getSearchModelId=function(){return ht},t}return b(t,e),t.prototype.onInit=function(e){var t=this,n=e.configuration,a=e.mainState,i=e.options,o=e.communication,r=e.search;this.configuration=n,this.mainState=a,this.communication=o,this.search=r,this.options=i,this.pageTitle=this.configuration.get("search-layout").title,this.search.model(ht)||this.search.add(ht,st),this.searchModel=this.search.model(ht),this.doSearchRequest$().subscribe(function(){t.one("facets-wrapper").update({searchModel:t.searchModel})})},t.prototype.onOrderByChange=function(e){var t=f(e.split("_"),2),n=t[0],a=t[1];this.searchModel.setSearchConfigOrderBy(n),this.searchModel.setSearchConfigDirection(a)},t.prototype.onPaginationChange=function(e){var t=e.replace("page-","");return this._updateSearchPage(t)},t.prototype.onPaginationGoToChange=function(e){var t=e.replace("goto-","");this._updateSearchPage(t)},t.prototype.onResultsLimitChange=function(e){this.pageSize=e,this.searchModel.setPageConfigLimit(e),this.currentPage=1,this.searchModel.setPageConfigOffset(0)},t.prototype.doSearchRequest$=function(){var e=this,t=this.configuration.get("config-keys"),n=this.searchModel.getRequestParams();return this.communication.request$("getEntityDetails",{onError:function(e){return console.error(e)},params:{entityId:"55vf-entity-s3ar"}}).pipe(r.withLatestFrom(function(e,t){e.totalCount=Math.floor(1e3*Math.random()),console.log("fake-search-request-----------\x3e",e);var n=e.facets;return lt("query-links",n).data=ut(t),lt("entity-types",n).data=ct(t),lt("entity-links",n).data=bt(),lt("date-from",n).data=dt(),lt("date-to",n).data=pt(),o.of(e)}(n,t)),r.tap(function(t){var n=f(t,2),a=n[0],i=n[1];e.totalCount=i.totalCount;var o=0;e.totalCount>1?o=2:1===e.totalCount&&(o=1),e.resultsTitle=e.configuration.get("search-layout").results[o],e.searchModel.updateFacets(i.facets),e.searchModel.updateTotalCount(i.totalCount),e.one("aw-linked-objects").updateOptions({context:"search",config:e.configuration,page:e.currentPage,size:e.pageSize}),e.one("aw-linked-objects").update({items:a.items})}))},t.prototype._updateSearchPage=function(e){if(+e===this.currentPage)return o.of(!1);this.currentPage=+e;var t=this.searchModel.getConfig().page.limit,n=(this.currentPage-1)*t;return this.searchModel.setPageConfigOffset(n),o.of(!0)},t}(u.LayoutDataSource);var yt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.facetsChange$=new o.Subject,t}return b(t,e),t.prototype.listen=function(){var e=this;this.innerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"aw-search-layout.init":e.dataSource.onInit(a),e._listenToFacetsChange();break;case"aw-search-layout.orderbychange":e.dataSource.onOrderByChange(a),e.facetsChange$.next()}}),this.outerEvents$.subscribe(function(t){var n=t.type,a=t.payload;switch(n){case"facets-wrapper.facetschange":e.facetsChange$.next();break;case"aw-linked-objects.pagination":e.dataSource.onPaginationChange(a).subscribe(function(t){t&&e.facetsChange$.next()});break;case"aw-linked-objects.change":e.dataSource.onResultsLimitChange(a),e.facetsChange$.next();break;case"aw-linked-objects.goto":e.dataSource.onPaginationGoToChange(a).subscribe(function(t){t&&e.facetsChange$.next()})}})},t.prototype._listenToFacetsChange=function(){var e=this;this.facetsChange$.pipe(r.debounceTime(500)).subscribe(function(){e.dataSource.doSearchRequest$().subscribe(function(){e.emitGlobal("searchresponse",e.dataSource.getSearchModelId())})})},t}(u.EventHandler);var gt={layoutId:"aw-search-layout",widgets:[{id:"facets-wrapper",dataSource:q,eventHandler:U},{id:"aw-linked-objects"},{id:"aw-search-layout-tabs",hasStaticData:!0}],layoutDS:ft,layoutEH:yt,widgetsDataSources:Ce,widgetsEventHandlers:Ne,options:{}},mt=function(e){function n(t,n,a,i,o){var r=e.call(this,n.get("AwSearchLayoutConfig")||gt)||this;return r.configuration=t,r.layoutsConfiguration=n,r.mainState=a,r.communication=i,r.search=o,r}return b(n,e),n.prototype.initPayload=function(){return{configuration:this.configuration,mainState:this.mainState,communication:this.communication,search:this.search,options:this.config.options||{}}},n.prototype.ngOnInit=function(){this.onInit()},n.prototype.ngOnDestroy=function(){this.onDestroy()},n.decorators=[{type:t.Component,args:[{selector:"aw-search-layout",template:'<div class="aw-search n7-side-auto-padding" id="search-layout">\n    <div class="aw-search__header">\n        <div class="aw-search__header-left">\n            <h1 class="aw-search__header-title">{{ lb.dataSource.pageTitle }}</h1>\n        </div>        \n        \x3c!--\n        <div class="aw-search__header-right">\n            <n7-nav\n                [data]="lb.widgets[\'aw-search-layout-tabs\'].ds.out$ | async"\n                [emit]="lb.widgets[\'aw-search-layout-tabs\'].emit">\n            </n7-nav>\n        </div>\n        --\x3e\n    </div>\n    <div class="aw-search__content-wrapper">\n        \x3c!-- Left sidebar: facets --\x3e\n        <div class="aw-search__sidebar">\n            <div class="aw-search__facets">\n                <n7-facets-wrapper\n                    [data]="lb.widgets[\'facets-wrapper\'].ds.out$ | async"\n                    [emit]="lb.widgets[\'facets-wrapper\'].emit">\n                </n7-facets-wrapper>\n            </div>\n        </div>\n        <div class="aw-search__content">\n            <div class="aw-search__results-header">\n                <div class="aw-search__results-header-left">\n                    <h3 class="aw-search__total">\n                        <span class="aw-search__total-number">{{ lb.dataSource.totalCount }}</span>&nbsp;\n                        <span class="aw-search__total-title">{{ lb.dataSource.resultsTitle }}</span>\n                    </h3>\n                </div>        \n                <div class="aw-search__results-header-right">\n                    <label class="aw-search__results-select-orderby-label" for="aw-search__results-select-orderby">{{ lb.dataSource.orderByLabel }}</label>\n                    <select (change)="lb.eventHandler.emitInner(\'orderbychange\', $event.target.value)" id="aw-search__results-select-orderby">\n                        <option *ngFor="let option of lb.dataSource.orderByOptions" [value]="option.value">{{ option.label }}</option>\n                    </select>\n                </div>     \n            </div>\n            \x3c!-- Search details --\x3e\n            <div class="aw-search__results-wrapper">\n                <ng-container *ngFor="let preview of (lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.previews">\n                    <n7-breadcrumbs [data]="preview.breadcrumbs">\n                    </n7-breadcrumbs>\n                    <n7-item-preview [data]="preview" [emit]="lb.widgets[\'aw-linked-objects\'].emit">\n                    </n7-item-preview>\n                </ng-container>\n                <n7-pagination [data]="(lb.widgets[\'aw-linked-objects\'].ds.out$ | async)?.pagination"\n                    [emit]="lb.widgets[\'aw-linked-objects\'].emit">\n                </n7-pagination>\n            </div>\n        </div>\n    </div>\n</div>\n'}]}],n.ctorParameters=function(){return[{type:g},{type:m},{type:v},{type:E},{type:F}]},n}(k);var vt=function(){function e(){}return e.prototype.onClick=function(e,t){this.emit(e,t)},e.prototype.onMouseOut=function(e){this.emit(e)},e.prototype.onDestroy=function(){console.log("destroyed")},e.decorators=[{type:t.Component,args:[{selector:"aw-bubble-chart-wrapper",template:'<div class="aw-bubble-chart-wrapper" >\n    <button style="display: none;" id="bubble-popup-menu_closebutton"\n        (click)="onClick(\'bubble-tooltip-close-click\',{entityId: (hover ? hover.id : null)} )"></button>\n    <button style="display: none;" id="bubble-popup-menu_gotobutton"\n        (click)="onClick(\'bubble-tooltip-goto-click\',{entityId:(hover  ? hover.id : null)} )"></button>\n    <button style="display: none;" id="bubble-popup-menu_selectbutton"\n        (click)="onClick(\'bubble-tooltip-select-click\',{entityId:(hover ? hover.id : null)} )"></button>\n    <div id="bubble-popup-menu" class="aw-bubble-popup-menu" style="display: none;">\n        <h2 class="aw-bubble-popup-menu__title">{{ ( hover ? hover.label : \'\' ) }}</h2>\n        <span class="n7-icon-close aw-bubble-popup-menu__close"\n            onclick="document.getElementById(\'bubble-popup-menu_closebutton\').click();"></span>\n        <p class="aw-bubble-popup-menu__text">\n            {{ ( hover ? \'È collegato a \'+ hover.count + \' entità\' : \'\' ) }}\n        </p>\n        <div class="aw-bubble-popup-menu__actions">\n            <span class="aw-bubble-popup-menu__link" *ngIf="buttons.indexOf(\'goto\') >= 0"\n                onclick="document.getElementById(\'bubble-popup-menu_gotobutton\').click();">Vai alla scheda</span>\n            <ng-container *ngIf="buttons.length > 1"></ng-container>\n            <span class="aw-bubble-popup-menu__link" *ngIf="buttons.indexOf(\'select\') >= 0"\n                onclick="document.getElementById(\'bubble-popup-menu_selectbutton\').click();">Seleziona</span>\n        </div>\n    </div>\n    <div [id]="container">\n        <ng-content></ng-content>\n    </div>\n</div>'}]}],e.propDecorators={hover:[{type:t.Input}],emit:[{type:t.Input}],container:[{type:t.Input}],buttons:[{type:t.Input}]},e}();var wt=function(){function e(){var e=this;this.ngAfterViewInit=function(){var t=e.bcdiv.nativeElement.clientWidth,n=e.bcol.nativeElement.clientWidth,a=e.bcol.nativeElement.children;if(t===n){var i=document.createElement("ol"),o=1;for(i.className="n7-smart-breadcrumbs__tippy-content";t===n&&o<a.length-1;)o>1?i.appendChild(a[o]):(i.appendChild(a[o]),a[o].children[0].innerText="…"),e.tippyBuilder(a[o],i),o++,t=e.bcdiv.nativeElement.clientWidth,n=e.bcol.nativeElement.clientWidth}},this.tippyBuilder=function(e,t){document.body.appendChild(t),c(e,{content:t,interactive:!0,arrow:!0,theme:"light-border no-padding"})}}return e.prototype.onClick=function(e){this.emit&&this.emit("click",e)},e.decorators=[{type:t.Component,args:[{selector:"n7-smart-breadcrumbs",template:'<div *ngIf="data" class="n7-breadcrumbs {{ data.classes || \'\' }}" #bcdiv>\n    <nav class="n7-breadcrumbs__nav">\n        <ol class="n7-breadcrumbs__list" #bcol>\n            <li *ngFor="let item of data.items" class="n7-breadcrumbs__item {{ item.classes || \'\' }}">\n                <a class="n7-breadcrumbs__label" (click)="onClick(item.payload)">{{ item.label }}</a>\n            </li>\n        </ol>\n    </nav>\n</div>'}]}],e.propDecorators={data:[{type:t.Input}],emit:[{type:t.Input}],bcol:[{type:t.ViewChild,args:["bcol",{read:t.ElementRef,static:!1}]}],bcdiv:[{type:t.ViewChild,args:["bcdiv",{read:t.ElementRef,static:!1}]}]},e}();var St=[ze,Ue,Je,nt,rt,mt,vt,wt],It=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:St,imports:[n.CommonModule,i.DvComponentsLibModule,oe],providers:[],exports:St}]}],e}(),_t=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],providers:[],exports:[oe,It]}]}],e}();e.AbstractLayout=k,e.ApolloProvider=S,e.ApolloProviderConfig=w,e.AwAboutLayoutComponent=ze,e.AwAboutLayoutConfig=We,e.AwAboutLayoutDS=re,e.AwAboutLayoutEH=se,e.AwAutocompleteWrapperDS=ue,e.AwAutocompleteWrapperEH=De,e.AwBubbleChartDS=ce,e.AwBubbleChartEH=Ae,e.AwEntitaLayoutComponent=Ue,e.AwEntitaLayoutConfig=Ke,e.AwEntitaLayoutDS=Ve,e.AwEntitaLayoutEH=Ge,e.AwEntitaMetadataViewerDS=me,e.AwEntitaNavDS=ge,e.AwEntitaNavEH=je,e.AwHeroDS=de,e.AwHeroEH=Be,e.AwHomeAutocompleteDS=ye,e.AwHomeAutocompleteEH=Fe,e.AwHomeBubbleChartEH=Pe,e.AwHomeFacetsWrapperDS=he,e.AwHomeFacetsWrapperEH=Oe,e.AwHomeHeroPatrimonioDS=be,e.AwHomeHeroPatrimonioEH=Te,e.AwHomeItemTagsWrapperDS=fe,e.AwHomeItemTagsWrapperEH=He,e.AwHomeLayoutComponent=Je,e.AwHomeLayoutConfig=Ze,e.AwHomeLayoutDS=Qe,e.AwHomeLayoutEH=Xe,e.AwLinkedObjectsDS=le,e.AwLinkedObjectsEH=xe,e.AwPatrimonioLayoutConfig=tt,e.AwSchedaBreadcrumbsDS=Se,e.AwSchedaImageDS=_e,e.AwSchedaInnerTitleDS=Ee,e.AwSchedaLayoutComponent=nt,e.AwSchedaLayoutDS=Ye,e.AwSchedaLayoutEH=et,e.AwSchedaMetadataDS=Ie,e.AwSchedaSidebarEH=Le,e.AwSearchLayoutComponent=mt,e.AwSearchLayoutConfig=gt,e.AwSearchLayoutDS=ft,e.AwSearchLayoutEH=yt,e.AwSearchLayoutTabsDS=ke,e.AwSearchLayoutTabsEH=Re,e.AwSidebarHeaderDS=we,e.AwSidebarHeaderEH=Me,e.AwTableDS=pe,e.AwTableEH=qe,e.AwTreeDS=ve,e.AwTreeEH=$e,e.AwWorksLayoutComponent=rt,e.AwWorksLayoutConfig=ot,e.AwWorksLayoutDS=at,e.AwWorksLayoutEH=it,e.BreadcrumbsDS=$,e.BreadcrumbsEH=G,e.BubbleChartWrapperComponent=vt,e.CommunicationService=E,e.ConfigurationService=g,e.FacetInput=D,e.FacetInputCheckbox=A,e.FacetInputLink=P,e.FacetInputSelect=O,e.FacetInputText=B,e.FacetsDS=R,e.FacetsEH=K,e.FacetsWrapperComponent=ae,e.FacetsWrapperDS=q,e.FacetsWrapperEH=U,e.FooterDS=N,e.FooterEH=Q,e.HeaderDS=L,e.HeaderEH=z,e.JsonConfigService=x,e.LayoutsConfigurationService=m,e.MainLayoutComponent=J,e.MainLayoutConfig=Z,e.MainLayoutDS=C,e.MainLayoutEH=j,e.MainStateService=v,e.N7BoilerplateAriannaWebModule=It,e.N7BoilerplateCommonModule=oe,e.N7BoilerplateLibModule=_t,e.Page404LayoutComponent=ne,e.Page404LayoutConfig=te,e.Page404LayoutDS=Y,e.Page404LayoutEH=ee,e.RestProvider=_,e.RestProviderConfig=I,e.SearchModel=H,e.SearchService=F,e.SmartBreadcrumbsComponent=wt,e.SubnavDS=M,e.SubnavEH=V,e.ɵa=J,e.ɵb=k,e.ɵc=g,e.ɵd=m,e.ɵe=v,e.ɵf=ne,e.ɵg=ae,e.ɵh=E,e.ɵi=S,e.ɵj=_,e.ɵk=ze,e.ɵl=Ue,e.ɵm=E,e.ɵn=v,e.ɵo=Je,e.ɵp=nt,e.ɵq=rt,e.ɵr=mt,e.ɵs=g,e.ɵt=m,e.ɵu=F,e.ɵv=vt,e.ɵw=wt,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=n7-frontend-boilerplate.umd.min.js.map