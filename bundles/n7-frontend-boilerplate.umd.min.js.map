{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://@n7-frontend/boilerplate/lib/common/services/configuration.service.ts","ng://@n7-frontend/boilerplate/lib/common/services/layouts-configuration.service.ts","ng://@n7-frontend/boilerplate/lib/common/services/main-state.service.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/apollo/config.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/apollo/apollo.provider.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/rest/config.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/rest/rest.provider.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication.service.ts","ng://@n7-frontend/boilerplate/lib/common/models/abstract-layout.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/common/services/json-config.service.ts","ng://@n7-frontend/boilerplate/lib/common/models/facet-inputs/facet-input.ts","ng://@n7-frontend/boilerplate/lib/common/models/facet-inputs/facet-input-checkbox.ts","ng://@n7-frontend/boilerplate/lib/common/models/facet-inputs/facet-input-text.ts","ng://@n7-frontend/boilerplate/lib/common/models/facet-inputs/facet-input-link.ts","ng://@n7-frontend/boilerplate/lib/common/models/facet-inputs/facet-input-select.ts","ng://@n7-frontend/boilerplate/lib/common/services/search.service.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/header.ds.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/subnav.ds.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/breadcrumbs.ds.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/facets.ds.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/facets-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/footer.ds.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/header.eh.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/subnav.eh.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/breadcrumbs.eh.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/facets.eh.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/facets-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/footer.eh.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.config.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.config.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.ts","ng://@n7-frontend/boilerplate/lib/common/components/facets-wrapper/facets-wrapper.ts","ng://@n7-frontend/boilerplate/lib/common/n7-boilerplate-common.module.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/common/helpers.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/linked-objects.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/autocomplete-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/bubble-chart.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/hero.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/table.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-hero-patrimonio.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-facets-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-item-tags-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-autocomplete.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/entita-nav.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/entita-metadata-viewer.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/tree.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/sidebar-header.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/scheda-breadcrumbs.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/scheda-metadata.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/scheda-image.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/scheda-inner-title.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/search-layout-tabs.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/linked-objects.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/autocomplete-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/bubble-chart.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/hero.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-bubble-chart.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-facets-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-hero-patrimonio.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-item-tags-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-autocomplete.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/entita-nav.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/scheda-breadcrumbs.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/sidebar-header.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/tree.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/search-layout-tabs.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/table.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/entita-layout/entita-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/entita-layout/entita-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/entita-layout/entita-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/entita-layout/entita-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/scheda-layout/scheda-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/scheda-layout/scheda-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/scheda-layout/scheda-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/scheda-layout/scheda-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/search-layout/search-facets.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/search-layout/search-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/search-layout/search-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/search-layout/search-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/search-layout/search-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/components/bubble-chart-wrapper/bubble-chart-wrapper.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/components/smart-breadcrumbs/smart-breadcrumbs.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/n7-boilerplate-arianna-web.module.ts","ng://@n7-frontend/boilerplate/lib/data-viz/components/data-widget-wrapper/data-widget-wrapper.ts","ng://@n7-frontend/boilerplate/lib/data-viz/layout/example-layout/example-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/data-viz/layout/example-layout/example-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/data-viz/data-sources/data-widget-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/data-viz/data-sources/graph.ds.ts","ng://@n7-frontend/boilerplate/lib/data-viz/data-sources/inner-title.ds.ts","ng://@n7-frontend/boilerplate/lib/data-viz/data-sources/widget.ds.ts","ng://@n7-frontend/boilerplate/lib/data-viz/event-handlers/data-widget-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/data-viz/layout/example-layout/example-layout.config.ts","ng://@n7-frontend/boilerplate/lib/data-viz/layout/example-layout/example-layout.ts","ng://@n7-frontend/boilerplate/lib/data-viz/n7-boilerplate-data-viz.module.ts","ng://@n7-frontend/boilerplate/lib/n7-boilerplate-lib.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__read","o","m","Symbol","iterator","r","e","ar","next","done","push","value","error","__spread","concat","ConfigurationService","config","_this","defaults","get","key","set","global","keys","forEach","Injectable","args","providedIn","Inject","LayoutsConfigurationService","layouts","MainStateService","custom","default","headTitle","ReplaySubject","pageTitle","subnav","breadcrumbs","filters","get$","_get","getCustom$","update","newValue","_update","updateCustom","has","hasCustom","addCustom","stream$","Error","type","ApolloProviderConfig","getLastPosts","queryName","queryBody","getTree","globalFilter","getEntityDetails","getItem","getNode","autoComplete","search","ApolloProvider","http","providerConfig","providers","apollo","err","request$","requestId","options","params","method","httpOptions","query","paramsStr","makeParamsStr","replace","baseUrl","post","pipe","map","response","data","isArray","arrStr_1","val","subParamsStr","join","indexOf","HttpClient","RestProviderConfig","RestProvider","rest","_a","urlParams","point","defaultMethod","toLowerCase","CommunicationService","communicationConfig","defaultProvider","provider","onError","catchError","handleError","console","warn","empty","AbstractLayout","widgets","lb","LayoutBuilder","layoutId","initPayload","onInit","ready$","subscribe","eventHandler","emitInner","init","widgetsConfig","widgetsDataSources","widgetsEventHandlers","dataSource","layoutDS","layoutEH","onDestroy","MainLayoutDS","tslib_1.__extends","configuration","mainState","router","titleService","route","Subject","one","items","setTitle","selected","onNavigate","payload","handler","path","queryParams","navigate","relativeTo","queryParamsHandling","_onRouterNavigate","tippy","hideAll","LayoutDataSource","JsonConfigService","load","of","tap","_handleResponse","toPromise","headTag","document","querySelector","styleElement","createElement","styles_1","configKey","color","hex","unshift","appendChild","createTextNode","FacetInput","output","transform","getId","id","getData","getConfig","getFacetId","facetId","getInputIndex","inputIndex","getSectionIndex","sectionIndex","getContext","filterConfig","context","getTarget","target","getSearchIn","searchIn","getType","getOutput","setData","newData","_setId","index","FacetInputCheckbox","label","source","_meta","setActive","facetValue","checked","FacetInputText","disabled","placeholder","icon","inputPayload","trigger","enterPayload","iconPayload","FacetInputLink","counter","hidden","classes","_isActive","text","split","filter","className","FacetInputSelect","option","INPUTS_MAP","checkbox","link","select","FILTERS_MAP","=",">","<",">=","<=","<>","LIKE","SearchModel","_filters","_facets","_inputs","_results$","_id","getFilters","getFacets","getInputs","_config","getTotalCount","_totalCount","getFields","fields","getResults$","setResults","results","_setFilters","_setFacets","_setPage","_setInputs","_setInputsData","_setTotalCount","updateFilter","remove","getFiltersByFacetId","item","updateFiltersFromQueryParams","selectedFilters","updateInputsFromFilters","getInputByFacetId","updateFacets","facets","updateFacet","updateTotalCount","totalCount","selectedFacets","facet","reset","getRequestParams","_getRequestFacets","page","_page","getInternalFilters","filtersAsQueryParams","input","setInputData","filterTarget","inputs","targetInput","facetData","f","searchIns","_filterData","setSearchConfigOrderBy","orderBy","order","setSearchConfigDirection","direction","setPageConfigOffset","offset","setPageConfigLimit","limit","_b","operator","refValue","searchData","searchDataKey_1","dataKey","dataValue","_filterDataEquals","inArray_1","rv","_filterDataGreaterThan","_filterDataLessThan","_filterDataGreaterOrEquals","_filterDataLessOrEquals","_filterDataNotEqual","_filterDataLike","haystack","needle","toLocaleLowerCase","field","sectionConfig","inputConfig","inputModel","facetConfig","hasStaticData","dataItem","SearchService","_models","add","model","MainLayoutEH","_super","destroyed$","listen","innerEvents$","_listenRouterChanges","EventHandler","globalEvents$","takeUntil","emitGlobal","HeaderDS","selectNavItem","selectedItem","nav","DataSource","SubnavDS","isActive","getActive","BreadcrumbsDS","FacetsDS","searchModel","FacetsWrapperDS","groups","fieldConfig","fieldIndex","groupId","header","_headerConfig","sections","_getSectionClasses","isOpen","toggleGroup","eventPayload","group","iconRight","onFacetChange","filterValue","updateFilteredTarget","section","inputOutput","updateInputLinks","linksFacetIds","FooterDS","HeaderEH","SubnavEH","BreadcrumbsEH","FacetsEH","FacetsWrapperEH","_facetsChanged","internalFacetsChange$","requestParams","queryParams_1","emitOuter","debounceTime","FooterEH","MainLayoutConfig","DS","EH","MainLayoutComponent","layoutsConfiguration","ngOnInit","ngOnDestroy","Component","selector","template","Router","ActivatedRoute","Title","Page404LayoutDS","Page404LayoutEH","Page404LayoutConfig","Page404LayoutComponent","FacetsWrapperComponent","headerEmit","eventType","emit","facetEmit","Input","COMPONENTS","N7BoilerplateCommonModule","forRoot","ngModule","provide","useValue","NgModule","declarations","imports","CommonModule","HttpClientModule","DvComponentsLibModule","exports","AwAboutLayoutDS","AwAboutLayoutEH","helpers","prettifySnakeCase","word","ucFirst","str","charAt","toUpperCase","slice","AwLinkedObjectsDS","loadingData","checkForMore","force","loadedData","actions","result","totalObjects","handleIncomingData","incomingData","currentPage","unpackData","itemsPagination","isLoading","addPagination","totalPages","size","pagination","first","prev","last","links","makePagination","paths","paginationLimit","lastPage","firstPage","Math","floor","String","pageSize","labels","dynamicPagination","relatedItems","lengthLimit","resultsLimit","el","image","title","maxLength","includes","metadata","info","selection","toe","relatedTypesOfEntity","count","crumb","previews","total","ceil","loaderData","AwAutocompleteWrapperDS","regex","RegExp","suggestion","entity","match","prefix","suffix","exec","AwBubbleChartDS","thresholdShowTitle","thresholdShowValue","allBubbles","entityBubbleIdMap","selectedBubbles","bubblePopup","currentHoverEntity","_bubbleChart","maxBubblesSelectable","windowResizeSet","maxBubbleRadius","minBubbleRadius","maxBubbleTextRadiusRatio","destroyTooltip","bubbles","filterBubblesBasedOnFacetsEnabled","bubbleCointainer","getElementById","containerId","cWidth","width","offsetWidth","containerSize","bubblesData","bubbleContainerId","containerWidth","containerHeight","isForceSimulationEnabled","maxBubblesSelected","maxBubbleCount","minBubbleCount","numOfBubbles","bubble","numOfSelectedBubbles","bId","bubbleAverage","bubblePercentage","coeff","bubbleRadius","log","sqrt","texts","spaceIndex","label1_1","label2_1","radius","x_function","x","y_function","mNum","y","user_select","fontSize_function","bubbleData","cHeight","hasCloseIcon","xPull","xPullStrength","yPull","yPullStrength","collisionStrengh","collisionIterations","velocityDecay","setUpdateReference","setBubbleChart","setWindowResize","setAllBubblesFromApolloQuery","entitiesData","configKeys","typeOfEntity","relatedEntities","convertEntityIdToBubbleId","entityId","enabled","maxNumber","onBubbleMouseEnter","bubbleId","hoverEntityId","hide","destroy","setTimeout","templateClone","cloneNode","display","content","allowHTML","interactive","arrow","theme","placement","maxWidth","show","onBubbleTooltipClick","bubbleId_1","bubble_1","selectAll","each","onBubbleSelected","getBubbleFromId","getSelectedBubbles","getAllBubbles","getEntityIdMap","fromEvent","window","debounce","interval","container","offsetParent","bubblePayload","AwHeroDS","button","backgroundImage","AwTableDS","TABLE_MOCK","AwHomeHeroPatrimonioDS","AwHomeFacetsWrapperDS","tippyMaker","res","undefined","open","ac_1","contentNode","getElementsByClassName","setAttribute","flip","appendTo","ac","lockedFacets","headers","locked","headerClasses","iconClasses","iconLeft","additionalText","every","widgetData","h","AwHomeItemTagsWrapperDS","AwHomeAutocompleteDS","itemIds","groupConfig","mainMetadata","currentItem","metadata_1","showMore","fallback","AwEntitaNavDS","param","navigation","extraTab","wikiTab","AwEntitaMetadataViewerDS","unpackedData","unpackFields","extracted","thisField","temp","AwTreeDS","icons","updateTree","parents","tree","updateTreeData","it","selectTreeItem","toggleSidebar","sidebarData","parseData","treeObj","parseTree","toggle","currParents","treeItem","showToggle","AwSidebarHeaderDS","AwSchedaBreadcrumbsDS","AwSchedaMetadataDS","AwSchedaImageDS","AwSchedaInnerTitleDS","AwSearchLayoutTabsDS","setSelected","tabId","AwLinkedObjectsEH","handleScroll","scrollTop","clientHeight","scrollHeight","startsWith","targetPage","Number","outerEvents$","AwAutocompleteWrapperEH","AwBubbleChartEH","event","entityIdmap","currBubble","selectData","reload","AwHeroEH","AwHomeBubbleChartEH","AwHomeFacetsWrapperEH","AwHomeHeroPatrimonioEH","AwHomeItemTagsWrapperEH","AwHomeAutocompleteEH","AwEntitaNavEH","AwSchedaSidebarEH","AwSidebarHeaderEH","AwTreeEH","AwSearchLayoutTabsEH","AwTableEH","AwAboutLayoutConfig","layoutOptions","AwAboutLayoutComponent","AwEntitaLayoutDS","myResponse","navHeader","bubblesSize","updateComponent","updateOptions","handlePageNavigation","selectedTab","location","go","entitaBasePath","currentId","handleNavUpdate","tab","updateWidgets","updateBubbes","communication","bubbleLoaded","bubblesEnabled","getNavigation","entitiesListSize","loadItem","loadContent","AwEntitaLayoutEH","snapshot","listenRoute","schedaBasePath","forceReload","paramMap","connectedEntities","AwEntitaLayoutConfig","AwEntitaLayoutComponent","Location","AwHomeLayoutDS","lockLastFacet","facetInputs","autocompletePopoverOpen","autocompleteChanged$","numOfItemsStr","lastWindowWidth","hasScrollBackground","loadingBubbles","selectedEntitiesIds","outerWidth","_listenAutoCompleteChanges","outerLinks","outerLinksTitle","makeRequest$","initialFilterRequest","parseInitialRequest","typeOfEntityData","teoConfigData","renderPreviewsFromApolloQuery","numOfItems","numOfThousand","numOfItemsTmpStr","scrollTo","onBubbleDeselected","filterRequest","getBubblePayload","bubbleCref","k_1","activeBubbles_1","places","people","concepts","organizations","sB","obj","c","find","updateBubbles","onlyBubbles","updateBubbleFilter","updateTags","renderItemTags","handleFacetSearchChange","change","handleFacetSearchEnter","enter","handleFacetHeaderClick","enabledFacets","disableFacetsIds_1","fD","filteredSelectedBubbles","tagsData","sBubble","onTagClicked","onHeroChange","_scrollBackgroundControl","source$","_setHasScrollBackground","homeAutocompleteQuery","_toggleAutocompletePopover","autocompletePopover","style","onHidden","AwHomeLayoutEH","handleSimpleAutocompleteClick","thebubble","loadFilters","params_1","totalcount","entities","dataSource_1","basePath","searchBasePath","outerLinkClick","AwHomeLayoutConfig","AwHomeLayoutComponent","AwSchedaLayoutDS","sidebarCollapsed","bubbleChartSectionTitle","similarItemsSectionTitle","metadataSectionTitle","hasSimilarItems","treeId","updateNavigation","maxSimilarItems","contentParts","images_1","url","buildPyramid","imageViewerIstance","viewerId","_setViewer","viewer","titleObj","main","tools","subTitle","hasMetadata","breadcrumbs_1","breadcrumb","element","collapseSidebar","innerWidth","hasBubbles","AwSchedaLayoutEH","paramId","loadNavigation","AwPatrimonioLayoutConfig","AwSchedaLayoutComponent","AwWorksLayoutDS","AwWorksLayoutEH","AwWorksLayoutConfig","AwWorksLayoutComponent","facetsConfig","delay","minChars","highlight","SEARCH_MODEL_ID","AwSearchLayoutDS","orderByLabel","orderByOptions","getSearchModelId","prettifyLabels","doSearchRequest$","onOrderByChange","onPaginationChange","_updateSearchPage","onPaginationGoToChange","onResultsLimitChange","requestPayload","searchParameters","resultsTitleIndex","resultsTitle","_addFacetsLabels","_addFacetsOptions","_normalizeItems","newOffset","singleItem","AwSearchLayoutEH","facetsChange$","_listenToFacetsChange","changed","AwSearchLayoutConfig","AwSearchLayoutComponent","BubbleChartWrapperComponent","onClick","onMouseOut","SmartBreadcrumbsComponent","ngAfterViewInit","parentWidth","bcdiv","nativeElement","clientWidth","childWidth","bcol","liArray","children","tippyData","innerText","tippyBuilder","node","body","ViewChild","read","ElementRef","static","N7BoilerplateAriannaWebModule","DataWidgetWrapperComponent","DvExampleLayoutDS","DvExampleLayoutEH","DvDataWidgetDS","DvGraphDS","libOptions","chart","height","toolbar","dataLabels","colors","fill","gradient","opacityFrom","opacityTo","stroke","curve","series","name","grid","borderColor","strokeDashArray","xaxis","lines","markers","hover","axisBorder","tickAmount","yaxis","showAlways","opposite","reversed","logarithmic","forceNiceScale","floating","minWidth","offsetX","offsetY","rotate","padding","fontSize","cssClass","axisTicks","tooltip","crosshairs","position","dashArray","legend","annotations","points","DvInnerTitleDS","secondary","DvWidgetDS","DATA_WIDGET_MOCK","DvDataWidgetEH","DvExampleLayoutConfig","DvExampleLayoutComponent","N7BoilerplateDataVizModule","N7BoilerplateLibModule"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigurationService {\n  private defaults: any = {};\n\n  constructor(@Inject('config') private config: any){\n    if(this.config.global){\n      Object.keys(this.config.global).forEach(key => {\n        this.set(key, this.config.global[key]);\n      });\n    }\n  }\n\n  public get = (key) => this.defaults[key];\n  public set = (key, value) => this.defaults[key] = value;\n}","import { Injectable, Inject } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LayoutsConfigurationService {\n  private defaults: any = {};\n\n  constructor(@Inject('config') private config: any){\n    if(this.config.layouts){\n      Object.keys(this.config.layouts).forEach(key => {\n        this.set(key, this.config.layouts[key]);\n      });\n    }\n  }\n\n  public get = (key) => this.defaults[key];\n  public set = (key, value) => this.defaults[key] = value;\n}","import { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MainStateService {\n  // custom streams\n  private custom: any = {};\n  \n  // default streams\n  private default: {\n    headTitle: ReplaySubject<any>,\n    pageTitle: ReplaySubject<any>,\n    subnav: ReplaySubject<any>,\n    breadcrumbs: ReplaySubject<any>,\n    filters: ReplaySubject<any>,\n  } = {\n    headTitle: new ReplaySubject(),\n    pageTitle: new ReplaySubject(),\n    subnav: new ReplaySubject(),\n    breadcrumbs: new ReplaySubject(),\n    filters: new ReplaySubject(),\n  };\n\n  public get$ = (key: string) => this._get('default', key);\n  public getCustom$ = (key: string) => this._get('custom', key);\n\n  public update = (key: string, newValue: any) => this._update('default', key, newValue);\n  public updateCustom = (key: string, newValue: any) => this._update('custom', key, newValue);\n\n  public has = (key: string) => !!this.default[key];\n  public hasCustom = (key: string) => !!this.custom[key];\n\n  public addCustom(key: string, stream$: ReplaySubject<any>){\n    if(this.custom[key]) throw Error(`custom stream ${key} exists!`);\n\n    this.custom[key] = stream$;\n  }\n\n  private _update(type: string, key: string, newValue: any){\n    if(!this[type]) throw Error(`${type} stream group does not exists!`);\n    if(!this[type][key]) throw Error(`${type} stream ${key} does not exists!`);\n    \n    this[type][key].next(newValue);\n  }\n\n  private _get(type: string, key: string){\n    if(!this[type]) throw Error(`${type} stream group does not exists!`);\n    if(!this[type][key]) throw Error(`${type} stream ${key} does not exists!`);\n    \n    return this[type][key];\n  }\n\n}","export const ApolloProviderConfig = {\n  'getLastPosts': {\n    queryName: 'getLastPosts',\n    queryBody: `\n      {\n        getLastPosts(__PARAMS__) {\n          id\n          title\n        }\n      }\n    `\n  },\n  'getTree': {\n    queryName: 'getTreeOfItems',\n    queryBody: `\n    {\n      getTreeOfItems{\n        id\n        label\n        icon\n        branches {\n          label\n          id\n          img\n          branches {\n            label\n            id\n            icon\n            img\n            branches {\n              label\n              id\n              icon\n              img\n              branches {\n                label\n                id\n                icon\n                img\n                branches {\n                  label\n                  id\n                  icon\n                  img\n                  branches {\n                    label\n                    id\n                    icon\n                    img\n                    branches {\n                      label\n                      id\n                      icon\n                      img\n                      branches {\n                        label\n                        id\n                        icon\n                        img\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    `\n  },\n  'globalFilter': {\n    queryName: 'globalFilter',\n    queryBody: `{\n      globalFilter(__PARAMS__){\n        entitiesData {\n          entity {\n              id\n              label\n              typeOfEntity\n          } count\n        }\n        typeOfEntityData {\n          type\n          count\n        }\n        itemsPagination {\n          totalCount\n          items {\n            thumbnail\n            item {\n              id\n              label\n              fields\n              {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n              }\n              breadcrumbs {\n                label\n                link\n              }\n            }\n            relatedTypesOfEntity {\n              type\n              count\n            }\n          }\n        }\n      }\n      }`\n  },\n  'getEntityDetails': {\n    queryName: 'getEntity',\n    queryBody: `{\n      getEntity(__PARAMS__){\n        overviewTab\n        label\n        id\n        typeOfEntity\n        fields {\n          ...\n          on KeyValueField {\n            key\n            value\n          }\n          ... on\n          KeyValueFieldGroup {\n            label\n            fields\n            {\n              ...\n              on KeyValueField {\n                key\n                value\n              }\n            }\n          }\n        }\n        extraTab\n        wikiTab {\n          text\n          url\n        }\n        relatedItems {\n          thumbnail\n          item {\n            label\n            id\n            fields\n            {\n              ...\n              on KeyValueField {\n                key\n                value\n              }\n            }\n            breadcrumbs {\n              label\n              link\n            }\n          }\n          relatedTypesOfEntity {\n            type\n            count\n          }\n        }\n        relatedEntities {\n          entity {\n              id\n              label\n              typeOfEntity\n          }\n          count\n        }\n      }\n    }\n    `\n  },\n  'getItem': {\n    queryName: 'getItem',\n    queryBody: `{\n      getItem(__PARAMS__) {\n        id\n        label\n        icon\n        title\n        subTitle\n        image\n        text\n        fields {\n          ...\n          on KeyValueField {\n            key\n            value\n          }\n          ... on KeyValueFieldGroup {\n            label\n            fields {\n              ...\n              on KeyValueField {\n                key\n                value\n              }\n            }\n          }\n          }\n          relatedEntities {\n            count\n            entity{\n              id\n              label\n              typeOfEntity\n            }\n          }\n          relatedItems {\n            thumbnail\n            item {\n              label\n              id\n          }\n          relatedTypesOfEntity {\n            type\n            count\n          }\n        }\n        breadcrumbs {\n          label\n          link\n        }\n      }\n    }`\n  },\n  'getNode': {\n    queryName: 'getNode',\n    queryBody: `{\n      getNode(__PARAMS__) {\n        ... on Item {\n          id\n          label\n          icon\n          title\n          subTitle\n          image\n          text\n          fields {\n            ...\n            on KeyValueField {\n              key\n              value\n            }\n            ... on KeyValueFieldGroup {\n              label\n              fields {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n              }\n            }\n          }\n          relatedEntities {\n              count\n              entity{\n                id\n                label\n                typeOfEntity\n              }\n          }\n          relatedItems {\n              thumbnail\n              item {\n                label\n                id\n            }\n            relatedTypesOfEntity {\n              type\n              count\n            }\n          }\n          breadcrumbs {\n            label\n            link\n          }\n        }\n        ... on Node {\n          id\n          label\n          img\n          fields {\n            ...\n            on KeyValueField {\n              key\n              value\n            }\n            ... on KeyValueFieldGroup {\n              label\n              fields {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n              }\n            }\n          }\n        }\n      }\n    }`\n  },\n  'autoComplete': {\n    queryName: 'autoComplete',\n    queryBody: `{\n      autoComplete(__PARAMS__){\n        totalCount\n        results {\n          ... on EntityCountData {\n            count\n            entity {\n              id\n              label\n              typeOfEntity\n              fields {\n                ... on KeyValueField {\n                  key\n                  value\n                }\n                ... on KeyValueFieldGroup {\n                  label\n                  fields {\n                    ... on KeyValueField {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n            }\n          }\n          ... on ItemListing {\n            item {\n              id\n              label\n              fields {\n                ... on KeyValueField {\n                  key\n                  value\n                }\n                ... on KeyValueFieldGroup {\n                  label\n                  fields {\n                    ... on KeyValueField {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }`\n  },\n  'search': {\n    queryName: 'search',\n    queryBody: `{\n      search(__PARAMS__){\n        totalCount\n        facets {\n          id\n          type\n          operator\n          limit\n          order\n          data {\n            label\n            value\n            counter\n            searchData {\n              key\n              value\n            }\n          }\n        }\n        results {\n          order{\n            type\n            key\n            direction\n          }\n          fields\n          {\n            id\n            highlight\n            limit\n          }\n          items {\n            ... on Entity {\n              id\n              label\n              typeOfEntity\n              fields {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n                ... on\n                KeyValueFieldGroup {\n                  label\n                  fields\n                  {\n                    ...\n                    on KeyValueField {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n            }\n            ... on Item {\n              id\n              label\n              icon\n              title\n              subTitle\n              image\n              text\n              fields {\n                ...\n                on KeyValueField {\n                  key\n                  value\n                }\n                ... on KeyValueFieldGroup {\n                  label\n                  fields {\n                    ...\n                    on KeyValueField {\n                      key\n                      value\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }`\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ApolloProviderConfig } from './config';\nimport { ConfigurationService } from '../../configuration.service';\nimport { ICommunicationProvider } from '../communication-provider.interface';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApolloProvider implements ICommunicationProvider {\n  private providerConfig: any;\n\n  constructor(private config: ConfigurationService, private http: HttpClient) {\n    try {\n      this.providerConfig = this.config.get('communication').providers.apollo;\n    } catch (err) {\n      throw Error('No config found for apollo provider!');\n    }\n  }\n\n  request$(requestId, options) {\n    const { params, method, httpOptions } = options;\n    let query = ApolloProviderConfig[requestId];\n\n    if (this.providerConfig.config && this.providerConfig.config[requestId]) {\n      query = this.providerConfig.config[requestId];\n    }\n\n    query = query || {};\n    const { queryName } = query;\n    let { queryBody } = query;\n\n    // config query control\n    if (!queryName || !queryBody) {\n      throw Error(`No config found for requestId '${requestId}'`);\n    }\n\n    if (params) {\n      const paramsStr = this.makeParamsStr(params);\n      queryBody = queryBody.replace('__PARAMS__', paramsStr);\n    } else {\n      queryBody = queryBody.replace('(__PARAMS__)', '');\n    }\n\n    let source$: Observable<any>;\n\n    if (method && method === 'GET') {\n      source$ = this.http.get(this.providerConfig.baseUrl);\n    } else {\n      source$ = this.http.post(\n        this.providerConfig.baseUrl,\n        { query: queryBody },\n        httpOptions\n      );\n    }\n\n    return source$.pipe(map((response: any) => response.data[queryName]));\n  }\n\n  private makeParamsStr(params) {\n    const paramsStr = [];\n    Object.keys(params).forEach(key => {\n      if (Array.isArray(params[key])) {\n        const arrStr = [];\n        params[key].forEach(val => {\n          if (typeof val === 'object') {\n            const subParamsStr = this.makeParamsStr(val);\n            arrStr.push(`{ ${subParamsStr} }`);\n          } else {\n            if (typeof val === 'number' || typeof val === 'boolean' || val === null) {\n              arrStr.push(`${val}`);\n            } else {\n              arrStr.push(`\"${val}\"`);\n            }\n          }\n        });\n        paramsStr.push(`${key}: [${arrStr.join(',')}]`);\n      } else if (typeof params[key] === 'object' && params[key]) {\n        const subParamsStr = this.makeParamsStr(params[key]);\n        paramsStr.push(`${key}: { ${subParamsStr} }`);\n      } else if (typeof params[key] === 'string' && key.indexOf('$') === 0) {\n        paramsStr.push(`${key.replace('$', '')}: ${params[key]}`);\n      } else {\n        if (typeof params[key] === 'number' || typeof params[key] === 'boolean' || params[key] === null) {\n          paramsStr.push(`${key}: ${params[key]}`);\n        } else {\n          paramsStr.push(`${key}: \"${params[key]}\"`);\n        }\n      }\n    });\n    return paramsStr.join(' ');\n  }\n}\n","export const RestProviderConfig = {\n  'getLastPosts': 'posts', \n};","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http'\nimport { RestProviderConfig } from './config';\nimport { ConfigurationService } from '../../configuration.service';\nimport { ICommunicationProvider } from '../communication-provider.interface';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RestProvider implements ICommunicationProvider {\n  private providerConfig: any;\n\n  constructor(\n    private config: ConfigurationService,\n    private http: HttpClient,\n  ) {\n    try {\n      this.providerConfig = this.config.get('communication').providers.rest;\n    } catch (err) {\n      throw Error('No config found for rest provider!');\n    }\n  }\n\n  request$(requestId, options: any = {}) {\n    let { params, method, httpOptions, urlParams = '' } = options;\n    let point = RestProviderConfig[requestId];\n\n    // default method\n    if (!method) { method = this.providerConfig.defaultMethod || 'GET'; }\n\n    if (this.providerConfig.config && this.providerConfig.config[requestId]) {\n      point = this.providerConfig.config[requestId];\n    }\n\n    // config point control\n    if (!point) {\n        throw Error(`No config found for requestId \"${requestId}\"`);\n    }\n    if (method === 'POST' || method === 'PUT') {\n      return this.http[method.toLowerCase()](this.providerConfig.baseUrl + point, params, httpOptions);\n    } else if (method === 'GET' || method === 'DELETE') {\n      return this.http[method.toLowerCase()](this.providerConfig.baseUrl + point + urlParams, httpOptions);\n    } else {\n        throw Error(`Rest method ${method} not supported`);\n    }\n\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationService } from './configuration.service';\nimport { ApolloProvider } from './communication-providers/apollo/apollo.provider';\nimport { RestProvider } from './communication-providers/rest/rest.provider';\nimport { catchError } from 'rxjs/operators';\nimport { Observable, empty } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CommunicationService {\n  private defaultProvider: string;\n  private communicationConfig: any;\n\n  constructor(\n    private config: ConfigurationService,\n    private apollo: ApolloProvider,\n    private rest: RestProvider,\n  ){\n    try {\n      this.communicationConfig = this.config.get('communication');\n      this.defaultProvider = this.communicationConfig.defaultProvider;\n    } catch(err) {\n      throw Error('No communications.defaultProvider setted in config');\n    }\n  }\n\n  request$(requestId, options: any = {}, provider?){\n    provider = provider || this.defaultProvider;\n    if(!this[provider]) throw Error(`There is no ${provider} provider`);\n\n    const { onError } = options;\n    return this[provider].request$(requestId, options)\n      .pipe(\n        catchError((error) => this.handleError(error, onError))\n      );\n  }\n\n  handleError(error, onError): Observable<any> {\n    if(onError){\n      onError(error);\n    } else {\n      console.warn('No error handler for communication request', error);\n    }\n\n    return empty();\n  }\n}","import { LayoutBuilder } from '@n7-frontend/core';\n\nexport abstract class AbstractLayout {\n  protected config: any;\n  protected widgets: any[]; \n  public lb: any;\n  \n  constructor(config: any){\n    this.config = config;\n    this.widgets = this.config.widgets; \n    this.lb = new LayoutBuilder(this.config.layoutId);\n  }\n\n  protected initPayload(): any {};\n\n  protected onInit(){\n    // on ready\n    this.lb.ready$.subscribe(() => {\n      this.lb.eventHandler.emitInner('init', this.initPayload());\n    });\n\n    this.lb.init({\n      widgetsConfig: this.widgets,\n      widgetsDataSources: this.config.widgetsDataSources,\n      widgetsEventHandlers: this.config.widgetsEventHandlers,\n      dataSource: new this.config.layoutDS(),\n      eventHandler: new this.config.layoutEH(),\n    });\n  }\n\n  protected onDestroy(){\n    this.lb.eventHandler.emitInner('destroy');\n  }\n}","import { LayoutDataSource } from '@n7-frontend/core';\nimport tippy from 'tippy.js';\nimport { Subject } from 'rxjs';\n\nexport class MainLayoutDS extends LayoutDataSource {\n  protected configuration: any;\n  protected mainState: any;\n  protected router: any;\n  protected route: any;\n  protected titleService: any;\n\n  public options: any;\n  public pageTitle: string;\n\n  onInit({ configuration, mainState, router, options, titleService, route }) {\n    this.configuration = configuration;\n    this.mainState = mainState;\n    this.router = router;\n    this.route = route;\n    this.titleService = titleService;\n    this.options = options;\n    this.mainState.addCustom('currentNav', new Subject());\n\n    // update header\n    if (this.configuration.get('header')) {\n      this.one('header').update({ 'items': this.configuration.get('header') });\n    }\n\n    if (this.configuration.get('footer')) {\n      this.one('footer').update({ 'items': this.configuration.get('footer') });\n    }\n\n    // main state updates\n    this.mainState.get$('headTitle').subscribe(val => this.titleService.setTitle(val));\n    this.mainState.get$('pageTitle').subscribe(val => this.pageTitle = val);\n    this.mainState.get$('subnav').subscribe(val => this.one('subnav').update(val));\n    this.mainState.get$('breadcrumbs').subscribe(val => this.one('breadcrumbs').update(val));\n\n    this.mainState.getCustom$('currentNav').subscribe(val => this.one('header').update({ \"items\": this.configuration.get('header'), 'selected': val }));\n\n    // mainState test\n    /* this.mainState.addCustom('customNav', new Subject());\n    this.mainState.get$('pageTitle').subscribe(val => console.log('pageTitle', val));\n    this.mainState.getCustom$('customNav').subscribe(val => console.log('customNav', val));\n\n    this.mainState.update('pageTitle', 'hola');\n    this.mainState.updateCustom('customNav', {'hello': 'mundo!'});\n\n    setTimeout(() => {\n      this.mainState.update('pageTitle', 'chao');\n      this.mainState.updateCustom('customNav', {'hello': 'world!'});\n      console.log('has', {\n        'pageSubTitle' : this.mainState.has('pageSubTitle'),\n        'customNav' : this.mainState.hasCustom('customNav'),\n        'customNavs' : this.mainState.has('customNavs'),\n      });\n    }, 5000); */\n  }\n\n  onNavigate(payload) {\n    // router navigation\n    if (payload.handler === 'router') {\n      const { path, queryParams } = payload;\n\n      // path control\n      if (!path) throw Error('onNavigate: no path for router navigate');\n\n      if (queryParams) {\n        this.router.navigate(path, {\n          relativeTo: this.route,\n          queryParams: queryParams,\n          queryParamsHandling: 'merge'\n        });\n      } else {\n        this.router.navigate(path);\n      }\n\n      // on change\n      this._onRouterNavigate();\n    }\n  }\n\n  private _onRouterNavigate() {\n    // hide tippy\n    tippy.hideAll();\n  }\n}","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { tap, catchError } from 'rxjs/operators';\nimport { ConfigurationService } from './configuration.service';\nimport { of } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class JsonConfigService {\n  constructor(\n    private http: HttpClient,\n    private config: ConfigurationService,\n  ){}\n\n  load(path): Promise<any> {\n    return this.http.get(path).pipe(\n      catchError((error) => of({})),\n      tap(response => this._handleResponse(response))\n    ).toPromise();\n  }\n\n  private _handleResponse(response){\n    if(response){\n      Object.keys(response).forEach(key => this.config.set(key, response[key]));\n\n      // config keys colors\n      if(response['config-keys']){\n        const headTag = document.querySelector('head'),\n          styleElement = document.createElement('style');\n\n        let styles = [];\n\n        Object.keys(response['config-keys']).forEach(key => {\n          const configKey = response['config-keys'][key] || {};\n          \n          if(configKey.color && configKey.color.hex){\n            // add css class\n            styles.push(`--color-${key}: ${configKey.color.hex};`);\n          }\n        });\n\n        if(styles.length){\n          styles.unshift(':root {');\n          styles.push('}');\n          styleElement.appendChild(document.createTextNode(styles.join('\\n')));\n          headTag.appendChild(styleElement);\n        }\n\n      }\n    }\n  }\n}","interface IFacetInputData {\n  value: string | number;\n  label: string;\n  counter: number;\n  hidden?: boolean;\n  options?: any;\n}\n\nexport abstract class FacetInput {\n  static index: number = 0;\n\n  private id: string;\n  protected config: any;\n  protected output: any;\n  protected data: IFacetInputData[];\n\n  constructor(config){\n    this.config = config;\n    this._setId();\n    \n    FacetInput.index++;\n  }\n\n  public abstract setActive(facetValue: any): void;\n  protected abstract transform(): any;\n  \n  public update = () => this.output = this.transform();\n  public getId = () => this.id;\n  public getData = () => this.data;\n  public getConfig = () => this.config;\n  public getFacetId = () => this.config.facetId;\n  public getInputIndex = () => this.config.inputIndex;\n  public getSectionIndex = () => this.config.sectionIndex;\n  public getContext = () => this.config.filterConfig.context || 'external';\n  public getTarget = () => this.config.filterConfig.target || null;\n  public getSearchIn = () => this.config.filterConfig.searchIn || null;\n  public getType = () => this.config.type;\n  public getOutput = () => this.output;\n  \n  public setData = (newData: IFacetInputData[]) => this.data = newData;\n  private _setId() {\n    this.id = `facet-input-${this.getType()}-${FacetInput.index}`;\n  };\n}","import { FacetInput } from './facet-input';\n\nexport class FacetInputCheckbox extends FacetInput {\n\n  protected transform(){\n    const facetId = this.getFacetId();\n  \n    return this.data.map(({ label, value }, index) => {\n      // normalize value\n      value = '' + value;\n\n      return {\n        type: 'checkbox', \n        id: this.getId() + '-' + index, \n        label: label, \n        payload: {\n          facetId,\n          source: 'input-checkbox',\n          value\n        }, \n        _meta: { facetId, value } \n      }\n    });\n  }\n\n  public setActive(facetValue){\n    const { isArray } = this.config.filterConfig;\n    \n    this.output.forEach(config => {\n      if(isArray && Array.isArray(facetValue) && facetValue.indexOf(config._meta.value) !== -1){\n        config.checked = true;\n      } else if(facetValue === config._meta.value) {\n        config.checked = true;\n      } else {\n        config.checked = false;\n      }\n    });\n  }\n  \n}","import { FacetInput } from './facet-input';\n\nexport class FacetInputText extends FacetInput {\n\n  protected transform() {\n    const facetId = this.getFacetId();\n    const payload = {\n      facetId,\n      source: 'input-text'\n    };\n\n    return {\n      type: 'text',\n      id: this.getId(),\n      label: this.config.label,\n      disabled: this.config.disabled,\n      placeholder: this.config.placeholder,\n      icon: this.config.icon,\n      inputPayload: {\n        ...payload,\n        trigger: 'input'\n      },\n      enterPayload: {\n        ...payload,\n        trigger: 'enter'\n      },\n      iconPayload: {\n        ...payload,\n        trigger: 'icon'\n      },\n      _meta: { facetId }\n    };\n  }\n\n  public setActive(facetValue) {\n    this.output.value = facetValue || null;\n  }\n}\n","import { FacetInput } from './facet-input';\n\nexport class FacetInputLink extends FacetInput {\n  private facetValue: string | string[];\n\n  protected transform(){\n    const facetId = this.getFacetId();\n  \n    return this.data.map(({ label, value, counter, hidden, options }) => {\n      // normalize value\n      value = '' + value;\n      options = options || {};\n\n      let classes = [];\n      if(options.classes) classes.push(options.classes);\n      if(hidden) classes.push('is-hidden');\n      if(this._isActive(this.facetValue, value)) classes.push('is-active');\n\n      return { \n        type: 'link', \n        id: this.getId(), \n        text: label, \n        counter, \n        payload: {\n          facetId,\n          source: 'input-link',\n          value\n        },\n        icon: options.icon || null,\n        classes: classes.join(' '),\n        _meta: { facetId, value } \n      };\n    });\n  }\n\n  public setActive(facetValue){\n    this.output.forEach(config => {\n      let classes = config.classes ? config.classes.split(' ') : [],\n        isActive = this._isActive(facetValue, config._meta.value);\n      if(!isActive){\n        classes = classes.filter(className => className !== 'is-active');\n      } else if(classes.indexOf('is-active') === -1) {\n        classes.push('is-active');\n      }\n      config.classes = classes.join(' ');\n    });\n  }\n  \n  private _isActive(facetValue, value){\n    this.facetValue = facetValue;\n\n    return (\n      (Array.isArray(facetValue) && facetValue.indexOf(value) !== -1) || \n      (facetValue === value)\n    );\n  }\n}","import { FacetInput } from './facet-input';\n\nexport class FacetInputSelect extends FacetInput {\n\n  protected transform() {\n    const facetId = this.getFacetId();\n\n    return {\n      type: 'select',\n      id: this.getId(),\n      label: this.config.label,\n      disabled: this.config.disabled,\n      options: this.data ? this.data.map(({ value, label }) => ({\n        // normalize value\n        value: '' + value,\n        label\n      })) : [],\n      payload: {\n        facetId,\n        source: 'input-select',\n      },\n      _meta: { facetId }\n    };\n  }\n\n  public setActive(facetValue){\n    this.output.options\n      .filter(option => option.value === facetValue)\n      .forEach(option => option.selected = true);\n  }\n}\n","import { get as _get } from 'lodash';\nimport { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport {\n  FacetInput,\n  FacetInputCheckbox,\n  FacetInputText,\n  FacetInputLink,\n  FacetInputSelect\n} from '../models';\n\nexport type FilterOperators = '=' | '>' | '<' | '>=' | '<=' | '<>' | 'LIKE';\nexport type FacetTypes = 'value' | 'range';\nexport type FacetOperators = 'OR' | 'AND';\n\nconst INPUTS_MAP = {\n  checkbox: FacetInputCheckbox,\n  text: FacetInputText,\n  link: FacetInputLink,\n  select: FacetInputSelect\n};\n\nconst FILTERS_MAP = {\n  '=' : '_filterDataEquals',\n  '>' : '_filterDataGreaterThan',\n  '<' : '_filterDataLessThan',\n  '>=' : '_filterDataGreaterOrEquals',\n  '<=' : '_filterDataLessOrEquals',\n  '<>' : '_filterDataNotEqual',\n  'LIKE': '_filterDataLike'\n};\n\nexport interface ISearchConfig {\n  totalCount: number;\n  facets: any;\n  page: any;\n  results: any;\n  fields: any;\n}\n\nexport interface IFacet {\n  id: string;\n  type: FacetTypes;\n  operator: FacetOperators;\n  hasStaticData?: boolean;\n  searchData?: string[];\n  data?: any;\n}\n\nexport interface IFilter {\n  facetId: string;\n  value: number | string | (number | string)[] | null;\n  searchIn: Array<{\n    key: string;\n    operator?: FilterOperators;\n  }>;\n  isArray?: boolean;\n  context?: 'internal' | 'external';\n  target?: string;\n}\n\nexport class SearchModel {\n  private _id: string;\n  private _filters: IFilter[] = [];\n  private _facets: IFacet[] = [];\n  private _inputs: FacetInput[] = [];\n  private _page: any;\n  private _totalCount: number | null;\n  private _config: ISearchConfig;\n  private _results$: Subject<any[]> = new Subject();\n\n  constructor(id: string, config: ISearchConfig) {\n    this._id = id;\n    this._config = config;\n\n    this._setFilters();\n    this._setFacets();\n    this._setPage();\n    this._setInputs();\n    this._setInputsData();\n    this._setTotalCount();\n  }\n\n  public getId = () => this._id;\n  public getFilters = () => this._filters;\n  public getFacets = () => this._facets;\n  public getInputs = () => this._inputs;\n  public getConfig = () => this._config;\n  public getTotalCount = () => this._totalCount;\n  public getFields = () => this._config.fields;\n  public getResults$ = () => this._results$;\n\n  public setResults = results => this._results$.next(results);\n\n  public updateFilter(facetId, value, remove?: boolean) {\n    const selectedFilters = this.getFiltersByFacetId(facetId);\n    selectedFilters.forEach(filter => {\n      if (Array.isArray(filter.value) && remove) {\n        filter.value = filter.value.filter(item => item !== value);\n      } else if (\n        Array.isArray(filter.value) &&\n        filter.value.indexOf(value) === -1\n      ) {\n        filter.value.push(value);\n      } else {\n        filter.value = !remove ? value : null;\n      }\n    });\n  }\n\n  public updateFiltersFromQueryParams(queryParams) {\n    Object.keys(queryParams).forEach(facetId => {\n      const selectedFilters = this.getFiltersByFacetId(facetId),\n        value = queryParams[facetId];\n\n      selectedFilters.forEach(filter => {\n        filter.value = filter.isArray ? value.split(',') : value;\n      });\n    });\n  }\n\n  public updateInputsFromFilters() {\n    this._filters.forEach(({ facetId, value }) => {\n      this.getInputByFacetId(facetId).setActive(value);\n    });\n  }\n\n  public updateFacets(facets) {\n    facets.forEach(({ id, data }) => this.updateFacet(id, data));\n    this._setInputsData();\n  }\n\n  public updateTotalCount(totalCount) {\n    this._totalCount = totalCount;\n  }\n\n  public updateFacet(facetId, data) {\n    const selectedFacets = this._facets.filter(facet => facet.id === facetId);\n    if (!selectedFacets.length) {\n      throw Error(`Facet with id '${facetId}' does not exists`);\n    }\n\n    selectedFacets.forEach(facet => (facet.data = data));\n  }\n\n  public reset() {\n    this._filters.forEach(filter => (filter.value = null));\n  }\n\n  public getRequestParams() {\n    return {\n      facets: this._getRequestFacets(),\n      page: this._page,\n      results: this._config.results,\n      filters: this._filters\n        .filter(filter => filter.context !== 'internal')\n        .map(({ facetId, value, searchIn }) => ({ facetId, value, searchIn }))\n    };\n  }\n\n  public getInternalFilters() {\n    return this._filters\n      .filter(filter => {\n        return (\n          filter.context === 'internal' &&\n          ((Array.isArray(filter.value) && filter.value.length) ||\n            (!Array.isArray(filter.value) && filter.value))\n        );\n      })\n      .map(({ facetId, value, searchIn }) => ({ facetId, value, searchIn }));\n  }\n\n  public filtersAsQueryParams(filters) {\n    const queryParams: any = {};\n    filters.forEach(\n      filter =>\n        (queryParams[filter.facetId] = Array.isArray(filter.value)\n          ? filter.value.join(',')\n          : filter.value)\n    );\n\n    return queryParams;\n  }\n\n  public getFiltersByFacetId(facetId: string) {\n    return this._filters.filter(filter => filter.facetId === facetId);\n  }\n\n  public getInputByFacetId(facetId: string) {\n    return this._inputs.filter(input => input.getFacetId() === facetId)[0];\n  }\n\n  public setInputData(facetId, data) {\n    this.getInputByFacetId(facetId).setData(data);\n  }\n\n  public filterTarget(target) {\n    const inputs = this._inputs.filter(input => input.getTarget() === target),\n      targetInput = this.getInputByFacetId(target),\n      facet = this._facets.filter(f => f.id === target)[0],\n      facetData = facet.data;\n\n    const searchIns = [];\n    inputs.forEach(input => {\n      const filter = this.getFiltersByFacetId(input.getFacetId())[0],\n        searchIn = input.getSearchIn(),\n        value = filter.value;\n\n      searchIns.push([searchIn, value]);\n    });\n\n    // filter\n    facetData.forEach(item => this._filterData(searchIns, item));\n\n    // update\n    targetInput.setData(facetData);\n    targetInput.update();\n  }\n\n  public setSearchConfigOrderBy(orderBy) {\n    this._config.results.order.type = orderBy;\n  }\n\n  public setSearchConfigDirection(direction) {\n    this._config.results.order.direction = direction;\n  }\n\n  public setPageConfigOffset(offset) {\n    this._config.page.offset = offset;\n  }\n\n  public setPageConfigLimit(limit) {\n    this._config.page.limit = limit;\n  }\n\n  private _filterData(searchIns, item) {\n    // reset\n    item.hidden = false;\n    searchIns.forEach(([searchIn, value]) => {\n      searchIn.forEach(({ key, operator }) => {\n        if (item.hidden) {\n          return;\n        }\n        let refValue = _get(item, key, null);\n        if (key.indexOf('searchData') !== -1 && Array.isArray(item.searchData)) {\n          const searchDataKey = key.replace('searchData.', '');\n          item.searchData.forEach(({ key: dataKey, value: dataValue }) => {\n            if (dataKey === searchDataKey) {\n              refValue = dataValue;\n            }\n          });\n        }\n        if (refValue === null) {\n          item.hidden = true;\n        } else if (FILTERS_MAP[operator]) {\n          item.hidden = this[FILTERS_MAP[operator]](value, refValue);\n        } else {\n          console.warn(`SearchIn: operator ${operator} not supported`);\n        }\n      });\n    });\n  }\n\n  private _filterDataEquals(value, refValue) {\n    if (Array.isArray(refValue)) {\n      if (Array.isArray(value)) {\n        let inArray = value.length === 0 ? true : false;\n        refValue.forEach(rv => {\n          if (value.indexOf(rv) !== -1) {\n            inArray = true;\n          }\n        });\n        return !(inArray);\n      } else {\n        return !(value && refValue.indexOf(value) !== -1);\n      }\n    } else {\n      if (Array.isArray(value)) {\n        return !(\n          !value.length || value.indexOf(refValue) !== -1\n        );\n      } else {\n        return !(value && value === refValue);\n      }\n    }\n  }\n\n  private _filterDataGreaterThan(value, refValue) {\n    if (!Array.isArray(value)) {\n      return !(value && value > refValue);\n    }\n    return false;\n  }\n\n  private _filterDataLessThan(value, refValue) {\n    if (!Array.isArray(value)) {\n      return !(value && value < refValue);\n    }\n    return false;\n  }\n\n  private _filterDataGreaterOrEquals(value, refValue) {\n    if (!Array.isArray(value)) {\n      return !(value && value >= refValue);\n    }\n    return false;\n  }\n\n  private _filterDataLessOrEquals(value, refValue) {\n    if (!Array.isArray(value)) {\n      return !(value && value <= refValue);\n    }\n    return false;\n  }\n\n  private _filterDataNotEqual(value, refValue) {\n    if (!Array.isArray(value)) {\n      return !(value && value !== refValue);\n    }\n    return false;\n  }\n\n  private _filterDataLike(value, refValue) {\n    if (\n      value &&\n      refValue &&\n      typeof value === 'string' &&\n      typeof refValue === 'string'\n    ) {\n      const haystack = refValue.toLowerCase(),\n        needle = value.toLocaleLowerCase();\n\n      return !(haystack.indexOf(needle) !== -1);\n    }\n    return false;\n  }\n\n  private _setFilters() {\n    this._config.fields.forEach(field => {\n      field.inputs.forEach(input =>\n        this._filters.push({\n          ...input.filterConfig,\n          facetId: input.facetId,\n          value: input.filterConfig.isArray ? [] : null\n        })\n      );\n    });\n  }\n\n  private _setFacets() {\n    this._facets = this._config.facets;\n  }\n\n  private _setPage() {\n    this._page = this._config.page;\n  }\n\n  private _setTotalCount() {\n    this._totalCount = this._config.totalCount;\n  }\n\n  private _setInputs() {\n    this._config.fields.forEach((sectionConfig, sectionIndex) => {\n      sectionConfig.inputs.forEach((inputConfig, inputIndex) => {\n        const inputModel = INPUTS_MAP[inputConfig.type];\n        if (!inputModel) {\n          throw Error(`Input type ${inputConfig.type} not supported`);\n        }\n\n        this._inputs.push(\n          new inputModel({ ...inputConfig, inputIndex, sectionIndex })\n        );\n      });\n    });\n  }\n\n  private _setInputsData() {\n    this._facets.forEach(facet => this.setInputData(facet.id, facet.data));\n  }\n\n  private _getRequestFacets() {\n    const results: IFacet[] = [];\n    this._facets.forEach(f => {\n      const facetConfig = {...f};\n      if (!f.hasStaticData) {\n        delete facetConfig.data;\n      }\n      delete facetConfig.hasStaticData;\n\n      // searchData control\n      if (Array.isArray(facetConfig.data)) {\n        facetConfig.data\n          .filter(dataItem => typeof dataItem.searchData !== 'undefined')\n          .forEach(dataItem => {\n            delete dataItem.searchData;\n          });\n      }\n      results.push(facetConfig);\n    });\n    return results;\n  }\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SearchService {\n  static queryParams: any = null;\n  private _models: any = {};\n\n  public add(id: string, config: ISearchConfig) {\n    if (this._models[id]) {\n      throw Error(`Search model '${id}' already exists!`);\n    }\n\n    this._models[id] = new SearchModel(id, config);\n  }\n\n  public model(id: string): SearchModel {\n    return this._models[id] || null;\n  }\n}\n","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil, first, filter } from 'rxjs/operators';\nimport { SearchService } from '../../services';\n\nexport class MainLayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n  private route: any;\n  private router: any;\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type) {\n        case 'main-layout.init':\n          this.dataSource.onInit(payload);\n\n          this.route = payload.route;\n          this.router = payload.router;\n\n          this._listenRouterChanges();\n          break;\n\n        case 'main-layout.destroy':\n            this.destroyed$.next();\n            break;\n\n        default:\n            break;\n      }\n    });\n\n    // listen to global events\n    EventHandler.globalEvents$.pipe(\n      takeUntil(this.destroyed$)\n    ).subscribe(({type, payload}) => {\n      switch(type){\n        case 'global.navigate':\n          this.dataSource.onNavigate(payload);\n          break;\n          \n        default: \n          break;\n      }\n    });\n  }\n\n  private _listenRouterChanges(){\n    this.route.queryParams.pipe(\n      filter(params => {\n        if(Object.keys(params).length) return true;\n        return false;\n      }),\n      // first(),\n    ).subscribe(params => {\n      this.emitGlobal('queryparams', params);\n\n      // to use in searchs\n      SearchService.queryParams = params;\n    });\n  } \n  \n}","import { DataSource } from '@n7-frontend/core';\n\nexport class HeaderDS extends DataSource {\n  protected transform(data) {\n\n    if (data.selected) {\n      this.selectNavItem(data.selected);\n    }\n\n    return data.items;\n  }\n\n  public selectNavItem(selectedItem) {\n    this.output.nav.items.forEach( item => {\n      item.classes = \"\";\n      if ( item.payload == selectedItem ){\n        item.classes = \"is-current\";\n      }\n    })\n    this.update({'items': this.output});\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class SubnavDS extends DataSource {\n\n  protected transform(data) {\n    return {\n      classes: 'main-subnav',\n      items: data\n    }\n  }\n\n  setActive(id){\n    this.output.items.forEach(item => {\n      if(item._meta.id === id){\n        item.classes = 'is-current';\n        item._meta.isActive = true;\n      } else {\n        item.classes = '';\n        item._meta.isActive = false;\n      }\n    });\n  }\n\n  getActive(){\n    return this.output.items.filter(item => item._meta.isActive)[0] || null;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\nimport { IBreadcrumbsData } from '@n7-frontend/components';\n\nexport class BreadcrumbsDS extends DataSource {\n  protected transform(data): IBreadcrumbsData | null {\n    return data;\n  }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class FacetsDS extends DataSource {\n  public searchModel: any;\n\n  protected transform({ fields }) {\n\n    const { searchModel } = this.options;\n    this.searchModel = searchModel;\n\n    return fields;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\nimport { SearchModel, SearchService } from '../services/search.service';\n\nconst HEADER_ICON_OPEN = 'n7-icon-angle-down';\nconst HEADER_ICON_CLOSE = 'n7-icon-angle-right';\n\nexport class FacetsWrapperDS extends DataSource {\n  public searchModel: SearchModel;\n\n  protected transform(data) {\n\n    if(!this.searchModel) {\n      this.searchModel = data.searchModel;\n    }\n\n    const id = this.searchModel.getId(),\n      fields = this.searchModel.getFields();\n    \n    let groups = [];\n\n    fields.forEach((fieldConfig, fieldIndex) => {\n      const groupId = `group-${id}-${fieldIndex}`;\n      \n      // header config\n      const header = this._headerConfig(fieldConfig.header, groupId);\n\n      // inputs config\n      let sections = [];\n      this.searchModel.getInputs()\n        .filter(input => input.getSectionIndex() === fieldIndex)\n        .map(input => {\n          input.update();\n          return {\n            facetId: input.getFacetId(),\n            type: input.getType(),\n            output: input.getOutput()\n          }\n        })\n        .forEach(({ type, output, facetId }) => {\n          sections.push({ \n            classes: this._getSectionClasses(type),\n            inputs: Array.isArray(output) ? output : [output],\n            _meta: {\n              facetId\n            }\n          });\n        });\n\n      groups.push({ \n        header,\n        facet: { sections },\n        classes: `n7-facets-wrapper__${groupId}`,\n        isOpen: true, \n        _meta: {\n          groupId\n        }\n      })\n    });\n\n    // query params control\n    if(SearchService.queryParams){\n      this.searchModel.updateFiltersFromQueryParams(SearchService.queryParams);\n      this.searchModel.updateInputsFromFilters();\n\n      // reset queryparams\n      SearchService.queryParams = null;\n    }\n\n    return { \n      groups, \n      classes: `n7-facets-wrapper__${this.searchModel.getId()}` \n    };\n  }\n\n  public toggleGroup({ eventPayload }){\n    this.output.groups.forEach(group => {\n      if(group._meta.groupId === eventPayload.groupId) {\n        group.isOpen = !group.isOpen;\n        group.header.iconRight = group.isOpen ? HEADER_ICON_OPEN : HEADER_ICON_CLOSE;\n      }\n    });\n  }\n  \n  public onFacetChange({ eventPayload }){\n    const { facetId, source, trigger } = eventPayload.inputPayload,\n      filter = this.searchModel.getFiltersByFacetId(facetId)[0] || {},\n      filterValue = filter['value'];\n\n    let remove: boolean = false,\n      value: any = eventPayload.inputPayload.value || eventPayload.value;\n\n    // normalize\n    value = '' + value;\n      \n    // remove control\n    if(Array.isArray(filterValue)){\n      remove = filterValue.indexOf(value) !== -1;\n    } else {\n      remove = filterValue === value;\n    }\n\n    // input text control\n    // TODO: gestire i casi enter / icon click nel input text\n    if(source === 'input-text' && ['enter', 'icon'].indexOf(trigger) !== -1) return;\n\n    this.searchModel.updateFilter(facetId, value, remove);\n    this.searchModel.updateInputsFromFilters();\n  }\n\n  public updateFilteredTarget(target){\n    const input = this.searchModel.getInputByFacetId(target);\n    this.output.groups\n      .map(group => group.facet)\n      .map(facet => facet.sections)\n      .map(sections => {\n        sections.forEach(section => {\n          if(section._meta.facetId === target){\n            const inputOutput = input.getOutput();\n            section.inputs = Array.isArray(inputOutput) ? inputOutput : [inputOutput];\n          }\n        });\n      });\n  }\n\n  public updateInputLinks(){\n    const linksFacetIds = this.searchModel.getInputs()\n      .filter(input => input.getType() === 'link')\n      .map(input => input.getFacetId());\n\n    this.output.groups\n      .map(group => group.facet)\n      .map(facet => facet.sections)\n      .map(sections => {\n        sections.forEach(section => {\n          if(linksFacetIds.indexOf(section._meta.facetId) !== -1){\n            const input = this.searchModel.getInputByFacetId(section._meta.facetId);\n            input.update();\n            const inputOutput = input.getOutput();\n            section.inputs = Array.isArray(inputOutput) ? inputOutput : [inputOutput];\n          }\n        });\n      });\n  }\n\n  public getRequestParams = () => this.searchModel.getRequestParams();\n  public filtersAsQueryParams = (filters) => this.searchModel.filtersAsQueryParams(filters);\n  public updateFiltersFromQueryParams = (queryParams) => this.searchModel.updateFiltersFromQueryParams(queryParams);\n  public getInputByFacetId = (facetId) => this.searchModel.getInputByFacetId(facetId);\n  public filterTarget = (target) => this.searchModel.filterTarget(target);\n\n  public updateInputsFromFilters(){\n    this.searchModel.updateInputsFromFilters();\n  }\n\n  private _getSectionClasses(type){\n    const classesMap = {\n      'text': 'text',\n      'checkbox': 'checkboxes',\n      'link': 'links',\n      'select': 'select'\n    };\n\n    return `n7-facet__section-input-${classesMap[type]}`;\n  }\n\n  private _headerConfig(header, groupId){\n    return header ? {\n      text: header.label,\n      iconRight: HEADER_ICON_OPEN,\n      classes: header.classes,\n      payload: {\n        source: 'group-header',\n        id: `${groupId}-header`,\n        groupId: groupId\n      },\n      _meta: {\n        id: `${groupId}-header`\n      }\n    }: null;\n  }\n\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class FooterDS extends DataSource {\n  protected transform(data) {\n    if(!data) {\n      return;\n    }\n    return data.items;\n  }\n}\n","import { EventHandler } from '@n7-frontend/core';\n\nexport class HeaderEH extends EventHandler {\n\n  public listen(){\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case 'header.click':\n          // navigate control\n          // if(payload.source === 'navigate'){\n          this.dataSource.selectNavItem(payload);\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [payload]\n          });\n          // }\n          // global signal\n          // this.emitGlobal(type, payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n\n}\n","import { EventHandler } from '@n7-frontend/core';\n\nexport class SubnavEH extends EventHandler {\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case 'subnav.click':\n          // navigate control\n          if(payload.source === 'navigate'){\n            this.emitGlobal('navigate', payload);\n          }\n\n          // global signal\n          this.emitGlobal(type, payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class BreadcrumbsEH extends EventHandler {\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case 'breadcrumbs.click':\n          // navigate control\n          if(payload.source === 'navigate'){\n            this.emitGlobal('navigate', payload);\n          }\n\n          // global signal\n          this.emitGlobal(type, payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class FacetsEH extends EventHandler {\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        // TODO\n        default:\n          break;\n      }\n    });\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\nexport class FacetsWrapperEH extends EventHandler {\n  private _facetsChanged = false;\n  private internalFacetsChange$: Subject<any> = new Subject();\n\n  public listen() {\n    // listen to inner (widget) events\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'facets-wrapper.facet':\n          const { facetId } = payload.eventPayload.inputPayload,\n            input = this.dataSource.getInputByFacetId(facetId),\n            context = input.getContext();\n          this._facetsChanged = true;\n\n          // update\n          this.dataSource.onFacetChange(payload);\n\n          // internal\n          if (context === 'internal') {\n            this.internalFacetsChange$.next(input.getTarget());\n\n            // external\n          } else {\n            const requestParams = this.dataSource.getRequestParams(),\n              queryParams = this.dataSource.filtersAsQueryParams(requestParams.filters);\n\n            Object.keys(queryParams).forEach(key => queryParams[key] = queryParams[key] || null);\n            // signal\n            this.emitOuter('facetschange');\n\n            // router signal\n            this.emitGlobal('navigate', {\n              handler: 'router',\n              path: [],\n              queryParams\n            });\n          }\n\n          break;\n\n        case 'facets-wrapper.facetheader':\n          this.dataSource.toggleGroup(payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n\n    // listen to global events\n    EventHandler.globalEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'global.searchresponse':\n          if (this.dataSource.searchModel.getId() === payload) {\n            this.dataSource.updateInputLinks();\n          }\n          break;\n\n        default:\n          break;\n      }\n    });\n\n    // internal facets change\n    this.internalFacetsChange$.pipe(\n      debounceTime(500)\n    ).subscribe(target => {\n      this.dataSource.filterTarget(target);\n      this.dataSource.updateFilteredTarget(target);\n    });\n  }\n\n}\n","import { EventHandler } from '@n7-frontend/core';\n\nexport class FooterEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        default:\n          console.warn('unhandled inner event of type', type)\n          break;\n      }\n    });\n  }\n\n}\n","import { MainLayoutDS } from './main-layout.ds';\nimport { MainLayoutEH } from './main-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const MainLayoutConfig = {\n  layoutId: 'main-layout',\n  widgets: [{\n    id: 'header'\n  }, {\n    id: 'subnav'\n  }, {\n    id: 'breadcrumbs'\n  }, {\n    id: 'footer'\n  }],\n  layoutDS: MainLayoutDS,\n  layoutEH: MainLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Title } from '@angular/platform-browser';\nimport { AbstractLayout } from '../../models/abstract-layout'\nimport { ConfigurationService } from '../../services/configuration.service';\nimport { LayoutsConfigurationService } from '../../services/layouts-configuration.service';\nimport { MainStateService } from '../../services/main-state.service';\nimport { MainLayoutConfig as config } from './main-layout.config';\n\n@Component({\n    selector: 'main-layout',\n    templateUrl: './main-layout.html'\n})\nexport class MainLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private configuration: ConfigurationService,\n    private layoutsConfiguration: LayoutsConfigurationService,\n    private mainState: MainStateService,\n    private titleService: Title\n  ){\n    super(layoutsConfiguration.get('MainLayoutConfig') || config);\n  }\n\n  protected initPayload(){\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      router: this.router,\n      route: this.route,\n      titleService: this.titleService,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n}\n","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class Page404LayoutDS extends LayoutDataSource {\n  public options: any;\n\n  onInit({ options }){\n    this.options = options;\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\n\nexport class Page404LayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type) {\n        case 'n7-page404-layout.init':\n          this.dataSource.onInit(payload);\n          break;\n\n        case 'n7-page404-layout.destroy':\n            this.destroyed$.next();\n            break;\n\n        default:\n            break;\n      }\n    });\n\n    // listen to global events\n    /* EventHandler.globalEvents$.pipe(\n      takeUntil(this.destroyed$)\n    ).subscribe(({type, payload}) => {\n      switch(type){\n        case 'global.navigate':\n          this.dataSource.onNavigate(payload);\n          break;\n          \n        default: \n          break;\n      }\n    }); */\n  }\n  \n}","import { Page404LayoutDS } from './page404-layout.ds';\nimport { Page404LayoutEH } from './page404-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const Page404LayoutConfig = {\n  layoutId: 'n7-page404-layout',\n  widgets: [],\n  layoutDS: Page404LayoutDS,\n  layoutEH: Page404LayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractLayout } from '../../models/abstract-layout'\nimport { LayoutsConfigurationService } from '../../services/layouts-configuration.service';\nimport { Page404LayoutConfig as config } from './page404-layout.config';\n\n@Component({\n    selector: 'n7-page404-layout',\n    templateUrl: './page404-layout.html'\n})\nexport class Page404LayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    layoutsConfiguration: LayoutsConfigurationService,\n  ){\n    super(layoutsConfiguration.get('Page404LayoutConfig') || config);\n  }\n\n  protected initPayload(){\n    return {\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'n7-facets-wrapper',\n  templateUrl: './facets-wrapper.html',\n})\nexport class FacetsWrapperComponent {\n  @Input() data: any;\n  @Input() emit: any;\n\n  headerEmit(eventType, eventPayload){\n    if(!this.emit) return;\n\n    this.emit('facetheader', { eventType, eventPayload });\n  }\n\n  facetEmit(eventType, eventPayload){\n    if(!this.emit) return;\n\n    this.emit('facet', { eventType, eventPayload });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ModuleWithProviders } from '@angular/compiler/src/core';\nimport { DvComponentsLibModule } from '@n7-frontend/components';\n\n// services\nimport { ConfigurationService } from './services/configuration.service';\nimport { LayoutsConfigurationService } from './services/layouts-configuration.service';\nimport { MainStateService } from './services/main-state.service';\nimport { CommunicationService } from './services/communication.service';\nimport { ApolloProvider } from './services/communication-providers/apollo/apollo.provider';\n\n// layouts\nimport { MainLayoutComponent } from './layouts/main-layout/main-layout';\nimport { Page404LayoutComponent } from './layouts/page404-layout/page404-layout';\nimport { FacetsWrapperComponent } from './components/facets-wrapper/facets-wrapper';\n\nconst COMPONENTS = [\n  MainLayoutComponent,\n  Page404LayoutComponent,\n  FacetsWrapperComponent,\n];\n\n@NgModule({\n  declarations: COMPONENTS,\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    DvComponentsLibModule\n  ],\n  providers: [],\n  exports: COMPONENTS\n})\nexport class N7BoilerplateCommonModule {\n  static forRoot(config: any): ModuleWithProviders {\n    return {\n      ngModule: N7BoilerplateCommonModule,\n      providers: [\n        MainStateService, \n        ConfigurationService, \n        LayoutsConfigurationService, \n        CommunicationService, \n        ApolloProvider, \n        { provide: 'config', useValue: config }\n      ]\n    }\n  }\n}\n","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwAboutLayoutDS extends LayoutDataSource {\n  onInit(payload){\n    // TODO\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwAboutLayoutEH extends EventHandler {\n  \n  public listen() {\n    /* this.innerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n    \n    /* this.outerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n  }\n\n}","export default {\n  prettifySnakeCase(key: string, label?: string) {\n    if (label) {\n      return label;\n    }\n    return key.split('_').map((word, index) => index === 0 ? this.ucFirst(word) : word).join(' ');\n  },\n  ucFirst(str: string) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  }\n};\n","import { DataSource } from '@n7-frontend/core';\nimport helpers from \"../../common/helpers\";\nimport { get as _get } from \"lodash\" // used for cherry-picking object keys from app-config.json\n\nexport class AwLinkedObjectsDS extends DataSource {\n\n  public currentPage: number\n  public totalPages: number\n  public totalObjects: number\n  public pageSize: number\n  public context: string\n  public loadedData: any\n  public loadingData: boolean = false\n  public paths: any // use dynamic object paths from config\n\n  protected transform(data) {\n    this.paths = this.options.config.get('item-preview')\n    this.pageSize = this.options.size\n    this.totalObjects = data.totalCount\n    this.currentPage = this.options.page ? <number>this.options.page : 1\n    if (this.options.dynamicPagination && this.options.dynamicPagination.total) {\n      this.totalPages = Math.ceil(this.options.dynamicPagination.total / this.pageSize)\n    } else if (data.items) {\n      this.totalPages = Math.ceil(data.items.length / this.pageSize)\n    } else if (data.relatedItems) {\n      this.totalPages = Math.ceil(data.relatedItems.length / this.pageSize)\n    }\n    this.context = this.options.context\n    this.loadedData = this.unpackData(data)\n    if (this.options.pagination) {\n      this.addPagination(this.currentPage, this.totalPages, this.pageSize)\n    }\n    this.checkForMore() // checks if <Show More> button should be enabled\n    this.loadedData.loaderData = {}\n    return this.loadedData\n  }\n\n  public checkForMore = (force?: boolean) => {\n    /*\n      Checks if it is possible to load more item previews.\n      Can receive a boolean argument to force the button to be\n      enabled or disabled. (Used while data is loading)\n    */\n    if (!this.loadedData.actions) {\n      // if not using actions, don't check\n      return\n    }\n    if (typeof force !== 'undefined') {\n      this.loadedData.actions[1].disabled = !force\n      return\n    }\n    if (this.loadedData.result.length >= this.totalObjects) {\n      this.loadedData.actions[1].disabled = true\n    } else {\n      this.loadedData.actions[1].disabled = false\n    }\n    return\n  }\n\n  public handleIncomingData = incomingData => {\n    /*\n      Called by button <Mostra Altri>, adds the incoming\n      data to the linked objects component.\n    */\n    this.currentPage += 1\n    let newData: any = this.unpackData(incomingData.itemsPagination)\n    this.loadedData.result = this.loadedData.result.concat(newData.result)\n    this.checkForMore()\n    this.loadedData.isLoading = false\n  }\n\n  public addPagination = (page, totalPages, size) => {\n    let sizeOptions = [10, 25, 50]\n    this.loadedData.pagination = {\n      first: { payload: `goto-${1}`, classes: page == 1 ? 'is-disabled' : '' },\n      prev: { payload: `goto-${page / 1 - 1}`, classes: page == 1 ? 'is-disabled' : '' },\n      next: { payload: `goto-${page / 1 + 1}`, classes: page == totalPages ? 'is-disabled' : '' },\n      last: { payload: `goto-${totalPages}`, classes: page == totalPages ? 'is-disabled' : '' },\n      links: this.makePagination(totalPages, page),\n      select: {\n        label: 'Numero di risultati',\n        options: sizeOptions.map(o => {\n          return {\n            text: o,\n            selected: o == size,\n          }\n        }),\n        payload: 'select-size'\n      },\n      // previews: result\n    }\n  }\n\n  public makePagination = (totalPages, currentPage) => {\n    /*\n      Called by this.unpackData() when this.options.page is defined.\n      Returns the data for <n7-pagination> component.\n    */\n    let result = []\n    let limit = this.paths.paginationLimit - 1\n    // always push the first page\n    if (limit) {\n      let lastPage: number, firstPage: number\n      if (currentPage > Math.floor(limit / 2)) {\n        // when currentPage is after half-point\n        // (example: [ 14 ][ 15 ][!16!][ 17 ][ 18 ])\n        if (currentPage < (totalPages - Math.floor(limit / 2))) {\n          lastPage = currentPage / 1 + Math.floor(limit / 2)\n          firstPage = currentPage / 1 - Math.floor(limit / 2)\n        } else {\n          lastPage = totalPages\n          firstPage = currentPage - limit + (totalPages - currentPage)\n        }\n      } else {\n        // when currentPage is before half-point\n        // (example: [ 1 ][!2!][ 3 ][ 4 ][ 5 ])\n        lastPage = limit + 1\n        firstPage = 1\n      }\n      // console.log({ currentPage, limit, lastPage, firstPage })\n      for (let i = firstPage; i <= lastPage; i++) {\n        result.push({\n          text: String(i),\n          payload: 'page-' + String(i),\n          classes: currentPage == i ? 'is-active' : ''\n        })\n      }\n    } else {\n      result.push({\n        text: '1',\n        payload: 'page-1',\n        classes: currentPage == 1 ? 'is-active' : ''\n      })\n      for (let i = 1; i < totalPages; i++) {\n        result.push({ text: String(i + 1), payload: 'page-' + String(i + 1), classes: currentPage == i + 1 ? 'is-active' : '' })\n      }\n    }\n    return result\n  }\n\n  private unpackData = data => {\n    /*\n      Dynamically returns the data object for each HTML component\n      data: {\n        previews: [ breadcrumbs: { items[] }, classes, image, metadata, payload, title ],\n        pagination: { first, last, links, next, prev, select }\n      }\n    */\n    const\n      config = this.options.config,       // app-config.json\n      paths = config.get('item-preview'), // item preview dynamic paths\n      totalCount = data.totalCount,       // total amount of items available on backend\n      totalPages = this.totalPages,       // calculated number of pages\n      page = this.currentPage,            // current page (if using pagination)\n      context = this.context,             // parent layout name\n      size = this.pageSize,               // items per page (if using pagination)\n      labels = config.get(\"labels\"),\n      { dynamicPagination } = this.options;\n    var\n      d = data.items ? data.items : data.relatedItems // items to iterate over\n\n    if (config) {\n      var keys = config.get('config-keys')\n      // dynamic search for max-item-length\n      if (config.get(context + '-layout')) {\n        var lengthLimit = config.get(context + '-layout')['max-item-length']\n        var resultsLimit = config.get(context + '-layout')['results-limit']\n      }\n    }\n    // resize data\n    if (!dynamicPagination && size && page) {\n      d = d.slice(page * size - size, page * size)\n    } else if (size) {\n      d = d.slice(0, size)\n    }\n\n    var result = []\n    d.forEach(el => {\n      let item = {\n        image: _get(el, paths.image, el.image),\n        title:\n          // if there is a max string length in config, use it\n          +paths.title.maxLength && _get(el, paths.title, el.item.label).length > +paths.title.maxLength ?\n            _get(el, paths.title, el.item.label).slice(0, +paths.title.maxLength) + '' :\n            _get(el, paths.title, el.item.label),\n        text: !paths.text ? null : // make text block (in config) optional\n          +paths.text.maxLength && _get(el, paths.text.data, el.item.text).length > +paths.text.maxLength ?\n            _get(el, paths.text.data, el.item.text).slice(0, +paths.text.maxLength) + '' :\n            _get(el, paths.text.data, el.item.text),\n        payload: _get(el, paths.payload, el.item.id),\n        classes: ['entita', 'search'].includes(context) ? 'is-fullwidth' : '',\n        metadata: [\n          _get(el, paths.metadata.info.data, el.item.fields) ? {\n            classes: 'n7-objects__metadata-artist',\n            items: _get(el, paths.metadata.info.data, el.item.fields).map(data => {\n              for (let i = 0; i < paths.metadata.info.selection.length; i++) {\n                if (data.key == paths.metadata.info.selection[i].key) { // if the selected key (config) is in data, use it\n                  return ({\n                    label: helpers.prettifySnakeCase(data.key, labels[data.key]),\n                    value: data.value\n                  })\n                }\n              }\n              return {} // if no data was found for this key, return empty object.\n            })\n          } : {}, // if metadata.data is missing, use empty object\n          {\n            classes: 'n7-objects__metadata-linked',\n            items: _get(el, paths.metadata.toe.data, el.relatedTypesOfEntity) ?\n              _get(el, paths.metadata.toe.data, el.relatedTypesOfEntity).map(toe => {\n                return { // persona: 6, Organizz: 12, Luoghi: 2, Concetti: 32\n                  value: _get(toe, paths.metadata.toe.value, toe.count),\n                  // icon: 'n7-icon-bell' // TODO: link icon to config key\n                  icon: keys[_get(toe, paths.metadata.toe.icon, toe.type).replace(\" \", \"-\")] ? keys[_get(toe, paths.metadata.toe.icon, toe.type).replace(\" \", \"-\")].icon : \"\",\n                  classes: 'color-' + _get(toe, paths.metadata.toe.icon, toe.type).replace(\" \", \"-\")\n                }\n              }) : null\n          }\n        ]\n      };\n      if (_get(el, paths.metadata.breadcrumbs.data, el.breadcrumbs)) {\n        item['breadcrumbs'] = { // n7-breadcrumbs uses this as it's own data\n          items: _get(el, paths.metadata.breadcrumbs.data, el.breadcrumbs).map(crumb => {\n            return {\n              label: _get(crumb, paths.metadata.breadcrumbs.label, crumb.label),\n              payload: _get(crumb, paths.metadata.breadcrumbs.payload, crumb.link),\n            }\n          })\n        };\n      }\n      result.push(item);\n    });\n    if (context === 'home') {\n      let actions = [\n        {\n          label: 'Mostra Tutti (' + totalCount + ')'\n        },\n        lengthLimit ?\n          {\n            label: 'Mostra Altri (' + resultsLimit + ')',\n            disabled: false,\n          } : null,\n      ]\n      return {\n        result,\n        actions,\n        isLoading: false,\n      }\n    }\n    return { previews: result };\n  }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwAutocompleteWrapperDS extends DataSource {\n\n  protected transform(data) {\n    const { key, response } = data\n    const regex = new RegExp('(.*?)' + key + '(.*)', 'i') // 'i' = case insensitive\n    const suggestion = []\n    const config = this.options.config\n    const maxLength = config.get('home-layout')['max-item-length'] / 2\n    const fResults = response.results.filter(el => typeof el.entity == 'object') // filter only entities (no cultural objects)\n    \n    fResults.forEach(el => {\n      if (el.entity.id == 'fallback') { // build and return fallback data\n        suggestion.push({\n          match: '',\n          payload: 'fallback-simple-autocomplete',\n          prefix: el.entity.label,\n          suffix: ''\n        })\n        return { suggestion }\n      }\n      // divide prefix and suffix\n      // let match = el.item.label.match(regex)\n      let match = regex.exec(el.entity.label)\n      if (match) {\n        let prefix = match[1]\n        let suffix = match[2]\n        // string manipulation\n        if (maxLength && (prefix.length > maxLength)) {\n          prefix = '...' + prefix.slice(prefix.length - maxLength, prefix.length)\n        }\n        if (maxLength && (suffix.length > maxLength)) {\n          suffix = suffix.slice(0, maxLength) + '...'\n        }\n        suggestion.push({\n          match: match.input.slice(match[1].length, match[1].length + key.length),\n          prefix,\n          suffix,\n          payload: el.entity.id\n        })\n      }\n    });\n    return { suggestion }\n  }\n}","import { DataSource } from '@n7-frontend/core';\nimport tippy from 'tippy.js';\nimport { fromEvent, interval } from 'rxjs';\nimport { debounce } from 'rxjs/operators';\n\nexport class AwBubbleChartDS extends DataSource {\n\n  private thresholdShowTitle:number = 50;\n  private thresholdShowValue:number = 60;\n  public configuration: any;\n  private allBubbles: any[] = null;\n  private entityBubbleIdMap: any = {};\n  public selectedBubbles: any[] = [];\n  private facetData: any[] = null;\n  private bubblePopup: any = null;\n  public currentHoverEntity: any = null;\n  private _bubbleChart: any = null;\n  private maxBubblesSelectable:number = 3;\n  private tippy;\n  private windowResizeSet = false;\n  private maxBubbleRadius = 100;\n  private minBubbleRadius = 10;\n  private maxBubbleTextRadiusRatio = 6;\n\n  protected transform(data){\n    if ( !data ){ return null; }\n\n    this.destroyTooltip();\n\n    this.facetData = data.facetData ? data.facetData : [];\n    this.tippy = tippy;\n\n    data.bubbles = this.filterBubblesBasedOnFacetsEnabled();\n    let bubbleCointainer = document.getElementById(this.options.containerId);\n    const cWidth = data.width ? data.width : bubbleCointainer.offsetWidth;\n\n    // TODO: think of a good way to pass/compute cHeight\n    const cHeight = 700; // bubbleCointainer.offsetHeight\n    const containerSize = cWidth * cHeight;\n\n    let bubblesData = {\n      containerId: this.options.bubbleContainerId,\n      containerWidth : cWidth,\n      containerHeight : cHeight,\n      isForceSimulationEnabled: true,\n      maxBubblesSelected:3\n    };\n\n    bubblesData['bubblesData'] = [];\n\n    let maxBubbleCount = -1;\n    let minBubbleCount = -1;\n    let numOfBubbles = 0;\n    let totalCount = 0;\n    let numOfSelectedBubbles = 0;\n\n    data.bubbles.forEach( bubble => {\n      if ( maxBubbleCount < bubble.count ) maxBubbleCount = bubble.count;\n      if ( minBubbleCount < 0 || minBubbleCount>bubble.count ) minBubbleCount = bubble.count;\n      numOfBubbles++;\n      totalCount += bubble.count;\n      if(bubble.selected) numOfSelectedBubbles++;\n    });\n\n    data.bubbles.forEach( bubble => {\n      let bId = bubble.id;\n\n      let bubbleAverage =  totalCount / numOfBubbles;\n      let bubblePercentage = ( bubble.count - (minBubbleCount/3) )/( (maxBubbleCount*3) - (minBubbleCount/3) );\n\n\n      //to understand if there is a large difference of count between bubbles\n      let coeff = maxBubbleCount / bubbleAverage;\n\n      /* if ( coeff > 20 ) {\n        if ( bubble.count - coeff >= 0 ){\n          bubblePercentage = ( (bubble.count) - (minBubbleCount/3) )/( (maxBubbleCount*3) - (minBubbleCount/3) )\n        } else {\n        }\n        bubblePercentage = ( (bubble.count - (minBubbleCount/3)) - (minBubbleCount/3) )/( ((maxBubbleCount - coeff) *3) - (minBubbleCount/3) )\n      }*/\n\n      /* In case of few bubbles */\n      if( coeff > 1 ) {\n        bubblePercentage = ( bubble.count * (coeff/3) - (minBubbleCount/3) )/( (maxBubbleCount*3) - (minBubbleCount/3) );\n      }\n\n      let bubbleRadius = (Math.log(containerSize)/10)*(bubblePercentage*3)*(70-Math.sqrt(numOfBubbles));\n      if ( bubbleRadius > this.maxBubbleRadius ) {\n        bubbleRadius = this.maxBubbleRadius;\n      } else if ( bubbleRadius < this.minBubbleRadius ) {\n        bubbleRadius = this.minBubbleRadius;\n      }\n\n      //console.log(\"bubble text \" +  bubble.entity.label +\" bubble length \" +  bubble.entity.label.length + \" radius: \" + bubbleRadius + \" limit: \" + this.thresholdShowTitle  )\n      let label = bubble.entity.label;\n\n      let texts = [];\n      // check if text is larger than radius\n      if( bubbleRadius / bubble.entity.label.length < this.maxBubbleTextRadiusRatio ) {\n        const index = bubbleRadius / this.maxBubbleTextRadiusRatio;\n        const spaceIndex = bubble.entity.label.indexOf(\" \", index - 5)\n        const label1 = bubble.entity.label.slice(0, spaceIndex);\n        const label2 = bubble.entity.label.slice(spaceIndex, index *2);\n        //label = [bubble.entity.label.slice(0, index), \"\\n\", bubble.entity.label.slice(index)].join('');\n\n        texts.push(\n          {\n            id:bId+\"_label0\",\n            label: (d) => { if(d.radius<this.thresholdShowTitle) return null; return label1 },\n            x_function: (d) => d.x,\n            y_function: (d) => {\n              let mNum = (d.radius/9);\n              if(d.radius<this.thresholdShowValue) mNum=0;\n              return d.y-mNum -20;\n            },\n            \"user_select\":\"none\",\n            fontSize_function: (d) => d.radius/5,\n            color: \"white\",\n            \"classes\":\"\"\n          },\n          {\n            id:bId+\"_label01\",\n            label: (d) => { if(d.radius<this.thresholdShowTitle) return null; return label2 },\n            x_function: (d) => d.x,\n            y_function: (d) => {\n              let mNum = (d.radius/9);\n              if(d.radius<this.thresholdShowValue) mNum=0;\n              return d.y-mNum;\n            },\n            \"user_select\":\"none\",\n            fontSize_function: (d) => d.radius/5,\n            color: \"white\",\n            \"classes\":\"\"\n          }\n\n\n        )\n      } else {\n        texts.push({\n          id:bId+\"_label0\",\n          label: (d) => { if(d.radius<this.thresholdShowTitle) return null; return label },\n          x_function: (d) => d.x,\n          y_function: (d) => {\n            let mNum = (d.radius/9);\n            if(d.radius<this.thresholdShowValue) mNum=0;\n            return d.y-mNum;\n          },\n          \"user_select\":\"none\",\n          fontSize_function: (d) => d.radius/5,\n          color: \"white\",\n          \"classes\":\"\"\n        });\n      }\n\n      let bubbleData = {\n        id: bId,\n        texts: [\n          ...texts,\n          {\n            id:bId+\"_label1\",\n            label: (d) => { if(d.radius<this.thresholdShowValue) return null; return bubble.count },\n            x_function: (d) => d.x,\n            y_function: (d) => d.y+(d.radius/9),\n            \"user_select\":\"none\",\n            //fontSize_function: (d) => d.radius/3,\n            color: \"white\",\n            \"classes\":\"aw-bubble-num\"\n        }\n        ],\n        x: cWidth/2+50,\n        y: cHeight/2+50,\n        \"radius\": bubbleRadius,\n        color:bubble.color,\n        hasCloseIcon: ( bubble.selected ? bubble.selected : false ),\n        payload:{\n          id: bId\n        },\n      };\n\n      bubblesData['bubblesData'].push(bubbleData);\n    });\n\n\n    bubblesData['forceSimulationData'] = {\n      xPull: cWidth/2,\n      xPullStrength: -0.01,\n      yPull: cHeight/2,\n      yPullStrength: -0.01,\n      collisionStrengh: 0.99,\n      collisionIterations: 1,\n      velocityDecay: 0.65\n    }\n\n    if(data.reset) bubblesData['reset'] = data.reset;\n\n    if(data.setUpdateReference) bubblesData['setUpdateReference'] = data.setUpdateReference;\n    if(data.setBubbleChart) bubblesData['setBubbleChart'] = data.setBubbleChart;\n\n    this.setWindowResize();\n\n    return bubblesData;\n  }\n\n  setAllBubblesFromApolloQuery( data: any, reset = true ) {\n    const response = data.source;\n   // if ( !response || !response.entitiesData ) {return; }\n    this.allBubbles = [];\n\n    if ( data.selectedBubbles ) {\n      this.selectedBubbles = data.selectedBubbles;\n    }\n\n    if( response.entitiesData ) {\n\n      for ( let i = 0 ; i < response.entitiesData.length; i++ ) {\n\n        this.allBubbles.push({\n          ...response.entitiesData[i],\n          color: this.options.configKeys[response.entitiesData[i].entity.typeOfEntity.replace(\" \", \"-\")] ? this.options.configKeys[response.entitiesData[i].entity.typeOfEntity.replace(\" \", \"-\")]['color']['hex'] : \"\"\n        })\n      }\n\n    }\n    else {\n      for ( let i = 0; i < response.relatedEntities.length; i++ ){\n        const color = this.options.configKeys ?\n          this.options.configKeys[response.relatedEntities[i].entity.typeOfEntity.replace(\" \", \"-\")] ? this.options.configKeys[response.relatedEntities[i].entity.typeOfEntity.replace(\" \", \"-\")]['color']['hex'] : \"\" :\n          null;\n        this.allBubbles.push(\n          {\n            id: this.convertEntityIdToBubbleId( response.relatedEntities[i].entity.id ),\n            ...response.relatedEntities[i],\n            color: color\n          });\n      }\n    }\n\n    this.entityBubbleIdMap = {};\n    this.allBubbles.forEach( (bubble) => {\n      // d3/svg does not allow Number as beginning of ID.\n      // d3/svg does not allow '-' as part of ID.\n      bubble.id = this.convertEntityIdToBubbleId(bubble.entity.id);\n      this.entityBubbleIdMap[bubble.id] = bubble.entity.id;\n      return bubble;\n    });\n    this.allBubbles.forEach( (bubble) => {\n      bubble.selected = false;\n      for( var i = 0; i < this.selectedBubbles.length; i++ ){\n        if ( this.selectedBubbles[i].id === bubble.id ) {\n          bubble.selected = true;\n        }\n      }\n    });\n\n    if(reset) {\n      this.update(data);\n    }\n  }\n\n  private convertEntityIdToBubbleId(entityId: string): string {\n    if ( !entityId ) { return null; }\n    return ( 'B_' + entityId.replace(/-/g, '_') );\n  }\n\n  filterBubblesBasedOnFacetsEnabled() {\n    var count = 0;\n    let result = this.allBubbles.filter(\n      (bubble) => {\n        for ( var i = 0; i < this.facetData.length; i++ ){\n          if (bubble.entity.typeOfEntity.replace(/ /g, '-') === this.facetData[i].type.replace(/ /g, '-') ) {\n            if ( !this.facetData[i].enabled ) { return false; }\n          }\n        }\n        if( count > this.options.maxNumber ) {\n          return false;\n        }\n        count++;\n        return true;\n      }\n    );\n    return result;\n  }\n\n  onBubbleMouseEnter(payload){\n    if ( !payload || !payload.bubble ) return;\n    const bubbleId = payload.bubble.id;\n    let hoverEntityId = this.entityBubbleIdMap[payload.bubble.id];\n    for (var i = 0; i < this.allBubbles.length; i++ ){\n      let bubble = this.allBubbles[i];\n      if ( bubble.entity.id===hoverEntityId ){\n        this.currentHoverEntity = bubble.entity;\n        this.currentHoverEntity.count = bubble.count;\n        break;\n      }\n    }\n    if(this.bubblePopup){\n      this.bubblePopup.hide();\n      this.bubblePopup.destroy();\n      this.bubblePopup = null;\n    }\n    setTimeout( () => {\n      let template = document.getElementById(\"bubble-popup-menu\");\n      let templateClone = template.cloneNode(true);\n      templateClone['style'].display = \"inline-block\";\n      this.bubblePopup = this.tippy(`#${bubbleId}`, {\n        content: templateClone,\n        allowHTML: true,\n        trigger: 'manual',\n        interactive: true,\n        arrow: true,\n        theme: 'light-border no-padding',\n        placement: 'top',\n        maxWidth: 500,\n        //onHidden: () => console.log('hidden'),\n      })[0];\n      setTimeout( () => { if(this.bubblePopup) this.bubblePopup.show() } , 800 );\n    });\n  }\n\n  destroyTooltip(){\n    if(this.bubblePopup){\n      this.bubblePopup.hide();\n      this.bubblePopup.destroy();\n      this.bubblePopup = null;\n    }\n  }\n\n  onBubbleTooltipClick(source:string, payload){\n    switch(source){\n      case 'select':\n        if(!payload) return;\n        const bubbleId = this.convertEntityIdToBubbleId(payload.entityId);\n        if(!bubbleId) return;\n        let bubble = null;\n        if(payload._bubbleChart){\n          payload._bubbleChart.selectAll(`g`).each( b => {\n            if(b.id===bubbleId) bubble=b;\n          });\n          if(bubble) return bubble;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  public onBubbleSelected(bubble){\n    if(bubble){\n      if(!this.selectedBubbles.includes(bubble)){\n        if(this.selectedBubbles.length<this.maxBubblesSelectable){\n          this.selectedBubbles.push(bubble);\n          //return this.filterRequest();\n        }\n      }\n    }\n  }\n\n  public getBubbleFromId(id){\n    const bubbleId = this.convertEntityIdToBubbleId(id);\n    if(!bubbleId) return;\n    let bubble = null;\n    if(this._bubbleChart){\n      this._bubbleChart.selectAll(`g`).each( b => {\n        if(b.id===bubbleId) bubble=b;\n      });\n      if(bubble) return bubble;\n    }\n  }\n\n  getSelectedBubbles() {\n    return this.selectedBubbles;\n  }\n\n  getAllBubbles() {\n    return this.allBubbles;\n  }\n\n  getEntityIdMap() {\n    return this.entityBubbleIdMap;\n  }\n\n  setWindowResize() {\n    if( !this.windowResizeSet){\n      fromEvent( window , \"resize\" ).pipe(debounce(() => interval(200))).\n      subscribe( () => {\n        // only resets the bubbles if the window's width has changed\n        // (if the resize only effects the window's hight then the bubble chart\n        // doesn't get reset)\n          const container = document.getElementById(this.options.containerId);\n          //check if element is visible on page\n          if(container.offsetParent != null) {\n\n            let bubblePayload = {\n              width: container.offsetWidth,\n              reset: true\n            };\n            this.update(bubblePayload);\n          }\n        })\n        this.windowResizeSet = true;\n    }\n\n  }\n\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class AwHeroDS extends DataSource {\n  protected transform(data){\n    const { title, text, button, backgroundImage, input } = data;\n\n    return {\n      title,\n      text,\n      backgroundImage,\n      button: {\n        text: button.text,\n        payload: \"cerca\"\n      },\n      input: {\n        placeholder: input.placeholder,\n        payload: \"cerca-in-maxxi\"\n      }\n    };\n  }\n}","import { DataSource } from '@n7-frontend/core';\nimport { TABLE_MOCK } from '@n7-frontend/components';\n\nexport class AwTableDS extends DataSource {\n\n  protected transform(data){\n    return TABLE_MOCK;\n  }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwHomeHeroPatrimonioDS extends DataSource {\n\n  protected transform(data) {\n    const { title, backgroundImage, image, text, button } = data;\n\n    return {\n      title,\n      backgroundImage,\n      image,\n      text,\n      button: {\n        text: button.text,\n        payload: \"naviga-patrimonio\"\n      }\n    };\n  }\n}","import { DataSource } from '@n7-frontend/core';\nimport tippy from 'tippy.js';\n\nexport class AwHomeFacetsWrapperDS extends DataSource {\n  private autoComplete = {};\n\n  protected transform({ facetData, lockedFacets }) {\n    const headers: any[] = [];\n    const inputs: any[] = [];\n\n    // when facet data changes, destroy every tippy and reset autocomplete data.\n    Object.keys(this.autoComplete).forEach( id => {\n      if (this.autoComplete[id] && this.autoComplete[id].tippy) {\n        this.autoComplete[id].tippy.destroy()\n      }\n    })\n    this.autoComplete = {} // reset\n\n    facetData.forEach(facet => {\n      /*\n       For each facet on back-end, push a header-component\n       and a facet-component (search input only) to each array.\n       */\n      if (Object.keys(lockedFacets).length) {\n        if (lockedFacets[facet.type]) {\n          // if bubble chart say lock this facet, lock it\n          facet.locked = true;\n        } else {\n          facet.locked = false;\n        }\n      }\n\n      const headerClasses = [];\n      const iconClasses = [facet.icon];\n      if (!facet.enabled) { headerClasses.push('is-disabled'); }\n      if (facet.configKey) {\n        headerClasses.push(`color-${facet.configKey}`);\n        iconClasses.push(`color-${facet.configKey}`);\n      }\n      // make array of headers data\n      headers.push({\n        iconLeft: iconClasses.join(' '),\n        text: facet.label,\n        additionalText: facet.count,\n        iconRight: facet.enabled ? 'n7-icon-eye' : 'n7-icon-eye-slash',\n        classes:\n          headerClasses.join(' ') +\n          (facet.locked\n            ? ' is-blocked'\n            : // if every other facet is disabled  Lock this facet\n            facetData.every(f => {\n              return !f.enabled || f.type === facet.type;\n            })\n              ? ' is-blocked'\n              : ' not-blocked'),\n        payload: facet.type.replace(/ /g, '-')\n      });\n      // make array of inputs data\n      inputs.push({\n        sections: [\n          {\n            inputs: [\n              {\n                type: 'text',\n                placeholder: facet['input-placeholder'],\n                icon: 'n7-icon-search',\n                disabled: !facet.enabled,\n                inputPayload: String(facet.type) + '-search',\n                iconPayload: String(facet.type) + '-search',\n                enterPayload: String(facet.type) + '-search',\n                classes: String(facet.type.replace(' ', '-')) + '-search'\n              }\n            ]\n          }\n        ]\n      });\n    });\n    // zipping arrays to render widgets with separate data (see home-layout.html)\n    const widgetData: any[] = [];\n    headers.map((h, i) => {\n      widgetData.push({ header: h, input: inputs[i] });\n    });\n    return widgetData;\n  }\n\n  public tippyMaker = (res, id) => {\n    id = id.replace(/ /g, '-')\n    // create data for this facet\n    if (!this.autoComplete[id]) {\n      this.autoComplete[id] = {\n        tippy: undefined, // tippy data / config\n        open: true // show or hide tippy\n      };\n      const ac = this.autoComplete[id];\n      const getContent = () => {\n        const contentNode = document.getElementsByClassName(\n          'aw-simple-autocomplete__' + id.replace(/-search/, '')\n        )[0];\n        contentNode.setAttribute('style', 'display: block');\n        return contentNode;\n      }\n\n      if (!ac.tippy) {\n        const target = '.' + id; // target the correct this.autoComplete[id] input class\n        ac.tippy = tippy(target, {\n          content: getContent(),\n          trigger: 'manual',\n          interactive: true,\n          arrow: false,\n          flip: false,\n          appendTo: 'parent',\n          theme: 'light-border aw-home__facet-tippy',\n          placement: 'bottom-start',\n          maxWidth: '100%',\n        })[1]; // attach tippy to input type text\n      }\n    }\n\n    const ac = this.autoComplete[id];\n    if (res.results.length > 0 && ac.tippy) {\n      ac.tippy.show();\n    } else {\n      ac.tippy.hide();\n    }\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class AwHomeItemTagsWrapperDS extends DataSource {\n\n  protected transform(data) {\n    return data;\n  }\n}","import { DataSource } from '@n7-frontend/core';\nimport helpers from '../../common/helpers';\n\nexport class AwHomeAutocompleteDS extends DataSource {\n  protected transform(data) {\n    const { results, totalCount } = data,\n      { config } = this.options,\n      labels = this.options.labels || {},\n      itemIds = [],\n      groups = {};\n\n    results.forEach(({ item, entity }) => {\n      const groupId = entity ? entity.typeOfEntity.replace(' ', '-') : 'oggetto-culturale',\n        groupConfig = config[groupId],\n        mainMetadata = groupConfig['main-metadata'],\n        currentItem = item || entity;\n\n      if (!groups[groupId]) {\n        const { label, icon } = groupConfig;\n        groups[groupId] = {\n          title: label,\n          icon,\n          classes: `color-${groupId}`,\n          items: []\n        };\n      }\n\n      if (itemIds.indexOf(currentItem.id) === -1) {\n        const metadata = [];\n        if (currentItem.fields) {\n          currentItem.fields.forEach(({ key, value }) => {\n            if (mainMetadata && key === mainMetadata) {\n              metadata.push({ key: helpers.prettifySnakeCase(key, labels[key]), value });\n            }\n          });\n        }\n        groups[groupId].items.push({\n          title: currentItem.label,\n          metadata,\n          payload: {\n            source: 'item',\n            id: currentItem.id\n          }\n        });\n      }\n    });\n\n    return {\n      results: Object.keys(groups).map(key => ({\n        group: {\n          title: groups[key].title,\n          icon: groups[key].icon,\n          classes: groups[key].classes\n        },\n        items: groups[key].items\n      })),\n      actions: {\n        showMore: {\n          text: `Visualizza tutti i ${totalCount} risultati`,\n          payload: {\n            source: 'showMore'\n          }\n        }\n      },\n      fallback:\n        'Spiacenti, non  stato trovato nessun risultato. <br> Riprova con una nuova ricerca.'\n    };\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class AwEntitaNavDS extends DataSource {\n\n  protected transform( param ){\n    if (!param) return;\n    const data = param.data\n    const selected = param.selected\n    const navigation = { items: [], payload: 'entita-nav' }\n\n    navigation.items.push({\n      text: 'OVERVIEW',\n      payload: 'overview',\n      classes: selected == 'overview' ? 'is-selected' : ''\n    })\n    if (data.fields && data.fields.length > 0) {\n      navigation.items.push({\n        text: 'CAMPI',\n        payload: 'campi',\n        classes: selected == 'campi' ? 'is-selected' : ''\n      })\n    }\n    if (data.relatedItems) {\n      navigation.items.push({\n        text: 'OGGETTI-COLLEGATI',\n        payload: 'oggetti-collegati',\n        classes: selected == 'oggetti-collegati' ? 'is-selected' : ''\n      })    }\n    if (data.relatedEntities && this.options['bubblesEnabled']) {\n      navigation.items.push({\n        text: 'ENTIT COLLEGATE',\n        payload: 'entita-collegate',\n        classes: selected == 'entita-collegate' ? 'is-selected' : ''\n      })    }\n    if (data.extraTab) {\n      navigation.items.push({\n        text: 'MAXXI',\n        payload: 'maxxi',\n        classes: selected == 'maxxi' ? 'is-selected' : ''\n      })    }\n    if (data.wikiTab) {\n      navigation.items.push({\n        text: 'WIKIPEDIA',\n        payload: 'wiki',\n        classes: selected == 'wiki' ? 'is-selected' : ''\n      })    }\n    return navigation\n  }\n}","import { DataSource } from \"@n7-frontend/core\";\nimport helpers from \"../../common/helpers\";\n\nexport class AwEntitaMetadataViewerDS extends DataSource {\n  protected transform(data) {\n    /*\n      Access and use this.options if the rendering\n      changes based on context.\n    */\n\n    let { labels } = this.options;\n    labels = labels || {};\n\n    const unpackedData = AwEntitaMetadataViewerDS.unpackFields(data);\n    // prettify labels\n    unpackedData.forEach(section => {\n      section.items\n        .filter(item => item.label)\n        .forEach(item => item.label = helpers.prettifySnakeCase(item.label, labels[item.label]));\n    });\n    return {\n      group: unpackedData\n    };\n  }\n\n  static unpackFields(fields) {\n    /*\n      Recursive unpacking for rendering res.fields\n      - - -\n      This function transforms the response object tree\n      into an array, usable by metadata-viewer-component\n    */\n    var extracted = []; // holds transformed object\n    // if the server returns an array of key-value tuples\n    if (fields instanceof Array) {\n      extracted = fields.map(el => {\n        return { label: el.key, value: el.value };\n      });\n      return [{ items: extracted }];\n    }\n    if (!fields) return []; // if is empty  quit\n    for (let i = 0; i < fields.length; i++) {\n      var thisField = fields[i]; // rename current field\n      var title = thisField.label; // field title\n      var label = thisField.key; // item label\n      var value = thisField.value; // item value\n      var group = thisField.fields; // child group\n      var temp: any = {}; // temporary object\n\n      if (title) {\n        // if there is a title, use it\n        temp.title = title;\n      }\n      if (label && value) {\n        // if there are a lable and value, use them\n        temp.label = label;\n        temp.value = value;\n      }\n      if (group) {\n        // if there is a child group\n        if (group[0].key) {\n          // if this group has a tuple of (label, value)\n          temp.items = AwEntitaMetadataViewerDS.unpackFields(group); // make items array\n        } else {\n          temp.group = AwEntitaMetadataViewerDS.unpackFields(group); // make child group array\n        }\n      }\n      extracted.push(temp); // add this object to the new array\n    }\n    return extracted;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class AwTreeDS extends DataSource {\n\n  public currentItem: any;\n  public icons: any;\n\n  protected transform(data) {\n    this.icons = this.options.icons\n    return data;\n  }\n\n  updateTree(data, parents, id) {\n\n    const tree = this.updateTreeData(data, parents, id);\n    this.update(tree);\n\n  }\n  private updateTreeData(data, parents, id){\n    if ( !data ) {\n      data = this.output;\n    }\n    data.items.forEach( (it) => {\n      const classes = it['classes'];\n      if( it['_meta'] == id ) {\n        if ( classes && classes.indexOf('is-expanded') > -1 ) {\n          it['classes'] = classes.replace(/is-expanded/g, 'is-collapsed');\n          if ( it['toggle'] ){\n            it['toggle']['icon'] = 'n7-icon-angle-right';\n          }\n        } else {\n          it['classes'] = classes.replace(/is-collapsed/g, 'is-expanded');\n          if ( it['toggle'] ){\n            it['toggle']['icon'] = 'n7-icon-angle-down';\n          }\n        }\n      } else if ( parents && parents.indexOf( it['_meta'] ) >= 0 ) {\n          it['classes'] = classes.replace(/is-collapsed/g, 'is-expanded');\n          if ( it['toggle'] ){\n            it['toggle']['icon'] = 'n7-icon-angle-down';\n          }\n      }\n      if( typeof it['items'] != 'undefined' && it['items'].length > 0 ) {\n        this.updateTreeData(it, parents, id);\n      }\n    });\n    return data;\n  }\n\n  selectTreeItem(id, data){\n    if ( !data ) {\n      data = this.output;\n    }\n\n    if( this.currentItem && this.currentItem[\"_meta\"] == id ){\n      return;\n    }\n\n    data.items.forEach( (it) => {\n        if ( it['_meta'] == id && it['classes'].indexOf('is-active') < 0 ) {\n            it['classes'] = it['classes'] + ' is-active';\n            this.currentItem = it;\n        } else {\n          const classes = it['classes'];\n          it['classes'] = classes.replace(\"is-active\", \"\");\n        }\n        if( typeof it['items'] != \"undefined\" && it['items'].length > 0 ) {\n          this.selectTreeItem(id, it);\n        }\n    });\n    this.update(data);\n  }\n\n  toggleSidebar() {\n    let sidebarData = this.output;\n    if ( sidebarData.classes == \"is-expanded\" ) {\n      sidebarData.classes = \"is-collapsed\";\n    } else {\n        sidebarData.classes = \"is-expanded\";\n    }\n    this.update(sidebarData);\n  }\n\n  public parseData(response) {\n    let treeObj = {\n      items: []\n    };\n\n    var data = response['tree'];\n    if( data['branches'] && data['branches'].length > 0 ) {\n      data['branches'].forEach( item => {\n        treeObj['items'].push( this.parseTree(item, false, []) );\n      });\n    }\n    this.update(treeObj);\n    if (response['currentItem'] == response['currentItem'] != null) {\n      //this.currentItem = response['currentItem'];\n      this.selectTreeItem(response['currentItem'], null);\n      this.updateTree(null, this.currentItem.parents, response['currentItem']);\n\n    }\n  }\n\n  private parseTree(data, toggle, parents) {\n    var currParents = [...parents];\n    let treeItem = {};\n    const showToggle =  toggle && data['branches'] != null && data['branches'].length > 0 ;\n    if( showToggle ){\n      treeItem['toggle'] = {\n        icon: 'n7-icon-angle-right',\n        payload: {\n            source: \"toggle\",\n            id: data['id'],\n            parents: currParents,\n          }\n      }\n    }\n    Object.keys(data).forEach( key => {\n    if( key != \"branches\" ) {\n      switch (key) {\n        case \"label\": treeItem['text'] = data[key]; break;\n        case \"img\" : treeItem['img'] = data[key]; break;\n        case \"icon\" :\n            if (showToggle && data[key] != null){\n              treeItem['toggle']['icon'] = data[key];\n            } else {\n              treeItem['icon'] = data[key];\n            }\n            break;\n        case \"id\" :\n            treeItem['_meta'] =  data[key];\n            treeItem['payload'] = {\n              source: \"menuItem\",\n              id: data['id']\n            };\n            break;\n        default :  data[key]; break;\n      }\n      treeItem['classes'] = 'is-collapsed';\n      treeItem['parents'] = currParents;\n\n    }\n    else if( data['branches'] != null ) {\n      currParents.push(data['id']);\n\n      /*Handle cases with menu item with children but without toggle*/\n      if( !toggle ) {\n        treeItem['payload']['source'] = \"ToggleMenuItem\";\n        treeItem['payload']['parents'] = currParents;\n      }\n\n      treeItem['items'] = [];\n      data[key].forEach( item => {\n        if ( item['img'] != \"\" && item['img'] != null ) {\n          treeItem['iconright'] = \"n7-icon-images\";\n        }\n\n        treeItem['items'].push( this.parseTree(item, true, currParents) );\n      })\n    }\n    })\n    return treeItem;\n  }\n\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwSidebarHeaderDS extends DataSource {\n\n  protected transform(data) {\n    return data;\n  }\n\n  toggleSidebar() {\n      let sidebarData = this.output;\n      if ( sidebarData.classes == 'is-expanded' ) {\n        sidebarData.classes = 'is-collapsed';\n        sidebarData.iconRight = 'n7-icon-tree-icon';\n\n      } else {\n        sidebarData.classes = 'is-expanded';\n        sidebarData.iconRight = 'n7-icon-angle-left';\n    }\n    this.update(sidebarData);\n  }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwSchedaBreadcrumbsDS extends DataSource {\n\n  protected transform(data) {  \n    return data;\n  }\n\n  toggleSidebar() {\n      let sidebarData = this.output;    \n      if ( sidebarData.classes == \"is-expanded\" ) {\n        sidebarData.classes = \"is-collapsed\";\n    } else {\n        sidebarData.classes = \"is-expanded\";\n    }\n    this.update(sidebarData);\n  }\n}","import { DataSource } from \"@n7-frontend/core\";\nimport helpers from \"../../common/helpers\";\n\nexport class AwSchedaMetadataDS extends DataSource {\n  protected transform(data) {\n    let { labels } = this.options;\n    labels = labels || {};\n\n    let group = { group: [] };\n    if (data.fields) {\n      data.fields.forEach(field => {\n        let items = [];\n        if (field.fields) {\n          field.fields.forEach(item => {\n            items.push({ label: helpers.prettifySnakeCase(item.key, labels[item.key]), value: item.value });\n          });\n\n          group.group.push({\n            title: field.label,\n            items: items\n          });\n        } else {\n          items.push({ label: helpers.prettifySnakeCase(field.key, labels[field.key]), value: field.value });\n          group.group.push({\n            items: items\n          });\n        }\n      });\n    }\n    return group;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class AwSchedaImageDS extends DataSource {\n\n  protected transform(data) {\n    return data;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class AwSchedaInnerTitleDS extends DataSource {\n\n  protected transform(data) {\n    return data;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class AwSearchLayoutTabsDS extends DataSource {\n  private selected: string = 'list';\n\n  protected transform(data){\n    return { \n      items: [{\n        text: 'LISTA', \n        payload: 'list',\n        classes: this.selected === 'list' ? 'is-selected' : ''\n      }, {\n        text: 'GRAFICO', \n        payload: 'chart',\n        classes: this.selected === 'chart' ? 'is-selected' : ''\n      }, {\n        text: 'TIMELINE', \n        payload: 'timeline',\n        classes: this.selected === 'timeline' ? 'is-selected' : ''\n      }] \n    }\n  }\n\n  public setSelected(tabId){\n    this.selected = tabId;\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwLinkedObjectsEH extends EventHandler {\n\n  public listen() {\n\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-linked-objects.click':\n          if (payload.startsWith('page')) {\n            // pagination routing is handled by the parent layout\n            this.emitOuter('pagination', payload)\n          } else if (payload.startsWith('goto')) {\n            let targetPage = Number(payload.replace('goto-', ''))\n            // kill impossible page navigations\n            if (targetPage > this.dataSource.totalPages) return;\n            else if (targetPage < 1 || targetPage === this.dataSource.currentPage) return;\n            else this.emitOuter('goto', payload)\n          } else {\n            this.emitOuter('click', payload);\n          }\n          break;\n        case 'aw-linked-objects.change': // changed page size value (pagination)\n          this.emitOuter('change', +payload.value)\n          break;\n        default:\n          console.warn('unhandled event type: ', type, ' with payload: ', payload)\n          break;\n      }\n    });\n\n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-home-layout.viewmore':\n          // ask home-layout for more data\n          this.dataSource.checkForMore(false)\n          this.emitOuter('datarequest', {\n            currentPage: this.dataSource.currentPage\n          })\n          break;\n        case 'aw-home-layout.dataresponse':\n          // handle incoming data from home-layout\n          let { res } = payload\n          this.dataSource.handleIncomingData(res)\n        case 'aw-home-layout.scroll':\n          this.handleScroll(payload)\n          break;\n        default:\n          break;\n      }\n    })\n  }\n\n  public handleScroll = target => {\n    /*\n      Check if the target element is scrolled near the end while data is not already loading.\n      If the condition is met, a request for more data is sent.\n    */\n    if (target.scrollTop + target.clientHeight >= target.scrollHeight - 150 && this.dataSource.loadedData.isLoading == false) {\n      this.dataSource.loadedData.isLoading = true\n      this.emitOuter('datarequest', {\n        currentPage: this.dataSource.currentPage\n      })\n    }\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwAutocompleteWrapperEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-autocomplete-wrapper.click':\n          if (payload != 'fallback-simple-autocomplete') { // if this is the fallback item, kill the event.\n            this.emitOuter('clickresult', payload)\n          }\n          break;\n        default:\n          console.warn('unhandled event of type:', type)\n          break;\n      }\n    });\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwBubbleChartEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(event => {\n      switch (event.type) {\n        case 'aw-bubble-chart.init':\n          break;\n        case 'aw-bubble-chart.click':\n          event.payload.entityIdmap = this.dataSource.getEntityIdMap();\n          event.payload.allBubbles = this.dataSource.getAllBubbles();\n          this.emitOuter('click', event.payload);\n          break;\n        case 'aw-bubble-chart.mouseenter':\n          const currBubble = this.dataSource.onBubbleMouseEnter(\n            {\n              bubblePayload:event.payload.bubblePayload,\n              bubble:event.payload.bubble\n            });\n          event.payload.currBubble = currBubble;\n          this.emitOuter('mouseenter', event.payload);\n          break;\n        case 'aw-bubble-chart.mouseleave':\n          this.emitOuter('mouseleave', event.payload);\n          break;\n        case \"aw-bubble-chart.bubble-tooltip-close-click\":\n            this.emitOuter('bubble-tooltip-close-click', event.payload);\n            break;\n        case \"aw-bubble-chart.bubble-tooltip-goto-click\":\n          this.emitOuter('bubble-tooltip-goto-click', event.payload);\n            break;\n        case \"aw-bubble-chart.bubble-tooltip-select-click\":\n          this.emitOuter('bubble-tooltip-select-click', event.payload);\n            break;\n        default:\n          console.warn('unhandled inner event of type', event.type)\n          break;\n      }\n    });\n\n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case \"aw-home-layout.bubble-tooltip-select-click\":\n              let selectData = {\n                'bubble': this.dataSource.onBubbleTooltipClick('select',payload),\n                'entityIdmap': this.dataSource.getEntityIdMap(),\n                'allBubbles': this.dataSource.getAllBubbles(),\n                'source': 'bubble'\n              };\n              this.emitOuter('click', selectData);\n              break;\n        case 'aw-home-layout.bubble-filter':\n          this.emitOuter('bubble-filtered',\n          {\n            'allBubbles': this.dataSource.getAllBubbles(),\n            'selected': this.dataSource.getSelectedBubbles()\n          });\n          break;\n        case 'aw-scheda-layout.filterbubbleresponse':\n        case 'aw-entita-layout.filterbubbleresponse':\n        case 'aw-home-layout.filterbubbleresponse':\n          if( payload.source ){\n            this.dataSource.setAllBubblesFromApolloQuery(payload, payload.reload);\n            this.emitOuter('bubble-filtered',\n            {\n              'allBubbles': this.dataSource.getAllBubbles(),\n              'selected': this.dataSource.getSelectedBubbles(),\n              'entityIdmap': this.dataSource.getEntityIdMap()\n            });\n          } else {\n            this.dataSource.update(payload);\n          }\n          break;\n      }\n    });\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHeroEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-hero.click':\n          // TODO\n          break;\n\n        case 'aw-hero.change':\n          this.emitOuter('change', payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeBubbleChartEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(event => {\n      switch (event.type) {\n        case 'aw-home-bubble-chart.click':\n          this.emitOuter('click',event.payload);\n          break;\n        case 'aw-home-bubble-chart.mouseenter':\n          this.emitOuter('mouseenter',event.payload);\n          break;\n        case 'aw-home-bubble-chart.mouseleave':\n          this.emitOuter('mouseleave',event.payload);\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeFacetsWrapperEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        // toggle visibility from facet header\n        case 'aw-home-facets-wrapper.click':\n          this.emitOuter('click', payload);\n          break;\n        // change search input text\n        case 'aw-home-facets-wrapper.change':\n          this.emitOuter('change', payload);\n          break;\n        // press return while typing in search\n        case 'aw-home-facets-wrapper.enter':\n          this.emitOuter('enter', payload);\n          break;\n        default:\n          console.warn('unhandled inner event of type:', type);\n          break;\n      }\n    });\n\n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-home-layout.facetswrapperresponse': // incoming autocomplete response\n          this.dataSource.tippyMaker(payload.response, payload.facetId.inputPayload);\n          break;\n        default:\n          // console.warn('unhandled outer event of type', type)\n          // silent ignore\n          break;\n      }\n    });\n  }\n\n}\n","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeHeroPatrimonioEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-home-hero-patrimonio.click':\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: ['aw/patrimonio']\n          });\n          break;\n        default:\n          break;\n      }\n    });\n    /*\n    this.outerEvents$.subscribe(event => {\n      \n    });\n    */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeItemTagsWrapperEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe( (event) => {\n      switch(event.type){\n        case \"aw-home-item-tags-wrapper.click\":\n          this.emitOuter('click',event.payload);\n          break;\n        default:\n          break;\n      }\n    });\n    /* this.outerEvents$.subscribe(event => {\n    \n    }); */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeAutocompleteEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case \"aw-home-autocomplete.click\":\n          this.emitOuter('click', payload);\n          break;\n          \n        default:\n          break;\n      }\n    });\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwEntitaNavEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({type, payload}) => {\n      switch(type) {\n        case 'aw-entita-nav.click':\n          this.emitOuter('click', payload)\n          break;\n        default:\n          console.warn('unhandled event type')\n          break;\n      }\n    });\n    /*\n\n    this.outerEvents$.subscribe(event => {\n      \n    });\n    */\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwSchedaSidebarEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {   \n      if( type == 'aw-sidebar-header.click'){\n        this.dataSource.toggleSidebar();\n        this.emitOuter(type, payload);\n      }\n    });\n\n    /* this.outerEvents$.subscribe(event => {\n    \n    }); */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwSidebarHeaderEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {   \n      if( type == 'aw-sidebar-header.click'){\n        this.dataSource.toggleSidebar();\n        this.emitOuter('click', payload);\n      }\n    });\n\n    /* this.outerEvents$.subscribe(event => {\n    \n    }); */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwTreeEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      if(payload && typeof payload.source != 'undefined'){\n        switch ( payload.source ) {\n          case 'toggle':         this.dataSource.updateTree( null, payload.parents, payload.id ); break;\n          case 'ToggleMenuItem': this.dataSource.updateTree( null, payload.parents, payload.id ); //no break, I want to execute also the following instruction\n          case 'menuItem':       this.dataSource.selectTreeItem( payload.id );\n                                 this.emitOuter('click', payload.id);\n                                  break;\n        }\n      }\n    });\n\n     this.outerEvents$.subscribe(({ type, payload }) => {\n        switch( type ){\n          case 'aw-sidebar-header.click': this.dataSource.toggleSidebar(); break;\n          case 'aw-scheda-layout.selectItem':\n            this.dataSource.selectTreeItem( payload );\n            if (typeof this.dataSource.currentItem !== 'undefined') {\n              this.dataSource.updateTree( null, this.dataSource.currentItem.payload.toggle.parents, payload );\n            } else {\n              console.warn('The object in the URL does not exist.')\n              // Maybe navigate to 404 here.\n            }\n            break;\n          case 'aw-scheda-layout.navigationresponse':\n            this.dataSource.parseData(payload); break;\n          }\n      });\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwSearchLayoutTabsEH extends EventHandler {\n\n  public listen() {\n    // TODO\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwTableEH extends EventHandler {\n\n  public listen() {\n    /*\n    this.innerEvents$.subscribe(event => {\n      \n    });\n\n    this.outerEvents$.subscribe(event => {\n      \n    });\n    */\n  }\n\n}","import { AwAboutLayoutDS } from './about-layout.ds';\nimport { AwAboutLayoutEH } from './about-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwAboutLayoutConfig = {\n  layoutId: 'aw-about-layout',\n  widgets: [],\n  layoutDS: AwAboutLayoutDS,\n  layoutEH: AwAboutLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  layoutOptions: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractLayout } from '../../../common/models/abstract-layout';\nimport { AwAboutLayoutConfig as config } from './about-layout.config';\n\n@Component({\n  selector: 'aw-about-layout',\n  templateUrl: './about-layout.html'\n})\nexport class AwAboutLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n  ){\n    super(config);\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n\n}","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwEntitaLayoutDS extends LayoutDataSource {\n  protected configuration: any;\n  protected mainState: any;\n  protected router: any;\n  protected location: any;\n  protected titleService: any;\n\n  public options: any;\n  public pageTitle: string;\n\n  public myResponse: any = {}; // backend response object\n  public selectedTab: string; // selected nav item\n  public navHeader: any = {}; // nav-header (custom) data\n  public currentId: string; // selected entity (url param)\n  public currentPage: any; // pagination value (url param)\n  public pageSize: number = 10; // linked objects page size\n  public bubblesSize: number = 10; // related entities (bubbles) page size\n  public bubblesEnabled: boolean;\n  public bubbleLoaded: boolean;\n\n  private communication: any;\n\n  onInit({ configuration, mainState, router, location, options, titleService, communication }) {\n    this.communication = communication;\n    this.configuration = configuration;\n    this.mainState = mainState;\n    this.options = options;\n    this.router = router;\n    this.location = location;\n    this.titleService = titleService;\n    this.currentId = \"\";\n    this.currentPage = 1;\n    this.bubbleLoaded = false;\n    this.bubblesEnabled = this.configuration.get('features-enabled') ? this.configuration.get('features-enabled')['bubblechart'] : false;\n    this.bubblesSize = this.configuration.get('entita-layout') ? this.configuration.get('entita-layout')['max-bubble-num'] : this.bubblesSize;\n  }\n\n  public updateComponent = (id, data, options?) => {\n    if (options) {\n      this.one(id).updateOptions(options)\n    }\n    this.one(id).update(data)\n  }\n\n  getNavigation(id) {\n    /*\n      Requests data from communication provider\n     */\n    return this.communication.request$('getEntityDetails', {\n      onError: (error) => console.error(error),\n      params: { entityId: id, entitiesListSize: this.bubblesSize }\n    })\n  }\n\n  /*\n    Updates selected tab on tab change\n  */\n  handlePageNavigation = () => {\n    this.one('aw-linked-objects').updateOptions({\n      context: this.selectedTab,\n      config: this.configuration,\n      page: this.currentPage,\n      pagination: true,\n      size: this.pageSize,\n    })\n    this.one('aw-linked-objects').update({items: this.myResponse.relatedItems});\n    this.location.go(\n      this.configuration.get(\"paths\").entitaBasePath\n        +\n        this.currentId\n        + '/oggetti-collegati/'\n        + this.currentPage\n    )\n  };\n\n  handleNavUpdate = tab => {\n    this.selectedTab = tab\n    this.updateWidgets(this.myResponse)\n    const page = tab == 'oggetti-collegati' ? \"/1\" : \"\";\n\n    if(tab == 'oggetti-collegati' ){\n      this.one('aw-linked-objects').updateOptions({\n        context: this.selectedTab,\n        config: this.configuration,\n        page: this.currentPage,\n        pagination: true,\n        size: this.pageSize,\n      })\n      this.one('aw-linked-objects').update({items: this.myResponse.relatedItems});\n    } else if (tab == \"overview\") {\n      this.one('aw-linked-objects').updateOptions({\n        size: 3,\n        config: this.configuration,\n        context: 'entita'\n      })\n      this.one('aw-linked-objects').update({items: this.myResponse.relatedItems});\n    }\n\n    if(tab == \"overview\" || tab == \"entita-collegate\"){\n      setTimeout( () => { this.updateBubbes(this.myResponse) } , 800 );\n    }\n\n    this.location.go(\n      this.configuration.get(\"paths\").entitaBasePath\n        +\n        this.currentId\n        + '/'\n        + tab\n        + page\n    )\n  }\n\n  /*\n    Updates the widgets on this layout, based on route\n  */\n  updateWidgets(data) {\n    const selected = this.selectedTab\n    this.one('aw-entita-nav').update({ data, selected })\n  }\n  updateBubbes(data) {\n    if(!this.bubbleLoaded){\n      this.one('aw-bubble-chart').update(data);\n      this.bubbleLoaded = true;\n    }\n  }\n\n  /*\n    Loads the data for the selected nav item, into the adjacent text block.\n  */\n  loadItem(id, tab) {\n    if (id && tab) {\n      this.currentId = id // store selected item from url\n      this.selectedTab = tab // store selected tab from url\n      return this.communication.request$('getEntityDetails', {\n        onError: error => console.error(error),\n        params: {entityId: id, entitiesListSize: this.bubblesSize}\n      })\n    }\n    else {\n      this.pageTitle = 'Entit Test'\n    }\n  }\n\n  loadContent(res) {\n    console.log('(entita) Apollo responded with: ', { res })\n    this.myResponse = res\n    this.navHeader = { // always render nav header\n      icon: this.configuration.get(\"config-keys\")[this.myResponse.typeOfEntity] ? this.configuration.get(\"config-keys\")[this.myResponse.typeOfEntity].icon : \"\",\n      text: this.myResponse.label,\n      color: this.myResponse.typeOfEntity\n    }\n\n    this.one('aw-entita-nav').updateOptions({bubblesEnabled: this.bubblesEnabled});\n    this.one('aw-bubble-chart').updateOptions({\n      context: 'scheda',\n      configKeys: this.configuration.get('config-keys'),\n      bubbleContainerId: 'overviewBubbleChartContainer',\n      containerId: 'bubble-chart-container-overview',\n    });\n    this.one('aw-entita-metadata-viewer').updateOptions({ context: this.selectedTab, labels: this.configuration.get(\"labels\") });\n    this.one('aw-entita-metadata-viewer').update(res.fields);\n\n    if( this.selectedTab == 'oggetti-collegati' ) {\n      this.one('aw-linked-objects').updateOptions({\n        context: this.selectedTab,\n        config: this.configuration,\n        page: this.currentPage,\n        pagination: true,\n        size: this.pageSize,\n      })\n    } else {\n      this.one('aw-linked-objects').updateOptions({\n        size: 3,\n        config: this.configuration,\n        context: 'entita'\n      })\n    }\n    this.one('aw-linked-objects').update({items: res.relatedItems});\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\n\nexport class AwEntitaLayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n  private configuration: any;\n  private route: any;\n  private entityId: string;\n  // private selectedTab: string;\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-entita-layout.init':\n          this.dataSource.onInit(payload);\n          this.configuration = payload.configuration;\n          this.route = payload.route;\n          this.entityId = this.route.snapshot.params.id || \"\";\n          this.dataSource.currentPage = this.route.snapshot.params.page || 1;\n          this.listenRoute(this.entityId);\n          //this.loadNavigation(this.entityId);\n          break;\n\n        case 'aw-entita-layout.destroy':\n          this.destroyed$.next();\n          break;\n\n        case 'aw-entita-layout.showmore':\n          if (payload) {\n            this.dataSource.handleNavUpdate(payload)\n            this.emitGlobal('navigate', {\n              path: [\n                this.configuration.get(\"paths\").entitaBasePath\n                + '/' +\n                this.entityId\n                + '/' +\n                payload\n              ],\n              handler: 'router'\n            });\n          }\n          break;\n\n        default:\n          break;\n      }\n    });\n\n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-entita-nav.click':\n          if (payload) {\n            this.dataSource.selectedTab = payload;\n            this.dataSource.handleNavUpdate(payload)\n          }\n          break;\n        case 'aw-linked-objects.pagination':\n          this.dataSource.currentPage = payload.split('-')[1];\n          this.dataSource.handlePageNavigation()\n          /*this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [`aw/entita/${this.route.snapshot.params.id}/oggetti-collegati/${payload.split('-')[1]}`]\n          });*/\n          break\n        case 'aw-linked-objects.goto':\n          this.dataSource.currentPage = Number(payload.replace('goto-', ''))\n          this.dataSource.handlePageNavigation()\n          // this.emitGlobal('navigate', {\n          //   handler: 'router',\n          //   path: [`aw/entita/${this.route.snapshot.params.id}/oggetti-collegati/${targetPage}`]\n          // });\n          break\n        case 'aw-linked-objects.change': // changed page size value (pagination)\n          this.dataSource.pageSize = payload;\n          this.dataSource.currentPage = 1 // reset page\n          let options = {\n            context: this.dataSource.selectedTab,\n            config: this.dataSource.configuration,\n            page: this.dataSource.currentPage,\n            pagination: true,\n            size: this.dataSource.pageSize,\n          }\n          this.dataSource.updateComponent(\n            'aw-linked-objects',\n            { items: this.dataSource.myResponse.relatedItems },\n            options\n          )\n        // this.listenRoute(\"\", true) // reloads the page content with the new page size\n        case \"aw-bubble-chart.bubble-tooltip-goto-click\":\n          if (!payload || !payload.entityId) return;\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [`aw/entita/${payload.entityId}`]\n          });\n          break;\n        case 'aw-bubble-chart.bubble-filtered':\n          if (this.dataSource.selectedTab == \"overview\" || this.dataSource.selectedTab == \"entita-collegate\") {\n            payload.reload = true;\n            payload.reset = true;\n            this.emitOuter('filterbubbleresponse', payload);\n            //this.dataSource.updateBubbes(payload);\n          }\n          break;\n        case 'aw-linked-objects.click':\n          const paths = this.configuration.get('paths');\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [paths.schedaBasePath, payload]\n          });\n          break;\n        default:\n          break;\n      }\n    })\n\n  }\n\n  /**\n   * Listens to routing events of this layout.\n   */\n  private listenRoute(selectedItem = \"\", forceReload = false) {\n    // get URL parameters with angular's paramMap\n    this.route.paramMap.subscribe(params => {\n      // look for id\n      if (params.get('id')) {\n        if (this.dataSource.currentId == params.get('id') && !forceReload) return;\n        // get item from response with id === id and return as promise\n        this.dataSource.loadItem(params.get('id'), params.get('tab')).subscribe(res => {\n          if (res) {\n            this.dataSource.loadContent(res);\n            this.dataSource.bubbleLoaded = false;\n            let connectedEntities = {\n              source: res,\n              reload: false\n            };\n\n            this.emitOuter('filterbubbleresponse', connectedEntities);\n\n            this.dataSource.updateWidgets(res);\n            if (selectedItem) {\n              this.emitOuter('selectItem', selectedItem);\n            }\n          }\n        });\n      } else {\n        this.dataSource.loadItem();\n      }\n    });\n  }\n}","import { AwEntitaLayoutDS } from './entita-layout.ds';\nimport { AwEntitaLayoutEH } from './entita-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwEntitaLayoutConfig = {\n  layoutId: 'aw-entita-layout',\n  widgets: [ // array of components of this layout\n    { id: 'aw-entita-nav', hasStaticData: true},\n    { id: 'aw-entita-metadata-viewer' },\n    { id: 'aw-linked-objects'},\n    { id: 'aw-bubble-chart'},\n  ],\n  layoutDS: AwEntitaLayoutDS,\n  layoutEH: AwEntitaLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Title } from '@angular/platform-browser';\nimport { AbstractLayout } from \"../../../common/models/abstract-layout\";\nimport { ConfigurationService } from '../../../common/services/configuration.service';\nimport { LayoutsConfigurationService } from '../../../common/services/layouts-configuration.service';\nimport { MainStateService } from '../../../common/services';\nimport { AwEntitaLayoutConfig as config } from './entita-layout.config';\nimport { CommunicationService } from '../../../common/services';\n\n@Component({\n  selector: 'aw-entita-layout',\n  templateUrl: './entita-layout.html'\n})\nexport class AwEntitaLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private location: Location,\n    private configuration: ConfigurationService,\n    private layoutsConfiguration: LayoutsConfigurationService,\n    private communication: CommunicationService,\n    private mainState: MainStateService,\n    private titleService: Title\n  ) {\n    super(layoutsConfiguration.get('AwEntitaLayoutConfig') || config);\n  }\n\n  /*\n    Optional variables that can be accessed from the layout's logic.\n    If removed, they must also be removed from the layout's DataSource file,\n    and from this file imports.\n   */\n  protected initPayload() {\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      router: this.router,\n      route: this.route,\n      location: this.location,\n      titleService: this.titleService,\n      communication: this.communication,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit() {\n    this.onInit();\n  }\n\n  ngOnDestroy() {\n    this.onDestroy();\n  }\n}","import { LayoutDataSource } from '@n7-frontend/core';\nimport { fromEvent, Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\nexport class AwHomeLayoutDS extends LayoutDataSource {\n  private communication: any;\n  private mainState: any;\n  private tippy: any;\n  private configuration: any;\n  private facetData: any[] = null;\n  private lockedFacets = {};\n  private lockLastFacet: boolean = false;\n  private facetInputs: any = {};\n  // all the bubbles as they have been given by apollo\n  // (the objects in the allBubbles are not the same bubble objects\n  // present in the bubble chart)\n  private allBubbles: any[] = null;\n  private autocompletePopover: any;\n  private autocompletePopoverOpen: boolean = false;\n  private autocompleteChanged$: Subject<string> = new Subject();\n  // the bubbles currently selected (these are saved from the event handler's\n  // and correspond exactly to the bubblechart's bubble objects)\n  public selectedBubbles: any[] = [];\n  public numOfItemsStr: string = null;\n  // instance of the bubble chart (from which you can access all the various\n  // bubble objects)\n  private _bubbleChart: any = null;\n  // the maximum number of bubbles which can be selected at the same time\n  private maxBubblesSelectable: number = 3;\n  // entities have their own unique id, these ids are generic and are very flexible\n  // bubbles (as the bubble chart's objects) have unique ids but do not allow certain\n  // characters, so each bubble has its own id different from the id of the entity which\n  // the bubble represents (given an bubble's id called bubbleId you can obtain the\n  // respective entity's id with as: entityId = entityBubbleIdMap[bubbleId] )\n  private entityBubbleIdMap: any = {};\n  // widh of the window which is updated at each resize and it is used by the bubble\n  // chart to check if the width of the window has changed during the last resize\n  private lastWindowWidth: number = -1;\n  private bubblePopup: any = null;\n  public currentHoverEntity: any = null;\n  public hasScrollBackground: boolean = false;\n  public loadingBubbles = false;\n  public bubblesEnabled = false;\n  public resultsLimit = -1;\n  public selectedEntitiesIds = [];\n  public outerLinks:any;\n  public outerLinksTitle:string;\n  public homeAutocompleteQuery: string;\n\n  onInit({ communication, mainState, configuration, tippy }) {\n    this.communication = communication;\n    this.configuration = configuration;\n    this.facetData = [];\n    this.lastWindowWidth = window.outerWidth;\n    this.mainState = mainState;\n    this.tippy = tippy;\n    this.bubblesEnabled = this.configuration.get('features-enabled') ? this.configuration.get('features-enabled')['bubblechart'] : false;\n    this.resultsLimit = this.configuration.get('home-layout')['results-limit']\n\n    this.one('aw-hero').update(this.configuration.get('home-layout')['top-hero']);\n    this.one('aw-home-hero-patrimonio').update(this.configuration.get('home-layout')['bottom-hero']);\n    // update streams\n    this.mainState.update('headTitle', 'Arianna Web > Home');\n    this.mainState.update('pageTitle', 'Arianna Web: Home Layout');\n    this.mainState.updateCustom('currentNav', 'aw/home');\n    // listen autocomplete changes\n    this._listenAutoCompleteChanges();\n\n    this.outerLinks = this.configuration.get('home-layout')['outer-links']['test'];\n    this.outerLinksTitle = this.configuration.get('home-layout')['outer-links']['title'];\n  }\n\n  public makeRequest$(query, params) {\n    return this.communication.request$(query, {\n      onError: (error) => console.error(error),\n      params\n    });\n  }\n\n\n  public updateComponent = (id, data, options?) => {\n    if (options) {\n      this.one(id).updateOptions(options)\n    }\n    this.one(id).update(data)\n  }\n\n  initialFilterRequest() {\n    return this.communication.request$('globalFilter', {\n      onError: (error) => console.error(error),\n      params: {\n        entitiesListSize: this.configuration.get(\"home-layout\")['max-bubble-num'] * 4\n      },\n    })\n  }\n\n  parseInitialRequest(response) {\n    response.typeOfEntityData.forEach((toe) => {\n      const teoConfigData = this.configuration.get(\"config-keys\")[toe.type.replace(\" \", \"-\")];\n      this.facetData.push({\n        ...toe,\n        enabled: true,\n        locked: false,\n        configKey: toe.type.replace(\" \", \"-\"),\n        ...teoConfigData\n      });\n    });\n    this.one('aw-home-facets-wrapper').update({\n      facetData: this.facetData,\n      lockedFacets: this.lockedFacets\n    });\n    this.one('aw-bubble-chart').updateOptions({\n      context: 'home',\n      configKeys: this.configuration.get(\"config-keys\"),\n      bubbleContainerId: 'bubbleChartContainer',\n      containerId: 'bubble-chart-container',\n      maxNumber: this.configuration.get(\"home-layout\")['max-bubble-num']\n    });\n    this.renderPreviewsFromApolloQuery(response);\n  }\n\n  renderPreviewsFromApolloQuery(response: any) {\n    if (!response || !response.itemsPagination) {\n      return\n    };\n    let numOfItems = response.itemsPagination.totalCount;\n    if (numOfItems > 0) {\n      let numOfThousand = 0;\n      while (numOfItems > 999) {\n        numOfItems -= 1000;\n        numOfThousand += 1;\n      }\n      let numOfItemsTmpStr = numOfItems + '';\n      if (numOfItems < 10) numOfItemsTmpStr = '00' + numOfItems;\n      else if (numOfItems < 100) numOfItemsTmpStr = '0' + numOfItems;\n      if (numOfThousand > 0)\n        this.numOfItemsStr = numOfThousand + '.' + numOfItemsTmpStr;\n      else\n        this.numOfItemsStr = numOfItems + '';\n    } else {\n      this.numOfItemsStr = null;\n    }\n    this.one('aw-linked-objects').updateOptions({\n      context: 'home',\n      config: this.configuration,\n      // page: 1,\n    })\n    this.one('aw-linked-objects').update(response.itemsPagination);\n    if (document.getElementById('bubble-results-list')) { \n      // reset scroll position of result list\n      document.getElementById('bubble-results-list').scrollTo(0,0)\n    }\n  }\n\n  onBubbleTooltipClick(source: string, payload) {\n    switch (source) {\n      case 'select':\n        if (!payload) return;\n        const bubbleId = payload.bubbleId;\n        if (!bubbleId) return;\n        let bubble = null;\n        if (this._bubbleChart) {\n          this._bubbleChart.selectAll(`g`).each(b => {\n            if (b.id === bubbleId) bubble = b;\n          });\n          if (bubble) this.onBubbleSelected(bubble);\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  public onBubbleSelected(bubble) {\n    if (bubble) {\n      if (!this.selectedBubbles.includes(bubble)) {\n        if (this.selectedBubbles.length < this.maxBubblesSelectable) {\n          this.loadingBubbles = this.selectedBubbles.length == 0;\n          this.selectedBubbles.push(bubble);\n          return true;\n        }\n      }\n    }\n    return null;\n  }\n\n  public onBubbleDeselected(payload) {\n    if (payload && payload.bubble) {\n      this.selectedBubbles = this.selectedBubbles.filter(\n        (b) => b.id !== payload.bubble.id);\n      if (payload.bubble.hasCloseIcon) {\n        payload.bubble.hasCloseIcon = false;\n        return this.filterRequest();\n      }\n    }\n  }\n\n  public getBubblePayload(response) {\n    let bubblePayload = {\n      reset: true,\n      setBubbleChart: (bubbleCref) => this._bubbleChart = bubbleCref,\n      facetData: this.facetData,\n      source: response,\n      selectedBubbles: this.selectedBubbles\n    };\n    return bubblePayload;\n  }\n\n  private filterRequest() {\n    if (this.entityBubbleIdMap) {\n      let k = this.configuration.get('config-keys')\n      let activeBubbles = {\n        places: false,\n        people: false,\n        concepts: false,\n        organizations: false,\n      }\n      if (this.selectedBubbles.length <= 0) {\n        this.selectedEntitiesIds = [];\n      }\n      this.selectedBubbles.forEach((sB) => {\n        let c = sB.color\n        let findTypeFromColor = (obj, color) => {\n          return Object.keys(obj).find(key => obj[key].color.hex === color)\n        }\n        activeBubbles[findTypeFromColor(k, c)] = true\n        let entityId = this.entityBubbleIdMap[sB.id];\n        if (entityId)\n          this.selectedEntitiesIds.push(entityId);\n      });\n      this.lockedFacets = activeBubbles\n      this.one('aw-home-facets-wrapper').update({\n        facetData: this.facetData,\n        lockedFacets: this.lockedFacets\n      });\n    }\n    return this.communication.request$('globalFilter', {\n      onError: (error) => console.error(error),\n      params: {\n        selectedEntitiesIds: this.selectedEntitiesIds,\n        itemsPagination: {\n          offset: 0,\n          limit: this.resultsLimit\n        }\n      },\n    })\n  }\n\n  public updateBubbles(response, onlyBubbles?: boolean) {\n    if (!onlyBubbles) {\n      this.renderPreviewsFromApolloQuery(response);\n    }\n  }\n\n  public updateBubbleFilter(data) {\n    this.allBubbles = data.allBubbles;\n    this.entityBubbleIdMap = data.entityIdmap;\n  }\n\n  public updateTags(onlyBubbles?: boolean) {\n    if (!onlyBubbles) {\n      this.renderItemTags();\n    }\n  }\n\n  filterBubblesBasedOnFacetsEnabled() {\n    let result = this.allBubbles.filter(\n      (bubble) => {\n        for (var i = 0; i < this.facetData.length; i++) {\n          if (bubble.entity.typeOfEntity.id === this.facetData[i].type.id)\n            if (!this.facetData[i].enabled) { return false; }\n        }\n        return true;\n      }\n    );\n    return result;\n  }\n\n  handleFacetSearchChange(change) {\n    var payload: string = change.inputPayload;\n    var value: string = change.value;\n    // store the entered text in facetInputs\n    this.facetInputs[payload] = value;\n  }\n\n  handleFacetSearchEnter(enter) {\n    var payload: string = enter.inputPayload;\n    // get the text entered in this input\n    var value: string = this.facetInputs[payload];\n  }\n\n  handleFacetHeaderClick(facetId) {\n    let updateBubbles = false;\n    let enabledFacets = this.facetData.filter(f => f.enabled).length;\n    this.facetData.forEach(f => {\n      f.type = f.type.replace(/ /g, '-') // fix for space in facet type string ('cose notevoli')\n      if (f.type === facetId && f.locked === true) {\n        // if user clicked on a locked facet, ignore it\n        return\n      }\n      if (f.type === facetId && f.enabled === true && enabledFacets < 1) {\n        return\n      }\n      if (f.type === facetId) { // if this is the clicked facet\n        console.log(`${f.type} is the clicked facet`)\n        if (f.enabled && enabledFacets > 1) {\n          f.enabled = false;\n          f.locked = false;\n          updateBubbles = true;\n        } else {\n          f.enabled = true;\n          f.locked = false;\n          updateBubbles = true;\n        }\n      } else { // if this is another facet\n        if (enabledFacets <= 2 && f.enabled) {\n          f.locked = true;\n        } if (enabledFacets >= 1 && f.locked) {\n          f.locked = false;\n        }\n      }\n    });\n    this.one('aw-home-facets-wrapper').update({\n      facetData: this.facetData,\n      lockedFacets: this.lockedFacets\n    });\n    if (updateBubbles) {\n      let disableFacetsIds = [];\n      this.facetData.forEach((fD) => {\n        if (!fD.enabled) disableFacetsIds.push(fD.type); // this is probably useless\n      });\n      if (disableFacetsIds.length > 0) {\n        let filteredSelectedBubbles = this.selectedBubbles.filter(bubble => {\n          for (var i = 0; i < this.allBubbles.length; i++) {\n            if (this.allBubbles[i].id === bubble.id) {\n              if (disableFacetsIds.includes(\n                this.allBubbles[i].entity.typeOfEntity.id\n              )) {\n                return false\n              }\n            }\n          }\n        });\n        if (filteredSelectedBubbles.length != this.selectedBubbles.length) {\n          this.selectedBubbles = filteredSelectedBubbles;\n        };\n      }\n      this.allBubbles.forEach(bubble => {\n        bubble.selected = false;\n        for (var i = 0; i < this.selectedBubbles.length; i++) {\n          if (this.selectedBubbles[i].id === bubble.id) bubble.selected = true;\n        }\n      });\n      this.one('aw-bubble-chart').update(this.getBubblePayload(null));\n    }\n  }\n\n  renderItemTags() {\n    let tagsData = [];\n    this.selectedBubbles.forEach((sBubble) => {\n      let label = '';\n      for (var i = 0; i < this.allBubbles.length; i++) {\n        if (this.allBubbles[i].id === sBubble.id) {\n          label = this.allBubbles[i].entity.label;\n          tagsData.push({\n            label,\n            icon: \"n7-icon-close\",\n            payload: sBubble.id,\n            classes: `tag-${this.allBubbles[i].entity.typeOfEntity.replace(/ /g, '-')}`\n          });\n          break;\n        }\n      }\n    });\n    this.one('aw-home-item-tags-wrapper').update(tagsData);\n  }\n\n  onTagClicked(payload) {\n    if (!payload) return;\n    const bubbleId = payload;\n    if (this._bubbleChart) {\n      this._bubbleChart.selectAll(`g`).each(b => {\n        if (b.id === bubbleId) b.hasCloseIcon = false;\n      });\n    }\n    this.selectedBubbles = this.selectedBubbles.filter((b) => b.id !== payload);\n    return this.filterRequest();\n  }\n\n  onHeroChange(value) {\n    this.autocompleteChanged$.next(value);\n  }\n\n  private _scrollBackgroundControl() {\n    const el = document.getElementById('bubble-results-list'),\n      source$ = fromEvent(document.getElementById('bubble-results-list'), 'scroll');\n\n    // height control\n    setTimeout(() => {\n      this._setHasScrollBackground(el);\n    }, 500);\n\n    // scroll listen\n    source$.pipe(\n      debounceTime(50)\n    ).subscribe(({ target }: { target: any }) => {\n      this._setHasScrollBackground(target);\n    });\n  }\n\n  private _setHasScrollBackground({ scrollTop, scrollHeight, clientHeight }) {\n    this.hasScrollBackground = scrollHeight > (scrollTop + clientHeight);\n  }\n\n  private _listenAutoCompleteChanges() {\n    this.one('aw-home-autocomplete').updateOptions({\n      config: this.configuration.get('config-keys'),\n      labels: this.configuration.get('labels')\n    });\n    this.autocompleteChanged$.pipe(\n      debounceTime(500)\n    ).subscribe(value => {\n      this.homeAutocompleteQuery = value;\n      if (value) {\n        this.communication.request$('autoComplete', {\n          onError: (error) => console.error(error),\n          params: {\n            input: value,\n            itemsPagination: { offset: 0, limit: this.configuration.get('home-layout')['results-limit'] }\n          }\n        }).subscribe((response) => {\n          this.one('aw-home-autocomplete').update(response);\n          if (!this.autocompletePopoverOpen) this._toggleAutocompletePopover();\n        });\n      } else {\n        this._toggleAutocompletePopover();\n      }\n    });\n  }\n\n  private _toggleAutocompletePopover() {\n    if (!this.autocompletePopover) {\n      const template = document.getElementById('aw-home-advanced-autocomplete-popover');\n      template.style.display = 'block';\n      this.autocompletePopover = this.tippy('.aw-home__top-hero .n7-hero__input', {\n        content: template,\n        trigger: 'manual',\n        interactive: true,\n        arrow: false,\n        flip: false,\n        appendTo: 'parent',\n        theme: 'light-border',\n        placement: 'bottom-start',\n        maxWidth: '100%',\n        onHidden: () => this.autocompletePopoverOpen = false,\n      })[0];\n    }\n    if (this.autocompletePopoverOpen) {\n      this.autocompletePopover.hide();\n    } else {\n      this.autocompletePopover.show();\n    }\n    this.autocompletePopoverOpen = !this.autocompletePopoverOpen;\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\n\nexport class AwHomeLayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n  private configuration: any;\n  private route: any;\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-home-layout.init':\n          this.dataSource.onInit(payload);\n          this.loadFilters();\n          this.configuration = payload.configuration;\n          break;\n        case 'aw-home-layout.outerlinkclick':\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: payload\n          });\n          break;\n        case 'aw-home-layout.destroy':\n          this.destroyed$.next();\n          break;\n        default:\n          break;\n      }\n    });\n\n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-hero.change':\n          this.dataSource.onHeroChange(payload.value);\n          break;\n        case 'aw-home-facets-wrapper.click':\n          this.dataSource.handleFacetHeaderClick(payload);\n          break;\n        case 'aw-home-facets-wrapper.change':\n          if (payload.value) {\n            const params = {\n              input: payload.value,\n              typeOfEntity: payload.inputPayload.replace('-search', ''),\n              itemsPagination: {\n                // offset: 0, limit: this.configuration.get('home-layout')['results-limit']\n                offset: 0, limit: this.configuration.get('home-layout')['results-limit']\n              }\n            };\n            this.dataSource.makeRequest$('autoComplete', params).subscribe(response => {\n              if (response.results.length < 1) {\n                const fallback = {\n                  totalcount: 0,\n                  entities: [\n                    {\n                      entity: {\n                        id: 'fallback',\n                        label: // use fallback string from configuration\n                          this.configuration.get('home-layout')['autocomplete-fallback'] ?\n                            this.configuration.get('home-layout')['autocomplete-fallback'] :\n                            'Nessun risultato trovato'\n                      }\n                    }\n                  ]\n                };\n                this.emitOuter('facetswrapperresponse', { facetId: payload, response: fallback });\n                this.dataSource.updateComponent(\n                  'aw-autocomplete-wrapper',\n                  { key: payload.value, response: fallback },\n                  { config: this.configuration }\n                );\n              } else {\n                this.emitOuter('facetswrapperresponse', { facetId: payload, response });\n                this.dataSource.updateComponent(\n                  'aw-autocomplete-wrapper', // ID\n                  { key: payload.value, response }, // DATA\n                  { config: this.configuration } // OPTIONS\n                );\n              }\n            });\n          }\n          break;\n        case 'aw-home-facets-wrapper.enter':\n          this.dataSource.handleFacetSearchEnter(payload);\n          break;\n        case 'aw-bubble-chart.bubble-tooltip-close-click':\n          this.dataSource.onBubbleTooltipClick('close', payload);\n          break;\n        case 'aw-bubble-chart.bubble-tooltip-goto-click':\n          if (!payload || !payload.entityId) { return; }\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [`aw/entita/${payload.entityId}`]\n          });\n          break;\n        case 'aw-bubble-chart.bubble-tooltip-select-click':\n          payload._bubbleChart = this.dataSource._bubbleChart;\n          this.emitOuter('bubble-tooltip-select-click', payload);\n          break;\n        case 'aw-bubble-chart.click':\n          if (payload.source === 'bubble') {\n            if (payload.bubble) {\n              console.log({ payload });\n              this.dataSource.updateBubbleFilter(payload);\n              if (this.dataSource.onBubbleSelected(payload.bubble)) {\n                this.dataSource.filterRequest().subscribe((response) => {\n                  if (response) {\n                    // console.log('filterRequest() returned: ', response)\n                    this.emitOuter('filterbubbleresponse', this.dataSource.getBubblePayload(response));\n                    this.dataSource.updateBubbles(response);\n                  }\n                });\n              }\n            }\n          } else if (payload.source === 'close') {\n            this.dataSource.updateBubbleFilter(payload);\n            this.dataSource.onBubbleDeselected({\n              bubblePayload: payload.bubblePayload,\n              bubble: payload.bubble\n            }).subscribe((response) => {\n              if (response) {\n                this.emitOuter('filterbubbleresponse', this.dataSource.getBubblePayload(response));\n                this.dataSource.updateBubbles(response);\n              }\n            });\n          }\n          break;\n        case 'aw-bubble-chart.bubble-filtered':\n          this.dataSource.updateBubbleFilter(payload);\n          this.dataSource.updateTags();\n          const dataSource = this.dataSource;\n          setTimeout(function () {\n            dataSource.loadingBubbles = false;\n          }, 500);\n          break;\n\n        /**\n         * Tags & Item Previews Event Handlers\n         */\n        case 'aw-home-item-tags-wrapper.click':\n          this.dataSource.onTagClicked(payload).subscribe((response) => {\n            this.emitOuter('filterbubbleresponse', this.dataSource.getBubblePayload(response));\n            this.dataSource.updateBubbles(response);\n            this.dataSource.renderItemTags();\n          });\n          break;\n        case 'aw-linked-objects.datarequest':\n          const { currentPage } = payload;\n          const params = {\n            selectedEntitiesIds: this.dataSource.selectedEntitiesIds,\n            itemsPagination: {\n              offset: currentPage * this.dataSource.resultsLimit,\n              limit: this.dataSource.resultsLimit\n            }\n          };\n          this.dataSource.makeRequest$('globalFilter', params).subscribe(res => {\n            if (res) {\n              this.emitOuter('dataresponse', { res });\n            } else {\n              console.log('Unable to fetch additional data.');\n            }\n          });\n          break;\n        case 'aw-autocomplete-wrapper.clickresult':\n          this.handleSimpleAutocompleteClick(payload);\n          break;\n        case 'aw-home-autocomplete.click':\n          const { source } = payload;\n          let basePath;\n          if (source === 'item') {\n            basePath = this.configuration.get('paths').entitaBasePath;\n            this.emitGlobal('navigate', {\n              handler: 'router',\n              path: [ basePath, payload.id ]\n            });\n          } else if (source === 'showMore') {\n            const query = this.dataSource.homeAutocompleteQuery;\n            basePath = this.configuration.get('paths').searchBasePath;\n            this.emitGlobal('navigate', {\n              handler: 'router',\n              path: [ basePath ],\n              queryParams: { query }\n            });\n          }\n          break;\n        case 'aw-linked-objects.click':\n          const paths = this.configuration.get('paths');\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [paths.schedaBasePath, payload]\n          });\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  private loadFilters() {\n    this.dataSource.initialFilterRequest().subscribe((response) => {\n      console.log('(home) Apollo responded with:', response);\n      if (response) {\n        this.dataSource.parseInitialRequest(response);\n        if (this.dataSource.bubblesEnabled) {\n          const bubblePayload = {\n            setBubbleChart: (bubbleCref) => this.dataSource._bubbleChart = bubbleCref,\n            source: response,\n            reset: false,\n            facetData: this.dataSource.facetData\n          };\n          this.emitOuter('filterbubbleresponse', bubblePayload);\n        }\n      }\n    });\n  }\n\n  public handleSimpleAutocompleteClick = payload => {\n    const thebubble = this.dataSource.allBubbles.find(b => {\n      const s = 'B_' + payload.replace(/-/g, '_');\n      return b.id === s;\n    });\n    if (thebubble) {\n      this.dataSource.onBubbleSelected(thebubble);\n    }\n    if (this.dataSource.selectedEntitiesIds.indexOf(payload) < 0) {\n      this.dataSource.selectedEntitiesIds.push(payload);\n      this.dataSource.communication.request$('globalFilter', {\n        onError: (error) => console.error(error),\n        params: {\n          selectedEntitiesIds: this.dataSource.selectedEntitiesIds,\n          itemsPagination: {\n            offset: 0,\n            limit: this.dataSource.resultsLimit\n          }\n        },\n      }).subscribe(res => {\n        if (res) {\n          this.dataSource.updateBubbleFilter({\n            allBubbles: this.dataSource.allBubbles,\n            bubble: thebubble,\n            bubblePayload: { id: thebubble.id },\n            entityIdmap: this.dataSource.entityBubbleIdMap,\n            source: 'bubble'\n          });\n          this.dataSource.filterRequest().subscribe(res => {\n            if (res) {\n              this.emitOuter('filterbubbleresponse', this.dataSource.getBubblePayload(res));\n              this.dataSource.updateBubbles(res);\n            }\n          });\n          // this.renderPreviewsFromApolloQuery(res)\n        }\n      });\n    }\n  }\n\n  public outerLinkClick(type, payload) {\n    window.open(payload, '_blank');\n  }\n\n}\n\n","import { AwHomeLayoutDS } from './home-layout.ds';\nimport { AwHomeLayoutEH } from './home-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwHomeLayoutConfig = {\n  layoutId: 'aw-home-layout',\n  widgets: [{\n    id: 'aw-hero',\n  }, {\n    id: 'aw-home-hero-patrimonio',\n  }, {\n    id: 'aw-bubble-chart',\n  }, {\n    id: 'aw-home-facets-wrapper',\n  }, {\n    id: 'aw-home-item-tags-wrapper',\n  }, {\n    id: 'aw-home-autocomplete',\n  }, {\n    id: 'aw-linked-objects',\n  }, {\n    id: 'aw-autocomplete-wrapper',\n  }],\n  layoutDS: AwHomeLayoutDS,\n  layoutEH: AwHomeLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AbstractLayout } from '../../../common/models/abstract-layout'\nimport { ConfigurationService } from '../../../common/services/configuration.service';\nimport { LayoutsConfigurationService } from '../../../common/services/layouts-configuration.service';\nimport { MainStateService } from '../../../common/services/main-state.service';\nimport { AwHomeLayoutConfig as config } from './home-layout.config';\nimport { CommunicationService } from '../../../common/services';\nimport tippy from 'tippy.js';\n\n@Component({\n    selector: 'aw-home-layout',\n    templateUrl: './home-layout.html'\n})\nexport class AwHomeLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    layoutsConfiguration: LayoutsConfigurationService,\n    private router: Router,\n    private configuration: ConfigurationService,\n    private communication: CommunicationService,\n    private mainState: MainStateService,\n  ){\n    super(layoutsConfiguration.get('AwHomeLayoutConfig') || config);\n  }\n\n  protected initPayload(){\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      router: this.router,\n      communication: this.communication,\n      options: this.config.options || {},\n      tippy: tippy,\n    }\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n}\n","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwSchedaLayoutDS extends LayoutDataSource {\n  /**\n  * If you are not using these variables (from your-layout.ts),\n  * remove them from here too.\n  */\n  private communication: any;\n  protected configuration: any;\n  protected mainState: any;\n  protected router: any;\n  protected titleService: any;\n  private allBubbles: any[] = null;\n  public selectedBubbles: any[] = [];\n\n  public options: any;\n  public pageTitle: string;\n  public hasBreadcrumb: boolean;\n  public contentParts: any;\n  public tree: any;\n  public sidebarCollapsed: boolean;\n  public bubbleChartSectionTitle: string;\n  public similarItemsSectionTitle: string;\n  public metadataSectionTitle: string;\n  public hasMetadata: boolean;\n  public hasBubbles: boolean;\n  public bubblesEnabled: boolean;\n  public hasSimilarItems: boolean;\n  public imageViewerIstance: any;\n  /**\n  * If you are not using these variables (from your-layout.ts),\n  * remove them from onInit() parameters and inside the function.\n  */\n  onInit({ configuration, mainState, router, options, titleService, communication }) {\n    this.configuration = configuration;\n    this.mainState = mainState;\n    this.router = router;\n    this.titleService = titleService;\n    this.communication = communication;\n    this.options = options;\n    this.sidebarCollapsed = false;\n    this.bubbleChartSectionTitle = this.configuration.get('scheda-layout')['bubble-chart']['title'];\n    this.similarItemsSectionTitle = this.configuration.get('scheda-layout')['related-items']['title'];\n    this.metadataSectionTitle = this.configuration.get('scheda-layout')['metadata']['title'];\n    this.hasSimilarItems = false;\n    this.bubblesEnabled = this.configuration.get('features-enabled') ? this.configuration.get('features-enabled')['bubblechart'] : false;\n\n    this.mainState.update('headTitle', 'Arianna Web > Patrimonio');\n    this.mainState.update('pageTitle', 'Arianna Web: patrimonio Layout');\n    this.mainState.updateCustom('currentNav', 'aw/patrimonio');\n  }\n\n  getNavigation(id) {\n    return this.communication.request$('getTree', {\n      onError: (error) => console.error(error),\n      params: { treeId: id }\n    })\n  }\n\n  updateNavigation(data) {\n    let header = {\n      iconLeft: 'n7-icon-tree-icon',\n      text: data['label'],\n      iconRight: 'n7-icon-angle-left',\n      classes: 'is-expanded',\n      payload: 'header'\n    };\n    this.one('aw-sidebar-header').update(header);\n  }\n\n  loadItem(id) {\n    if (id) {\n      const maxSimilarItems = this.configuration.get('scheda-layout')['related-items']['max-related-items'];\n      return  this.communication.request$('getNode', {\n        onError: (error) => console.error(error),\n        params: { id: id, maxSimilarItems: maxSimilarItems }\n      })\n    } else {\n      /* TODO: valori statici, da prendere da config */\n      this.pageTitle = 'Collezione d\\'Arte';\n      this.contentParts = [\n        {\n          type: 'text',\n          title: 'Collezione d\\'Arte',\n          content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi gravida sagittis pulvinar. Etiam iaculis maximus metus, id tincidunt libero auctor et. Proin tempus turpis vel erat ultrices, id vestibulum ante cursus. Vestibulum lobortis, ante at eleifend consequat, massa libero bibendum justo, id fermentum magna odio ac nulla. Cras aliquet scelerisque malesuada. Mauris congue fermentum tristique. Nulla imperdiet accumsan dui, tristique lobortis metus eleifend non. Donec quis odio massa. Cras sit amet sem eu turpis molestie blandit vitae sed nibh. Pellentesque ornare enim nisl, et efficitur ante elementum a. Ut nec ex finibus, congue libero feugiat, aliquam ante. Cras sem neque, pellentesque eget mi at, auctor vulputate tellus. Sed aliquam mi a tortor ultricies interdum. Etiam tincidunt nunc commodo nulla porttitor semper. Etiam porta lacinia libero a mattis. Lorem ipsum dolor sit amet, consectetur adipiscing elit.'\n        },\n        {\n          type: 'text',\n          title: 'Centro Archivi',\n          content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi gravida sagittis pulvinar. Etiam iaculis maximus metus, id tincidunt libero auctor et. Proin tempus turpis vel erat ultrices, id vestibulum ante cursus. Vestibulum lobortis, ante at eleifend consequat, massa libero bibendum justo, id fermentum magna odio ac nulla. Cras aliquet scelerisque malesuada. Mauris congue fermentum tristique. Nulla imperdiet accumsan dui, tristique lobortis metus eleifend non. Donec quis odio massa. Cras sit amet sem eu turpis molestie blandit vitae sed nibh. Pellentesque ornare enim nisl, et efficitur ante elementum a. Ut nec ex finibus, congue libero feugiat, aliquam ante. Cras sem neque, pellentesque eget mi at, auctor vulputate tellus. Sed aliquam mi a tortor ultricies interdum. Etiam tincidunt nunc commodo nulla porttitor semper. Etiam porta lacinia libero a mattis. Lorem ipsum dolor sit amet, consectetur adipiscing elit.'\n        }\n      ]\n    }\n    /*Breadcrumb section*/\n    let breadcrumbs = {\n      items: []\n    };\n    this.one('aw-scheda-breadcrumbs').update(breadcrumbs);\n  }\n\n  loadContent(response) {\n    if (response) {\n      console.log('(Scheda) Apollo responded with: ', response)\n      this.contentParts = [];\n      let content = {};\n\n      this.one('aw-tree').updateOptions({\n        icons: this.configuration.get('scheda-layout')['tree']\n      })\n      /* Related Entities */\n      this.one('aw-bubble-chart').updateOptions({\n        context: 'scheda',\n        configKeys: this.configuration.get(\"config-keys\"),\n        bubbleContainerId: 'bubbleChartContainer',\n        containerId: 'bubble-chart-container',\n      });\n\n      if (response.text) {\n        content['content'] = response.text;\n      }\n      this.contentParts.push(content);\n      if (response.image) {\n        const images = [{ type: 'image', url: response.image, buildPyramid: false }];\n        if (!this.imageViewerIstance) {\n          this.one('aw-scheda-image').update({\n            viewerId: 'scheda-layout-viewer',\n            _setViewer: (viewer) => {\n              this.imageViewerIstance = viewer;\n              viewer.open(images);\n            },\n          });\n        } else {\n          this.imageViewerIstance.open(images);\n        }\n      }\n\n      let titleObj = {\n        icon: response.icon,\n        title: {\n          main: {\n            text: response.title || response.label,\n            classes: 'bold',\n          }\n        },\n        tools: response.subTitle,\n        actions: {}\n      };\n\n      this.one('aw-scheda-inner-title').update(titleObj);\n      \n      this.hasMetadata = response.fields != null;\n      this.one('aw-scheda-metadata').updateOptions({ labels: this.configuration.get(\"labels\") });\n      this.one('aw-scheda-metadata').update(response);\n\n      /*Breadcrumb section*/\n      let breadcrumbs = {\n        items: []\n      };\n\n      if( response.breadcrumb ){\n        response.breadcrumbs.forEach(element => {\n          breadcrumbs.items.push({\n            label: element.label,\n            payload: element.link\n          })\n        });\n        this.one('aw-scheda-breadcrumbs').update(breadcrumbs);\n      }\n    }\n\n      if ( response.relatedItems ) {\n        this.hasSimilarItems = true;\n        this.one('aw-linked-objects').updateOptions({ context: 'scheda', config: this.configuration })\n        this.one('aw-linked-objects').update(response);\n      } else {\n        this.hasSimilarItems = false;\n        //this.one('aw-linked-objects').update([]);\n      }\n  }\n\n  collapseSidebar() {\n    this.sidebarCollapsed = !this.sidebarCollapsed;\n  }\n\n  setAllBubblesFromApolloQuery( response: any, reset?: boolean ){\n    if ( !response || !response.relatedEntities ) { this.hasBubbles = false; return; }\n    this.allBubbles = [];\n\n    for ( let i = 0; i < response.relatedEntities.length; i++ ){\n\n      const color = this.configuration.get('config-keys')[response.relatedEntities[i].entity.typeOfEntity.configKey] ? this.configuration.get('config-keys')[response.relatedEntities[i].entity.typeOfEntity.configKey]['color']['hex'] : \"\";\n\n      this.allBubbles.push(\n        {\n          id: this.convertEntityIdToBubbleId( response.relatedEntities[i].entity.id ),\n          ...response.relatedEntities[i],\n          color: color\n        });\n    }\n    this.one('aw-scheda-bubble-chart').update({\n      containerId: 'bubble-chart-container',\n      width: window.innerWidth / 1.8,\n      bubbles: this.allBubbles,\n      reset: (reset ? reset : false)\n    });\n  }\n\n  private convertEntityIdToBubbleId(entityId: string): string {\n    if (!entityId) return null;\n    return ('B_' + entityId.replace(/-/g, '_'));\n  }\n\n\n}\n","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\n\nexport class AwSchedaLayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n  private configuration: any;\n  private route: any;\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-scheda-layout.init':\n          this.dataSource.onInit(payload);\n          this.configuration = payload.configuration;\n          this.route = payload.route;\n          let paramId = this.route.snapshot.params.id || \"\";\n          this.listenRoute();\n          this.loadNavigation(paramId);\n          break;\n\n        case 'aw-scheda-layout.destroy':\n          this.destroyed$.next();\n          break;\n\n        default:\n          break;\n      }\n    });\n\n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-tree.click':\n          if (payload) {\n            this.emitGlobal('navigate', { path: [this.configuration.get('paths').schedaBasePath + payload], handler: 'router' });\n          }\n          break;\n        case 'aw-sidebar-header.click': this.dataSource.collapseSidebar();\n          break;\n        case \"aw-bubble-chart.bubble-tooltip-goto-click\":\n          if (!payload || !payload.entityId) return;\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [`aw/entita/${payload.entityId}/overview`]\n          });\n          break;\n        case 'aw-linked-objects.click':\n          const paths = this.configuration.get('paths');\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [paths.schedaBasePath, payload]\n          });\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  private listenRoute() {\n    this.route.paramMap.subscribe(params => {\n      if (params.get('id')) {\n        this.dataSource.loadItem(params.get('id')).subscribe((response) => {\n          console.log('getNode() res: ', response)\n          if (response) {\n            this.dataSource.loadContent(response);\n            if (response.relatedEntities) {\n              this.dataSource.hasBubbles = true;\n              let relatedEntities = { source: response, relatedEntities: response.relatedEntities, reset: true };\n              if (this.dataSource.bubblesEnabled) {\n                this.emitOuter('filterbubbleresponse', relatedEntities);\n              }\n            }\n          }\n        });\n      } else {\n        this.dataSource.loadItem();\n      }\n    });\n  }\n\n  private loadNavigation(selectedItem) {\n    this.dataSource.getNavigation('patrimonio').subscribe((response) => {\n      if (response) {\n        console.log(\"Apollo responded with tree:\", response);\n        this.dataSource.updateNavigation(response);\n        this.emitOuter('navigationresponse', {tree: response, currentItem: selectedItem});\n      }\n      /*if (selectedItem) {\n        this.emitOuter('selectItem', selectedItem);\n      }*/\n    });\n  }\n}","import { AwSchedaLayoutDS } from './scheda-layout.ds';\nimport { AwSchedaLayoutEH } from './scheda-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwPatrimonioLayoutConfig = {\n  layoutId: 'aw-scheda-layout',\n  /**\n   * Array of components you want to use\n   * in this leyout\n   */\n  widgets: [\n     { id: 'aw-sidebar-header'},\n     { id: 'aw-tree' },\n     { id: 'aw-scheda-breadcrumbs' },\n     { id: 'aw-scheda-metadata' },\n     { id: 'aw-scheda-image' },\n     { id: 'aw-scheda-inner-title' },\n     { id: 'aw-bubble-chart' },\n     { id: 'aw-linked-objects' }\n  ],\n  layoutDS: AwSchedaLayoutDS,\n  layoutEH: AwSchedaLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Title } from '@angular/platform-browser';\nimport { AbstractLayout } from '../../../common/models/abstract-layout'\nimport { ConfigurationService } from '../../../common/services/configuration.service';\nimport { LayoutsConfigurationService } from '../../../common/services/layouts-configuration.service';\nimport { MainStateService } from '../../../common/services';\nimport { AwPatrimonioLayoutConfig as config } from './scheda-layout.config';\nimport { CommunicationService } from '../../../common/services';\n\n@Component({\n  selector: 'aw-scheda-layout',\n  templateUrl: './scheda-layout.html'\n})\n\nexport class AwSchedaLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private configuration: ConfigurationService,\n    private layoutsConfiguration: LayoutsConfigurationService,\n    private mainState: MainStateService,\n    private titleService: Title,\n    private communication: CommunicationService,\n\n  ) {\n    super(layoutsConfiguration.get('AwPatrimonioLayoutConfig') || config);\n  }\n\n  /**\n   * Optional variables that can be accessed from the layout's logic.\n   * If removed, they must also be removed from the layout's DataSource file,\n   * and from this file imports.\n   */\n  protected initPayload() {\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      router: this.router,\n      route: this.route,\n      titleService: this.titleService,\n      communication: this.communication,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit() {\n    this.onInit();\n  }\n\n  ngOnDestroy() {\n    this.onDestroy();\n  }\n}","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwWorksLayoutDS extends LayoutDataSource {\n  onInit(payload){\n    // TODO\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwWorksLayoutEH extends EventHandler {\n  \n  public listen() {\n    /* this.innerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n    \n    /* this.outerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n  }\n\n}","import { AwWorksLayoutDS } from './works-layout.ds';\nimport { AwWorksLayoutEH } from './works-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwWorksLayoutConfig = {\n  layoutId: 'aw-works-layout',\n  widgets: [],\n  layoutDS: AwWorksLayoutDS,\n  layoutEH: AwWorksLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  layoutOptions: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractLayout } from '../../../common/models/abstract-layout';\nimport { AwWorksLayoutConfig as config } from './works-layout.config';\n\n@Component({\n  selector: 'aw-works-layout',\n  templateUrl: './works-layout.html'\n})\nexport class AwWorksLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n  ){\n    super(config);\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n\n}","export default {\n  totalCount: 0,\n  facets: [\n    {\n      id: 'query',\n      type: 'value'\n    },\n    {\n      id: 'query-all',\n      type: 'value',\n      hasStaticData: true,\n      data: [\n        {\n          value: '1',\n          label: 'Cerca in tutti campi delle schede'\n        }\n      ]\n    },\n    {\n      id: 'query-links',\n      type: 'value'\n    },\n    {\n      id: 'entity-types',\n      type: 'value',\n      operator: 'OR',\n      limit: 10,\n      order: 'count'\n    },\n    {\n      id: 'entity-search',\n      type: 'value'\n    },\n    {\n      id: 'entity-links',\n      type: 'value',\n      searchData: ['entity-type']\n    },\n    /* {\n      id: 'date-from',\n      type: 'value'\n    },\n    {\n      id: 'date-to',\n      type: 'value'\n    } */\n  ],\n  fields: [\n    {\n      inputs: [\n        {\n          type: 'text',\n          facetId: 'query',\n          placeholder: 'Cerca...',\n          // icon: 'n7-icon-search',\n          filterConfig: {\n            delay: 500,\n            minChars: 3,\n            searchIn: [\n              {\n                key: 'label',\n                operator: 'LIKE'\n              }\n            ]\n          }\n        },\n        {\n          type: 'checkbox',\n          facetId: 'query-all',\n          filterConfig: {\n            searchIn: [\n              {\n                key: 'query-all',\n                operator: '='\n              }\n            ]\n          }\n        },\n        {\n          type: 'link',\n          facetId: 'query-links',\n          filterConfig: {\n            isArray: true,\n            searchIn: [\n              {\n                key: 'source.entityType',\n                operator: '='\n              }\n            ]\n          }\n        }\n      ]\n    },\n    {\n      header: {\n        label: 'Relazione con',\n        classes: 'related-class'\n      },\n      inputs: [\n        {\n          type: 'checkbox',\n          facetId: 'entity-types',\n          filterConfig: {\n            isArray: true,\n            context: 'internal',\n            target: 'entity-links',\n            searchIn: [\n              {\n                key: 'searchData.entity-type',\n                operator: '='\n              }\n            ]\n          }\n        },\n        {\n          type: 'text',\n          facetId: 'entity-search',\n          placeholder: 'Cerca entit',\n          // icon: 'n7-icon-search',\n          filterConfig: {\n            delay: 500,\n            minChars: 3,\n            context: 'internal',\n            target: 'entity-links',\n            searchIn: [\n              {\n                key: 'label',\n                operator: 'LIKE'\n              }\n            ]\n          }\n        },\n        {\n          type: 'link',\n          facetId: 'entity-links',\n          filterConfig: {\n            limit: 20,\n            searchIn: [\n              {\n                key: 'source.id',\n                operator: '='\n              }\n            ]\n          }\n        }\n      ]\n    },\n    /*{\n      header: {\n        label: 'Data',\n        classes: 'date-class'\n      },\n      inputs: [\n        {\n          type: 'select',\n          facetId: 'date-from',\n          label: 'Dal',\n          filterConfig: {\n            searchIn: [\n              {\n                key: 'source.dateStart',\n                operator: '>='\n              }\n            ]\n          }\n        },\n        {\n          type: 'select',\n          facetId: 'date-to',\n          label: 'Al',\n          filterConfig: {\n            searchIn: [\n              {\n                key: 'source.dateEnd',\n                operator: '<='\n              }\n            ]\n          }\n        }\n      ]\n    }*/\n  ],\n  results: {\n    order: {\n      type: 'score', // score | text | date\n      key: 'author', // docPath, elastic key, ecc\n      direction: 'DESC' // ASC | DESC\n    },\n    fields: [\n      {\n        id: 'description',\n        highlight: true,\n        limit: 200\n      }\n    ]\n  },\n  page: { offset: 0, limit: 10 }\n};\n","import { LayoutDataSource } from '@n7-frontend/core';\nimport {\n  SearchService,\n  SearchModel\n} from '../../../common/services';\nimport facetsConfig from './search-facets.config';\nimport { tap } from 'rxjs/operators';\nimport { Observable, of } from 'rxjs';\nimport helpers from '../../../common/helpers';\n\nconst SEARCH_MODEL_ID = 'aw-search-layout';\n\nexport class AwSearchLayoutDS extends LayoutDataSource {\n  private communication: any;\n  private configuration: any;\n  private mainState: any;\n  private search: SearchService;\n  private searchModel: SearchModel;\n  private prettifyLabels: any;\n  private configKeys: any;\n\n  public pageTitle: string;\n  public resultsTitle: string;\n  public totalCount: number;\n  public currentPage: any = 1; // pagination value (url param)\n  public pageSize = 10; // linked objects page size\n\n  public options: any;\n\n  public orderByLabel = 'Ordina per';\n  public orderByOptions: any = [\n    {\n      value: 'text_DESC',\n      label: 'Ordine alfabetico (DESC)'\n    },\n    {\n      value: 'text_ASC',\n      label: 'Ordine alfabetico (ASC)'\n    } /* {\n    value: 'score_DESC',\n    label: 'Ordine per rilevanza (DESC)'\n  }, {\n    value: 'score_ASC',\n    label: 'Ordine per rilevanza (ASC)'\n  }, {\n    value: 'date_DESC',\n    label: 'Ordina per data (DESC)'\n  }, {\n    value: 'date_ASC',\n    label: 'Ordina per data (ASC)'\n  } */\n  ];\n\n  onInit({ configuration, mainState, options, communication, search }) {\n    this.configuration = configuration;\n    this.mainState = mainState;\n    this.communication = communication;\n    this.search = search;\n    this.options = options;\n    this.prettifyLabels = this.configuration.get('labels');\n    this.configKeys = this.configuration.get('config-keys');\n\n    this.pageTitle = this.configuration.get('search-layout').title;\n\n    if (!this.search.model(SEARCH_MODEL_ID)) {\n      this.search.add(SEARCH_MODEL_ID, facetsConfig);\n    }\n    this.searchModel = this.search.model(SEARCH_MODEL_ID);\n\n    this.doSearchRequest$().subscribe(() => {\n      this.one('facets-wrapper').update({ searchModel: this.searchModel });\n    });\n  }\n\n  onOrderByChange(payload) {\n    const [orderBy, direction] = payload.split('_');\n\n    this.searchModel.setSearchConfigOrderBy(orderBy);\n    this.searchModel.setSearchConfigDirection(direction);\n  }\n\n  onPaginationChange(payload): Observable<boolean> {\n    const page = payload.replace('page-', '');\n    return this._updateSearchPage(page);\n  }\n\n  onPaginationGoToChange(payload): Observable<boolean> {\n    const page = payload.replace('goto-', '');\n    return this._updateSearchPage(page);\n  }\n\n  onResultsLimitChange(payload) {\n    this.pageSize = payload;\n    this.searchModel.setPageConfigLimit(payload);\n\n    // reset page & offset\n    this.currentPage = 1;\n    this.searchModel.setPageConfigOffset(0);\n  }\n\n  public getSearchModelId = () => SEARCH_MODEL_ID;\n\n  public doSearchRequest$(): Observable<any> {\n    const requestParams = this.searchModel.getRequestParams();\n    const requestPayload = {\n      searchParameters: {\n        // FIXME: togliere totalCount\n        totalCount: 100,\n        ...requestParams\n      }\n    };\n    return this.communication.request$('search', {\n      onError: error => console.error(error),\n      params: requestPayload\n    }).pipe(\n      tap(({ totalCount, results, facets }) => {\n        this.totalCount = totalCount;\n        let resultsTitleIndex = 0;\n        // results title\n        if (this.totalCount > 1) {\n          resultsTitleIndex = 2;\n        } else if (this.totalCount === 1) {\n          resultsTitleIndex = 1;\n        }\n        this.resultsTitle = this.configuration.get('search-layout').results[\n          resultsTitleIndex\n        ];\n\n        // facets labels\n        this._addFacetsLabels(facets);\n        // facets options\n        this._addFacetsOptions(facets);\n\n        this.searchModel.updateFacets(facets);\n        this.searchModel.updateTotalCount(totalCount);\n\n        this.one('aw-linked-objects').updateOptions({\n          context: 'search',\n          config: this.configuration,\n          page: this.currentPage,\n          pagination: true,\n          dynamicPagination: {\n            total: totalCount\n          },\n          size: this.pageSize\n        });\n\n        this.one('aw-linked-objects').update({ items: this._normalizeItems(results.items) });\n      })\n    );\n  }\n\n  private _updateSearchPage(page) {\n    if (+page === this.currentPage) {\n      return of(false);\n    }\n\n    this.currentPage = +page;\n\n    const searchConfig = this.searchModel.getConfig(),\n      pageConfig = searchConfig.page,\n      { limit } = pageConfig,\n      newOffset = (this.currentPage - 1) * limit;\n\n    this.searchModel.setPageConfigOffset(newOffset);\n\n    return of(true);\n  }\n\n  private _addFacetsLabels(facets) {\n    facets\n      .filter(f => Array.isArray(f.data))\n      .forEach(f => {\n        f.data.forEach(dataItem => {\n          const key = dataItem.label;\n          dataItem.label = helpers.prettifySnakeCase(key, this.prettifyLabels[key]);\n        });\n      });\n  }\n\n  private _addFacetsOptions(facets) {\n    facets\n      .filter(f => f.id === 'query-links')\n      .forEach(f => {\n        f.data.forEach(dataItem => {\n          const key = dataItem.value.replace(' ', '-'),\n            config = this.configKeys[key];\n          if (config) {\n            dataItem.options = {\n              icon: config.icon,\n              classes: `color-${key}`\n            };\n          }\n        });\n      });\n  }\n\n  private _normalizeItems(items) {\n    return items.map(singleItem => ({ item: { ...singleItem } }));\n  }\n}\n","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\n\nexport class AwSearchLayoutEH extends EventHandler {\n  private facetsChange$: Subject<any> = new Subject();\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-search-layout.init':\n          this.dataSource.onInit(payload);\n          this._listenToFacetsChange();\n          break;\n\n        case 'aw-search-layout.orderbychange':\n          this.dataSource.onOrderByChange(payload);\n          this.facetsChange$.next();\n          break;\n\n        default:\n          break;\n      }\n    });\n\n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'facets-wrapper.facetschange':\n          this.facetsChange$.next();\n          break;\n\n        case 'aw-linked-objects.pagination':\n          this.dataSource.onPaginationChange(payload).subscribe(changed => {\n            if (changed) {\n              this.facetsChange$.next();\n            }\n          });\n          break;\n\n        case 'aw-linked-objects.change':\n          this.dataSource.onResultsLimitChange(payload);\n          this.facetsChange$.next();\n          break;\n\n        case 'aw-linked-objects.goto':\n          this.dataSource.onPaginationGoToChange(payload).subscribe(changed => {\n            if (changed) {\n              this.facetsChange$.next();\n            }\n          });\n          break;\n\n        case 'aw-linked-objects.click':\n          const paths = this.dataSource.configuration.get('paths');\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [paths.entitaBasePath, payload]\n          });\n          break;\n        default:\n          break;\n      }\n    });\n  }\n\n  private _listenToFacetsChange() {\n    this.facetsChange$.pipe(\n      debounceTime(500)\n    ).subscribe(() => {\n      this.dataSource.doSearchRequest$().subscribe(() => {\n        this.emitGlobal('searchresponse', this.dataSource.getSearchModelId());\n      });\n    });\n  }\n}\n","import { AwSearchLayoutDS } from './search-layout.ds';\nimport { AwSearchLayoutEH } from './search-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\nimport { FacetsWrapperDS } from '../../../common/data-sources';\nimport { FacetsWrapperEH } from '../../../common/event-handlers';\n\nexport const AwSearchLayoutConfig = {\n  layoutId: 'aw-search-layout',\n  /**\n   * Array of components you want to use\n   * in this layout\n   */\n  widgets: [\n    { id: 'facets-wrapper', dataSource: FacetsWrapperDS, eventHandler: FacetsWrapperEH },\n    { id: 'aw-linked-objects' },\n    { id: 'aw-search-layout-tabs', hasStaticData: true },\n  ],\n  layoutDS: AwSearchLayoutDS,\n  layoutEH: AwSearchLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractLayout } from '../../../common/models/abstract-layout'\nimport { \n  ConfigurationService,\n  LayoutsConfigurationService,\n  MainStateService,\n  SearchService,\n  CommunicationService,\n} from '../../../common/services';\nimport { AwSearchLayoutConfig as config } from './search-layout.config';\n\n@Component({\n  selector: 'aw-search-layout',\n  templateUrl: './search-layout.html'\n})\n\nexport class AwSearchLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    private configuration: ConfigurationService,\n    private layoutsConfiguration: LayoutsConfigurationService,\n    private mainState: MainStateService,\n    private communication: CommunicationService,\n    private search: SearchService,\n\n  ) {\n    super(layoutsConfiguration.get('AwSearchLayoutConfig') || config);\n  }\n\n  /**\n   * Optional variables that can be accessed from the layout's logic.\n   * If removed, they must also be removed from the layout's DataSource file,\n   * and from this file imports.\n   */\n  protected initPayload() {\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      communication: this.communication,\n      search: this.search,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit() {\n    this.onInit();\n  }\n\n  ngOnDestroy() {\n    this.onDestroy();\n  }\n}","//---------------------------\n// BubbleChartWrapper.ts\n//---------------------------\n\nimport { Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'aw-bubble-chart-wrapper',\n  templateUrl: './bubble-chart-wrapper.html'\n})\nexport class BubbleChartWrapperComponent {\n  @Input() hover: any;\n  @Input() emit: any;\n  @Input() container: string;\n  @Input() buttons: any;\n\n  onClick(type, payload) {\n    this.emit(type, payload);\n  }\n  onMouseOut(type) {\n    this.emit(type);\n  }\n  onDestroy() {\n    console.log(\"destroyed\");\n  }\n}\n","//---------------------------\n// BREADCRUMBS.ts\n//---------------------------\n\nimport { Component, Input, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\nimport tippy from 'tippy.js';\n\n/**\n * Interface for a single BreadcrumbsComponent's \"Item\"\n *\n * @property label (required)\n * @property payload (required)\n * @property classes (optional)\n * @property _meta (optional)\n *\n */\nexport interface ISmartBreadcrumbsItem {\n    /**\n     * item's label\n     */\n    label: string;\n    /**\n     * action click's payload\n     */\n    payload: any;\n    /**\n     * additional html classes\n     */\n    classes?: any;\n    /**\n     * additional info useful for the component's logic\n     */\n    _meta?: any;\n}\n\n/**\n * Interface for BreadcrumbsComponent's \"Data\"\n *\n * @property items (required)\n * @property classes (optional)\n *\n */\nexport interface ISmartBreadcrumbsData {\n    /**\n     * each item renders a breadcrumb level\n     */\n    items: ISmartBreadcrumbsItem[];\n    /**\n     * additional html classes\n     */\n    classes?: any;\n}\n\n@Component({\n    selector: 'n7-smart-breadcrumbs',\n    templateUrl: './smart-breadcrumbs.html'\n})\nexport class SmartBreadcrumbsComponent implements AfterViewInit {\n    @Input() data: ISmartBreadcrumbsData;\n    @Input() emit: any;\n    @ViewChild('bcol', { read: ElementRef, static: false }) bcol: ElementRef\n    @ViewChild('bcdiv', { read: ElementRef, static: false }) bcdiv: ElementRef\n\n    ngAfterViewInit = () => {\n        let\n            parentWidth = this.bcdiv.nativeElement.clientWidth,\n            childWidth = this.bcol.nativeElement.clientWidth,\n            liArray = this.bcol.nativeElement.children\n\n        // collapse condition\n        if (parentWidth === childWidth) {\n            let tippyData = document.createElement('ol')\n            let i = 1\n            tippyData.className = 'n7-smart-breadcrumbs__tippy-content'\n            while (parentWidth === childWidth && i < liArray.length - 1) {\n                if (i > 1) {\n                    tippyData.appendChild(liArray[i])\n                } else {\n                    tippyData.appendChild(liArray[i])\n                    liArray[i].children[0].innerText = ''\n                }\n                this.tippyBuilder(liArray[i], tippyData)\n                i++\n                // update widths\n                parentWidth = this.bcdiv.nativeElement.clientWidth\n                childWidth = this.bcol.nativeElement.clientWidth\n            }\n        }\n    }\n\n    onClick(payload) {\n        if (!this.emit) return;\n        this.emit('click', payload);\n    }\n\n    tippyBuilder = (node, content) => {\n        /*\n            Builds tippy data for a node.\n        */\n        document.body.appendChild(content)\n        tippy(node, {\n            content,\n            // allowHTML: true,\n            // trigger: 'manual',\n            interactive: true,\n            arrow: true,\n            theme: 'light-border no-padding',\n            // placement: 'bottom',\n            // maxWidth: 500,\n        })\n    }\n\n}\n","// MODULES\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DvComponentsLibModule } from '@n7-frontend/components';\nimport { N7BoilerplateCommonModule } from '../common/n7-boilerplate-common.module';\n// LAYOUTS\nimport { AwAboutLayoutComponent } from './layouts/about-layout/about-layout';\nimport { AwEntitaLayoutComponent } from \"./layouts/entita-layout/entita-layout\";\nimport { AwHomeLayoutComponent } from './layouts/home-layout/home-layout';\nimport { AwSchedaLayoutComponent } from './layouts/scheda-layout/scheda-layout';\nimport { AwWorksLayoutComponent } from './layouts/works-layout/works-layout';\nimport { AwSearchLayoutComponent } from './layouts/search-layout/search-layout';\n// COMPONENTS\nimport { BubbleChartWrapperComponent } from './components/bubble-chart-wrapper/bubble-chart-wrapper';\nimport { SmartBreadcrumbsComponent } from './components/smart-breadcrumbs/smart-breadcrumbs';\n\nconst COMPONENTS = [\n  AwAboutLayoutComponent,\n  AwEntitaLayoutComponent,\n  AwHomeLayoutComponent,\n  AwSchedaLayoutComponent,\n  AwWorksLayoutComponent,\n  AwSearchLayoutComponent,\n  BubbleChartWrapperComponent,\n  SmartBreadcrumbsComponent\n];\n\n\n@NgModule({\n  declarations: COMPONENTS,\n  imports: [\n    CommonModule,\n    DvComponentsLibModule,\n    N7BoilerplateCommonModule,\n  ],\n  providers: [],\n  exports: COMPONENTS\n})\nexport class N7BoilerplateAriannaWebModule { }\n","import { Component, Input } from '@angular/core';\n\nexport interface IDataWidgetWrapperData {\n    classes?: string;\n}\n\n@Component({\n    selector: 'dv-data-widget-wrapper',\n    templateUrl: './data-widget-wrapper.html'\n})\nexport class DataWidgetWrapperComponent{\n    @Input() data: IDataWidgetWrapperData;\n    @Input() emit: any;\n}\n  ","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class DvExampleLayoutDS extends LayoutDataSource {\n  \n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class DvExampleLayoutEH extends EventHandler {\n\n  public listen() {\n    \n  } \n}","import { DataSource } from '@n7-frontend/core';\n\nexport class DvDataWidgetDS extends DataSource {\n    protected transform(data){\n        if ( !data ){ return null; }\n    }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class DvGraphDS extends DataSource {\n\n\tprotected transform(data){\n        return {\n\t\t\tcontainerId: 'test-Chart',\n\t\t\tlibOptions:{\n\t\t\t\tchart: {\n\t\t\t\t\t\t\"height\":550,\n\t\t\t\t\t\t\"width\": 1500,\n\t\t\t\t\t\t\"type\":\"area\",\n\t\t\t\t\t\t\"toolbar\":{\"show\":true}\n\t\t\t\t},\n\t\t\t\tdataLabels: {\"enabled\":false},\n\t\t\t\tcolors:[\"rgba(15,200,255)\"],\n\t\t\t\tfill:{\n\t\t\t\t\t\t\"colors\":[\"#0fc8ff\"],\n\t\t\t\t\t\t\"gradient\":{\"opacityFrom\":0.5,\"opacityTo\":0.1}\n\t\t\t\t},\n\t\t\t\tstroke:{\"curve\":\"straight\",\"width\":[2,1]},\n\t\t\t\tseries:[\n\t\t\t\t\t{\n\t\t\t\t\t\t\"name\":\"Reddish value\",\n\t\t\t\t\t\t\"data\":[[\"2019-08-01\",\"770.17\"],[\"2019-08-02\",\"645.03\"],\n\t\t\t\t\t\t\t[\"2019-08-03\",\"709.32\"],[\"2019-08-04\",\"708.11\"],\n\t\t\t\t\t\t\t[\"2019-08-05\",\"706.59\"],[\"2019-08-06\",\"607.28\"],\n\t\t\t\t\t\t\t[\"2019-08-07\",\"494.59\"],[\"2019-08-08\",\"636.81\"],\n\t\t\t\t\t\t\t[\"2019-08-09\",\"709.04\"],[\"2019-08-10\",\"717.31\"],\n\t\t\t\t\t\t\t[\"2019-08-11\",\"805.61\"],[\"2019-08-12\",\"758.60\"],\n\t\t\t\t\t\t\t[\"2019-08-13\",\"612.82\"],[\"2019-08-14\",\"608.90\"],\n\t\t\t\t\t\t\t[\"2019-08-15\",\"734.68\"],[\"2019-08-16\",\"838.54\"],\n\t\t\t\t\t\t\t[\"2019-08-17\",\"692.88\"]]\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tgrid:{\n\t\t\t\t\t\"borderColor\":\"#e7e7e7\",\n\t\t\t\t\t\"strokeDashArray\":3,\n\t\t\t\t\t\"xaxis\":{\"lines\":{\"show\":true}}\n\t\t\t\t},\n\t\t\t\tmarkers:{\"size\":3,\"hover\":{\"size\":6}},\n\t\t\t\txaxis:{\n\t\t\t\t\t\t\"axisBorder\":{\"show\":true,\"color\":\"#f4f6fc\"},\n\t\t\t\t\t\t\"labels\":{},\n\t\t\t\t\t\t\"type\":\"datetime\",\"tickAmount\":6\n\t\t\t\t},\n\t\t\t\tyaxis:[\n\t\t\t\t\t{\n\t\t\t\t\t\t\"show\":true,\n\t\t\t\t\t\t\"showAlways\":false,\n\t\t\t\t\t\t\"opposite\":false,\n\t\t\t\t\t\t\"reversed\":false,\n\t\t\t\t\t\t\"logarithmic\":false,\n\t\t\t\t\t\t\"forceNiceScale\":false,\n\t\t\t\t\t\t\"floating\":false,\n\t\t\t\t\t\t\"labels\": {\n\t\t\t\t\t\t\t\t\"show\":true,\n\t\t\t\t\t\t\t\t\"minWidth\":0,\n\t\t\t\t\t\t\t\t\"maxWidth\":160,\n\t\t\t\t\t\t\t\t\"offsetX\":0,\n\t\t\t\t\t\t\t\t\"offsetY\":0,\n\t\t\t\t\t\t\t\t\"rotate\":0,\n\t\t\t\t\t\t\t\t\"padding\":20,\n\t\t\t\t\t\t\t\t\"style\": { \"colors\":[], \"fontSize\":\"11px\", \"cssClass\":\"\" }\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"axisBorder\":{\"show\":true,\"color\":\"#f4f6fc\",\"offsetX\":0,\"offsetY\":0},\n\t\t\t\t\t\t\"axisTicks\":{\"show\":false,\"color\":\"#78909C\",\"width\":6,\"offsetX\":0,\"offsetY\":0},\n\t\t\t\t\t\t\"title\":{\"text\":\"P Totale C\",\"rotate\":90,\"offsetY\":0,\"offsetX\":0,\"style\":{\"fontSize\":\"11px\",\"cssClass\":\"\"}},\n\t\t\t\t\t\t\"tooltip\":{\"enabled\":false,\"offsetX\":0},\n\t\t\t\t\t\t\"crosshairs\":{\"show\":true,\"position\":\"front\",\"stroke\":{\"color\":\"#b6b6b6\",\"width\":1,\"dashArray\":0}}\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tlegend:{\"show\":true},\n\t\t\t\ttooltip:{},\n\t\t\t\tannotations:{\"yaxis\":[],\"xaxis\":[],\"points\":[]}\n\t\t\t}\n\t\t}\n\t}\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class DvInnerTitleDS extends DataSource {\n\n\tprotected transform(data){\n\t\treturn {\n\t\t\ttitle: {\n\t\t\t\tmain: {\n\t\t\t\t\ttext:\"Dipendenti\",\n\t\t\t\t\tclasses: \"n7-main-widget-title\",\n\t\t\t\t},\n\t\t\t\tsecondary: {\n\t\t\t\t\ttext: \"Dipendeti al 10/10/10\",\n\t\t\t\t\tclasses: \"n7-secondary-widget-title\",\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n}\n","import { DataSource } from '@n7-frontend/core';\nimport { DATA_WIDGET_MOCK } from \"@n7-frontend/components\";\n\nexport class DvWidgetDS extends DataSource {\n\n\tprotected transform(data){\n        return DATA_WIDGET_MOCK\n\t}\n}\n","import { EventHandler } from '@n7-frontend/core';\n\nexport class DvDataWidgetEH extends EventHandler {\n    public listen() {\n        console.log(\"....\")\n    }\n}","import { DvExampleLayoutDS } from './example-layout.ds';\nimport { DvExampleLayoutEH } from './example-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const DvExampleLayoutConfig = {\n  layoutId: 'dv-example-layout',\n  /**\n   * Array of components you want to use\n   * in this leyout\n   */\n  widgets: [\n    { id: 'dv-inner-title', hasStaticData: true },\n    { id: 'dv-widget', hasStaticData: true },\n    { id: 'dv-graph', hasStaticData: true },\n  ],\n  layoutDS: DvExampleLayoutDS,\n  layoutEH: DvExampleLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractLayout } from '../../../common/models/abstract-layout'\nimport { DvExampleLayoutConfig as config } from './example-layout.config';\n\n@Component({\n    selector: 'dv-example-layout',\n    templateUrl: './example-layout.html'\n})\nexport class DvExampleLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n    constructor(){\n        super(config);\n    }\n\n    ngOnInit(){\n        this.onInit();\n    }\n\n    ngOnDestroy(){\n        this.onDestroy();\n    }\n}","// MODULES\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DvComponentsLibModule } from '@n7-frontend/components';\nimport { N7BoilerplateCommonModule } from '../common/n7-boilerplate-common.module';\n//COMPONENTS\nimport { DataWidgetWrapperComponent } from './components/data-widget-wrapper/data-widget-wrapper';\n// LAYOUTS\nimport { DvExampleLayoutComponent } from './layout/example-layout/example-layout';\n\nconst COMPONENTS = [\n  DataWidgetWrapperComponent,\n  DvExampleLayoutComponent,\n];\n\n@NgModule({\n  declarations: COMPONENTS,\n  imports: [\n    CommonModule,\n    DvComponentsLibModule,\n    N7BoilerplateCommonModule,\n  ],\n  providers: [],\n  exports: COMPONENTS\n})\nexport class N7BoilerplateDataVizModule { }","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { N7BoilerplateCommonModule } from './common/n7-boilerplate-common.module';\nimport { N7BoilerplateAriannaWebModule } from './arianna-web/n7-boilerplate-arianna-web.module';\nimport { N7BoilerplateDataVizModule} from './data-viz/n7-boilerplate-data-viz.module';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  providers: [],\n  exports: [\n    //COMMON\n    N7BoilerplateCommonModule,\n    //AW\n    N7BoilerplateAriannaWebModule,\n    //DV\n    N7BoilerplateDataVizModule,\n  ]\n})\nexport class N7BoilerplateLibModule { }\n"]}