{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://@n7-frontend/boilerplate/lib/common/services/configuration.service.ts","ng://@n7-frontend/boilerplate/lib/common/services/layouts-configuration.service.ts","ng://@n7-frontend/boilerplate/lib/common/services/main-state.service.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/apollo/config.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/apollo/apollo.provider.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/rest/config.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication-providers/rest/rest.provider.ts","ng://@n7-frontend/boilerplate/lib/common/services/communication.service.ts","ng://@n7-frontend/boilerplate/lib/common/models/abstract-layout.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/header.ds.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/subnav.ds.ts","ng://@n7-frontend/boilerplate/lib/common/data-sources/breadcrumbs.ds.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/header.eh.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/subnav.eh.ts","ng://@n7-frontend/boilerplate/lib/common/event-handlers/breadcrumbs.eh.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.config.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/main-layout/main-layout.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.config.ts","ng://@n7-frontend/boilerplate/lib/common/layouts/page404-layout/page404-layout.ts","ng://@n7-frontend/boilerplate/lib/common/n7-boilerplate-common.module.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/hero.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/table.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-hero-patrimonio.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-bubble-chart.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-facets-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-item-preview-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/data-sources/home-item-tags-wrapper.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/table.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/hero.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-hero-patrimonio.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-bubble-chart.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-facets-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-item-preview-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/event-handlers/home-item-tags-wrapper.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.config.ts","ng://@n7-frontend/boilerplate/lib/common/services/json-config.service.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/home-layout/home-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/about-layout/about-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/works-layout/works-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/patrimonio-layout/patrimonio-layout.ds.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/patrimonio-layout/patrimonio-layout.eh.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/patrimonio-layout/patrimonio-layout.config.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/layouts/patrimonio-layout/patrimonio-layout.ts","ng://@n7-frontend/boilerplate/lib/arianna-web/n7-boilerplate-arianna-web.module.ts","ng://@n7-frontend/boilerplate/lib/n7-boilerplate-lib.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","ConfigurationService","config","_this","defaults","get","key","set","value","global","keys","forEach","Injectable","args","providedIn","Inject","LayoutsConfigurationService","layouts","MainStateService","custom","default","headTitle","ReplaySubject","pageTitle","subnav","breadcrumbs","filters","get$","_get","getCustom$","update","newValue","_update","updateCustom","has","hasCustom","addCustom","stream$","Error","type","next","ApolloProviderConfig","getLastPosts","queryName","queryBody","globalFilter","ApolloProvider","http","providerConfig","providers","apollo","err","request$","requestId","options","params","method","httpOptions","query","paramsStr","makeParamsStr","replace","baseUrl","post","pipe","map","response","data","isArray","arrStr_1","val","subParamsStr","push","isNaN","join","indexOf","HttpClient","RestProviderConfig","RestProvider","rest","point","defaultMethod","toLowerCase","CommunicationService","communicationConfig","defaultProvider","provider","onError","catchError","error","handleError","console","warn","empty","AbstractLayout","widgets","lb","LayoutBuilder","layoutId","initPayload","onInit","ready$","subscribe","eventHandler","emitInner","init","widgetsConfig","widgetsDataSources","widgetsEventHandlers","dataSource","layoutDS","layoutEH","onDestroy","MainLayoutDS","tslib_1.__extends","_a","configuration","mainState","router","titleService","one","setTitle","onNavigate","payload","handler","path","navigate","LayoutDataSource","MainLayoutEH","_super","destroyed$","Subject","listen","innerEvents$","EventHandler","globalEvents$","takeUntil","HeaderDS","transform","DataSource","SubnavDS","classes","items","setActive","id","output","item","_meta","isActive","getActive","filter","BreadcrumbsDS","HeaderEH","emitGlobal","SubnavEH","source","BreadcrumbsEH","MainLayoutConfig","DS","EH","MainLayoutComponent","layoutsConfiguration","ngOnInit","ngOnDestroy","Component","selector","template","Router","Title","Page404LayoutDS","Page404LayoutEH","Page404LayoutConfig","Page404LayoutComponent","COMPONENTS","N7BoilerplateCommonModule","forRoot","ngModule","provide","useValue","NgModule","declarations","imports","CommonModule","HttpClientModule","DvComponentsLibModule","exports","AwHomeLayoutDS","facetData","facetInputs","allBubbles","selectedBubbles","numOfItemsStr","_bubbleChart","maxBubblesSelectable","entityBubbleIdMap","communication","log","entitiesData","ent","enabled","setAllBubblesFromApolloQuery","renderPreviewsFromApolloQuery","itemsPagination","numOfItems","totalCount","numOfThousand","numOfItemsTmpStr","onBubbleSelected","bubble","includes","updateBubblesAndItemPreviews","onBubbleDeselected","hasCloseIcon","selectedEntitiesIds","sB","entityId","offset","limit","renderItemTags","reset","currentToE","j","entitiesCountData","color","countData","entity","selected","width","window","innerWidth","bubbles","filterBubblesBasedOnFacetsEnabled","setBubbleChart","bubbleCref","result","typeOfEntity","filterBubbles","handleFacetSearchChange","change","inputPayload","handleFacetSearchEnter","enter","handleFacetHeaderClick","facetId","updateBubbles","enabledFacets","f","disableFacetsIds_1","fD","filteredSelectedBubbles","tagsData","sBubble","label","icon","onTagClicked","bubbleId","selectAll","each","_getSubnav","page","text","toUpperCase","_getBreadcrumbs","AwHomeLayoutEH","outerEvents$","bubblePayload","AwHeroDS","title","button","backgroundImage","input","placeholder","AwTableDS","TABLE_MOCK","AwHomeHeroPatrimonioDS","image","AwHomeBubbleChartDS","thresholdShowTitle","thresholdShowValue","cWidth","document","getElementById","offsetWidth","containerSize","bubblesData","containerId","containerWidth","containerHeight","isForceSimulationEnabled","maxBubblesSelected","maxBubbleCount","minBubbleCount","numOfBubbles","numOfSelectedBubbles","count","Math","bId","bubblePercentage","bubbleRadius","sqrt","bubbleData","texts","radius","x_function","x","y_function","mNum","y","user_select","fontSize_function","cHeight","xPull","xPullStrength","yPull","yPullStrength","collisionStrengh","collisionIterations","velocityDecay","setUpdateReference","AwHomeFacetsWrapperDS","headers","inputs","facet","iconLeft","additionalText","iconRight","disabled","String","widgetData","header","AwHomeItemPreviewWrapperDS","infoGroup","info","toeGroup","relatedTOEData","rToe","metadata","thumbnail","AwHomeItemTagsWrapperDS","AwTableEH","AwHeroEH","emitOuter","AwHomeHeroPatrimonioEH","AwHomeBubbleChartEH","event","AwHomeFacetsWrapperEH","AwHomeItemPreviewWrapperEH","AwHomeItemTagsWrapperEH","AwHomeLayoutConfig","hasStaticData","JsonConfigService","load","of","tap","_handleResponse","toPromise","AwHomeLayoutComponent","AwAboutLayoutDS","AwAboutLayoutEH","AwAboutLayoutConfig","layoutOptions","AwAboutLayoutComponent","AwWorksLayoutDS","AwWorksLayoutEH","AwWorksLayoutConfig","AwWorksLayoutComponent","AwPatrimonioLayoutDS","AwPatrimonioLayoutEH","AwPatrimonioLayoutConfig","AwPatrimonioLayoutComponent","N7BoilerplateAriannaWebModule","N7BoilerplateLibModule"],"mappings":"60BAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAGrB,SAASO,EAAUR,EAAGC,GAEzB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GAG5E,IAAIK,EAAW,WAQlB,OAPAA,EAAWZ,OAAOa,QAAU,SAAkBC,GAC1C,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAE5C,IAAK,IAAIZ,KADTW,EAAIG,UAAUF,GACOhB,OAAOU,UAAUL,eAAee,KAAKL,EAAGX,KAAIU,EAAEV,GAAKW,EAAEX,IAE9E,OAAOU,IAEKO,MAAMb,KAAMU,YCrChC,IAAAI,EAAA,WAQE,SAAAA,EAAsCC,GAAtC,IAAAC,EAAAhB,KAAsCA,KAAAe,OAAAA,EAF9Bf,KAAAiB,SAAgB,GAUjBjB,KAAAkB,IAAG,SAAIC,GAAQ,OAAAH,EAAKC,SAASE,IAC7BnB,KAAAoB,IAAG,SAAID,EAAKE,GAAU,OAAAL,EAAKC,SAASE,GAAOE,GAR7CrB,KAAKe,OAAOO,QACb9B,OAAO+B,KAAKvB,KAAKe,OAAOO,QAAQE,QAAO,SAACL,GACtCH,EAAKI,IAAID,EAAKH,EAAKD,OAAOO,OAAOH,iCATxCM,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,6EAKCC,EAAAA,OAAMF,KAAA,CAAC,4IARtB,GCAA,IAAAG,EAAA,WAQE,SAAAA,EAAsCd,GAAtC,IAAAC,EAAAhB,KAAsCA,KAAAe,OAAAA,EAF9Bf,KAAAiB,SAAgB,GAUjBjB,KAAAkB,IAAG,SAAIC,GAAQ,OAAAH,EAAKC,SAASE,IAC7BnB,KAAAoB,IAAG,SAAID,EAAKE,GAAU,OAAAL,EAAKC,SAASE,GAAOE,GAR7CrB,KAAKe,OAAOe,SACbtC,OAAO+B,KAAKvB,KAAKe,OAAOe,SAASN,QAAO,SAACL,GACvCH,EAAKI,IAAID,EAAKH,EAAKD,OAAOe,QAAQX,iCATzCM,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,6EAKCC,EAAAA,OAAMF,KAAA,CAAC,4IARtB,GCAA,IAAAK,EAAA,WAGA,SAAAA,IAAA,IAAAf,EAAAhB,KAKUA,KAAAgC,OAAc,GAGdhC,KAAAiC,QAMJ,CACFC,UAAW,IAAIC,EAAAA,cACfC,UAAW,IAAID,EAAAA,cACfE,OAAQ,IAAIF,EAAAA,cACZG,YAAa,IAAIH,EAAAA,cACjBI,QAAS,IAAIJ,EAAAA,eAGRnC,KAAAwC,KAAI,SAAIrB,GAAgB,OAAAH,EAAKyB,KAAK,UAAWtB,IAC7CnB,KAAA0C,WAAU,SAAIvB,GAAgB,OAAAH,EAAKyB,KAAK,SAAUtB,IAElDnB,KAAA2C,OAAM,SAAIxB,EAAayB,GAAkB,OAAA5B,EAAK6B,QAAQ,UAAW1B,EAAKyB,IACtE5C,KAAA8C,aAAY,SAAI3B,EAAayB,GAAkB,OAAA5B,EAAK6B,QAAQ,SAAU1B,EAAKyB,IAE3E5C,KAAA+C,IAAG,SAAI5B,GAAgB,QAAEH,EAAKiB,QAAQd,IACtCnB,KAAAgD,UAAS,SAAI7B,GAAgB,QAAEH,EAAKgB,OAAOb,WAE3CY,EAAA7B,UAAA+C,UAAP,SAAiB9B,EAAa+B,GAC5B,GAAGlD,KAAKgC,OAAOb,GAAM,MAAMgC,MAAM,iBAAiBhC,EAAG,YAErDnB,KAAKgC,OAAOb,GAAO+B,GAGbnB,EAAA7B,UAAA2C,QAAR,SAAgBO,EAAcjC,EAAayB,GACzC,IAAI5C,KAAKoD,GAAO,MAAMD,MAASC,EAAI,kCACnC,IAAIpD,KAAKoD,GAAMjC,GAAM,MAAMgC,MAASC,EAAI,WAAWjC,EAAG,qBAEtDnB,KAAKoD,GAAMjC,GAAKkC,KAAKT,IAGfb,EAAA7B,UAAAuC,KAAR,SAAaW,EAAcjC,GACzB,IAAInB,KAAKoD,GAAO,MAAMD,MAASC,EAAI,kCACnC,IAAIpD,KAAKoD,GAAMjC,GAAM,MAAMgC,MAASC,EAAI,WAAWjC,EAAG,qBAEtD,OAAOnB,KAAKoD,GAAMjC,wBAhDrBM,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,kHAJd,GCAA,IAAa2B,EAAuB,CAClCC,aAAgB,CACdC,UAAW,eACXC,UAAW,0GASbC,aAAe,CACbF,UAAW,eACXC,UAAU,m6BCddE,EAAA,WAeE,SAAAA,EACU5C,EACA6C,GADA5D,KAAAe,OAAAA,EACAf,KAAA4D,KAAAA,EAER,IACE5D,KAAK6D,eAAiB7D,KAAKe,OAAOG,IAAI,iBAAiB4C,UAAUC,OACjE,MAAMC,GACN,MAAMb,MAAM,gDAIhBQ,EAAAzD,UAAA+D,SAAA,SAASC,EAAWC,GACV,IAAAC,EAAAD,EAAAC,OAAQC,EAAAF,EAAAE,OAAQC,EAAAH,EAAAG,YACpBC,EAAQjB,EAAqBY,GAE9BlE,KAAK6D,eAAe9C,QAAUf,KAAK6D,eAAe9C,OAAOmD,KAC1DK,EAAQvE,KAAK6D,eAAe9C,OAAOmD,IAI/B,IAAAV,GADNe,EAAQA,GAAS,IACXf,UAAWC,EAAAc,EAAAd,UAGjB,IAAID,IAAcC,EAAW,MAAMN,MAAM,kCAAkCe,EAAS,KAEpF,GAAGE,EAAO,KACJI,EAAYxE,KAAKyE,cAAcL,GACnCX,EAAYA,EAAUiB,QAAQ,aAAcF,QAE5Cf,EAAYA,EAAUiB,QAAQ,eAAgB,IAWhD,OANGL,GAAqB,QAAXA,EACDrE,KAAK4D,KAAK1C,IAAIlB,KAAK6D,eAAec,SAElC3E,KAAK4D,KAAKgB,KAAK5E,KAAK6D,eAAec,QAAS,CAAEJ,MAAOd,GAAaa,IAG/DO,KACbC,EAAAA,IAAG,SAAEC,GAAkB,OAAAA,EAASC,KAAKxB,OAIjCG,EAAAzD,UAAAuE,cAAR,SAAsBL,GAAtB,IAAApD,EAAAhB,KACMwE,EAAY,GAwBhB,OAvBAhF,OAAO+B,KAAK6C,GAAQ5C,QAAO,SAACL,GAC1B,GAAGxB,MAAMsF,QAAQb,EAAOjD,IAAM,KACxB+D,EAAS,GACbd,EAAOjD,GAAKK,QAAO,SAAE2D,GACnB,GAAiB,iBAAd,EAAuB,KACpBC,EAAepE,EAAKyD,cAAcU,GACtCD,EAAOG,KAAK,KAAKD,EAAY,WAEzBE,MAAMH,GACLD,EAAOG,KAAK,IAAIF,EAAG,KADRD,EAAOG,KAAK,GAAGF,KAInCX,EAAUa,KAAQlE,EAAG,MAAM+D,EAAOK,KAAK,KAAI,UACtC,GAA0B,iBAAfnB,EAAOjD,IAAoBiD,EAAOjD,GAAM,KAClDiE,EAAepE,EAAKyD,cAAcL,EAAOjD,IAC7CqD,EAAUa,KAAQlE,EAAG,OAAOiE,EAAY,UACX,iBAAfhB,EAAOjD,IAAyC,IAArBA,EAAIqE,QAAQ,KACvDhB,EAAUa,KAAQlE,EAAIuD,QAAQ,IAAK,IAAG,KAAKN,EAAOjD,IAE9CmE,MAAMlB,EAAOjD,IACZqD,EAAUa,KAAQlE,EAAG,MAAMiD,EAAOjD,GAAI,KADnBqD,EAAUa,KAAQlE,EAAG,KAAKiD,EAAOjD,MAItDqD,EAAUe,KAAK,0BA5EzB9D,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,oDAPLb,SAFA2E,EAAAA,6JADT,GCAA,IAAaC,EAAqB,CAChCnC,aAAgB,SCDlBoC,EAAA,WAaE,SAAAA,EACU5E,EACA6C,GADA5D,KAAAe,OAAAA,EACAf,KAAA4D,KAAAA,EAER,IACE5D,KAAK6D,eAAiB7D,KAAKe,OAAOG,IAAI,iBAAiB4C,UAAU8B,KACjE,MAAM5B,GACN,MAAMb,MAAM,8CAIhBwC,EAAAzF,UAAA+D,SAAA,SAASC,EAAWC,QAAA,IAAAA,IAAAA,EAAA,IACZ,IAAAC,EAAAD,EAAAC,OAAQC,EAAAF,EAAAE,OAAQC,EAAAH,EAAAG,YAClBuB,EAAQH,EAAmBxB,GAU/B,GAPIG,IAAQA,EAASrE,KAAK6D,eAAeiC,eAAiB,OAEvD9F,KAAK6D,eAAe9C,QAAUf,KAAK6D,eAAe9C,OAAOmD,KAC1D2B,EAAQ7F,KAAK6D,eAAe9C,OAAOmD,KAIjC2B,EAAO,MAAM1C,MAAM,kCAAkCe,EAAS,KAElE,GAAc,SAAXG,GAAgC,QAAXA,EACtB,OAAOrE,KAAK4D,KAAKS,EAAO0B,eAAe/F,KAAK6D,eAAec,QAAUkB,EAAOzB,EAAQE,GAC/E,GAAc,QAAXD,GAA+B,WAAXA,EAC5B,OAAOrE,KAAK4D,KAAKS,EAAO0B,eAAe/F,KAAK6D,eAAec,QAAUkB,EAAOvB,GAE5E,MAAMnB,MAAM,eAAekB,EAAM,uCApCtC5C,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,oDALLb,SAFA2E,EAAAA,6JADT,GCAA,IAAAO,EAAA,WAcE,SAAAA,EACUjF,EACAgD,EACA6B,GAFA5F,KAAAe,OAAAA,EACAf,KAAA+D,OAAAA,EACA/D,KAAA4F,KAAAA,EAER,IACE5F,KAAKiG,oBAAsBjG,KAAKe,OAAOG,IAAI,iBAC3ClB,KAAKkG,gBAAkBlG,KAAKiG,oBAAoBC,gBAChD,MAAMlC,GACN,MAAMb,MAAM,8DAIhB6C,EAAA9F,UAAA+D,SAAA,SAASC,EAAWC,EAAmBgC,GAAvC,IAAAnF,EAAAhB,KAEE,QAFkB,IAAAmE,IAAAA,EAAA,KAEdnE,KADJmG,EAAWA,GAAYnG,KAAKkG,iBACR,MAAM/C,MAAM,eAAegD,EAAQ,aAE/C,IAAAC,EAAAjC,EAAAiC,QACR,OAAOpG,KAAKmG,GAAUlC,SAASC,EAAWC,GACvCU,KACCwB,EAAAA,WAAU,SAAEC,GAAU,OAAAtF,EAAKuF,YAAYD,EAAOF,OAIpDJ,EAAA9F,UAAAqG,YAAA,SAAYD,EAAOF,GAOjB,OANGA,EACDA,EAAQE,GAERE,QAAQC,KAAK,6CAA8CH,GAGtDI,EAAAA,6BAtCVjF,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,oDAPLb,SACA6C,SACAgC,uJAHT,GCEA,iBAKE,SAAAgB,EAAY5F,GACVf,KAAKe,OAASA,EACdf,KAAK4G,QAAU5G,KAAKe,OAAO6F,QAC3B5G,KAAK6G,GAAK,IAAIC,EAAAA,cAAc9G,KAAKe,OAAOgG,UAuB5C,OApBYJ,EAAAzG,UAAA8G,YAAV,aAEUL,EAAAzG,UAAA+G,OAAV,WAAA,IAAAjG,EAAAhB,KAEEA,KAAK6G,GAAGK,OAAOC,UAAS,WACtBnG,EAAK6F,GAAGO,aAAaC,UAAU,OAAQrG,EAAKgG,iBAG9ChH,KAAK6G,GAAGS,KAAK,CACXC,cAAevH,KAAK4G,QACpBY,mBAAoBxH,KAAKe,OAAOyG,mBAChCC,qBAAsBzH,KAAKe,OAAO0G,qBAClCC,WAAY,IAAI1H,KAAKe,OAAO4G,SAC5BP,aAAc,IAAIpH,KAAKe,OAAO6G,YAIxBjB,EAAAzG,UAAA2H,UAAV,WACE7H,KAAK6G,GAAGO,aAAaC,UAAU,YAEnCV,uBC/BA,SAAAmB,mDAoDA,OApDkCC,EAAAA,EAAAA,GAShCD,EAAA5H,UAAA+G,OAAA,SAAOe,GAAP,IAAAhH,EAAAhB,KAASiI,EAAAD,EAAAC,cAAeC,EAAAF,EAAAE,UAAWC,EAAAH,EAAAG,OAAQhE,EAAA6D,EAAA7D,QAASiE,EAAAJ,EAAAI,aAClDpI,KAAKiI,cAAgBA,EACrBjI,KAAKkI,UAAYA,EACjBlI,KAAKmI,OAASA,EACdnI,KAAKoI,aAAeA,EACpBpI,KAAKmE,QAAUA,EAGfnE,KAAKqI,IAAI,UAAU1F,OAAO3C,KAAKiI,cAAc/G,IAAI,WAGjDlB,KAAKkI,UAAU1F,KAAK,aAAa2E,UAAS,SAAChC,GAAO,OAAAnE,EAAKoH,aAAaE,SAASnD,KAC7EnF,KAAKkI,UAAU1F,KAAK,aAAa2E,UAAS,SAAChC,GAAO,OAAAnE,EAAKoB,UAAY+C,IACnEnF,KAAKkI,UAAU1F,KAAK,UAAU2E,UAAS,SAAChC,GAAO,OAAAnE,EAAKqH,IAAI,UAAU1F,OAAOwC,KACzEnF,KAAKkI,UAAU1F,KAAK,eAAe2E,UAAS,SAAChC,GAAO,OAAAnE,EAAKqH,IAAI,eAAe1F,OAAOwC,MAqBrF2C,EAAA5H,UAAAqI,WAAA,SAAWC,GAET,GAAuB,WAApBA,EAAQC,QAAqB,CAE9B,IAAID,EAAQE,KAAM,MAAMvF,MAAM,2CAC9BnD,KAAKmI,OAAOQ,SAASH,EAAQE,QAGnCZ,GApDkCc,EAAAA,oCCElC,SAAAC,IAAA,IAAA7H,EAAA,OAAA8H,GAAAA,EAAAjI,MAAAb,KAAAU,YAAAV,YACUgB,EAAA+H,WAA2B,IAAIC,EAAAA,UAiCzC,OAlCkCjB,EAAAA,EAAAA,GAGzBc,EAAA3I,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAOpF,GACL,IAAK,mBACHpC,EAAK0G,WAAWT,OAAOuB,GACvB,MAEF,IAAK,sBACDxH,EAAK+H,WAAW1F,UASxB8F,EAAAA,aAAaC,cAAcvE,KACzBwE,EAAAA,UAAUrJ,KAAK+I,aACf5B,UAAS,SAAEa,OAAC5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QAClB,OAAOpF,GACL,IAAK,kBACHpC,EAAK0G,WAAWa,WAAWC,OASrCK,GAlCkCM,EAAAA,gCCFlC,SAAAG,mDAIA,OAJ8BvB,EAAAA,EAAAA,GAClBuB,EAAApJ,UAAAqJ,UAAV,SAAoBvE,GAClB,OAAOA,GAEXsE,GAJ8BE,EAAAA,0BCA9B,SAAAC,mDAwBA,OAxB8B1B,EAAAA,EAAAA,GAElB0B,EAAAvJ,UAAAqJ,UAAV,SAAoBvE,GAClB,MAAO,CACL0E,QAAS,cACTC,MAAO3E,IAIXyE,EAAAvJ,UAAA0J,UAAA,SAAUC,GACR7J,KAAK8J,OAAOH,MAAMnI,QAAO,SAACuI,GACrBA,EAAKC,MAAMH,KAAOA,GACnBE,EAAKL,QAAU,aACfK,EAAKC,MAAMC,UAAW,IAEtBF,EAAKL,QAAU,GACfK,EAAKC,MAAMC,UAAW,MAK5BR,EAAAvJ,UAAAgK,UAAA,WACE,OAAOlK,KAAK8J,OAAOH,MAAMQ,OAAM,SAACJ,GAAQ,OAAAA,EAAKC,MAAMC,WAAU,IAAM,MAEvER,GAxB8BD,EAAAA,0BCC9B,SAAAY,mDAIA,OAJmCrC,EAAAA,EAAAA,GACvBqC,EAAAlK,UAAAqJ,UAAV,SAAoBvE,GAClB,OAAOA,GAEXoF,GAJmCZ,EAAAA,mFCDnC,SAAAa,mDAuBA,OAvB8BtC,EAAAA,EAAAA,GAErBsC,EAAAnK,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAOpF,GACL,IAAK,eAGHpC,EAAKsJ,WAAW,WAAY,CAC1B7B,QAAS,SACTC,KAAM,CAACF,SAanB6B,GAvB8BlB,EAAAA,4BCA9B,SAAAoB,mDAmBA,OAnB8BxC,EAAAA,EAAAA,GACrBwC,EAAArK,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAOpF,GACL,IAAK,eAEmB,aAAnBoF,EAAQgC,QACTxJ,EAAKsJ,WAAW,WAAY9B,GAI9BxH,EAAKsJ,WAAWlH,EAAMoF,OAQhC+B,GAnB8BpB,EAAAA,4BCA9B,SAAAsB,mDAmBA,OAnBmC1C,EAAAA,EAAAA,GAC1B0C,EAAAvK,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAOpF,GACL,IAAK,oBAEmB,aAAnBoF,EAAQgC,QACTxJ,EAAKsJ,WAAW,WAAY9B,GAI9BxH,EAAKsJ,WAAWlH,EAAMoF,OAQhCiC,GAnBmCtB,EAAAA,uECGtBuB,EAAmB,CAC9B3D,SAAU,cACVH,QAAS,CAAC,CACRiD,GAAI,UACH,CACDA,GAAI,UACH,CACDA,GAAI,gBAENlC,SAAUG,EACVF,SAAUiB,EACVrB,mBAAoBmD,EACpBlD,qBAAsBmD,EACtBzG,QAAS,kBCJT,SAAA0G,EACU1C,EACAF,EACA6C,EACA5C,EACAE,GALV,IAAApH,EAOE8H,EAAAlI,KAAAZ,KAAM8K,EAAqB5J,IAAI,qBAAuBH,IAAOf,YANrDgB,EAAAmH,OAAAA,EACAnH,EAAAiH,cAAAA,EACAjH,EAAA8J,qBAAAA,EACA9J,EAAAkH,UAAAA,EACAlH,EAAAoH,aAAAA,IAsBZ,OA5ByCL,EAAAA,EAAAA,GAW7B8C,EAAA3K,UAAA8G,YAAV,WACE,MAAO,CACLiB,cAAejI,KAAKiI,cACpBC,UAAWlI,KAAKkI,UAChBC,OAAQnI,KAAKmI,OACbC,aAAcpI,KAAKoI,aACnBjE,QAASnE,KAAKe,OAAOoD,SAAW,KAIpC0G,EAAA3K,UAAA6K,SAAA,WACE/K,KAAKiH,UAGP4D,EAAA3K,UAAA8K,YAAA,WACEhL,KAAK6H,iCA9BRoD,EAAAA,UAASvJ,KAAA,CAAC,CACPwJ,SAAU,cACVC,SAAA,y2DAVKC,EAAAA,cAGAtK,SACAe,SACAE,SAJAsJ,EAAAA,SAuCTR,GA5ByClE,qBCXzC,SAAA2E,mDAMA,OANqCvD,EAAAA,EAAAA,GAGnCuD,EAAApL,UAAA+G,OAAA,SAAOe,OAAE7D,EAAA6D,EAAA7D,QACPnE,KAAKmE,QAAUA,GAEnBmH,GANqC1C,EAAAA,oCCCrC,SAAA2C,IAAA,IAAAvK,EAAA,OAAA8H,GAAAA,EAAAjI,MAAAb,KAAAU,YAAAV,YACUgB,EAAA+H,WAA2B,IAAIC,EAAAA,UAiCzC,OAlCqCjB,EAAAA,EAAAA,GAG5BwD,EAAArL,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAOpF,GACL,IAAK,yBACHpC,EAAK0G,WAAWT,OAAOuB,GACvB,MAEF,IAAK,4BACDxH,EAAK+H,WAAW1F,WAuB5BkI,GAlCqCpC,EAAAA,cCErC,IAAaqC,EAAsB,CACjCzE,SAAU,oBACVH,QAAS,GACTe,SAAU2D,EACV1D,SAAU2D,EACV/D,mBAAoBmD,EACpBlD,qBAAsBmD,EACtBzG,QAAS,kBCCT,SAAAsH,EAGEX,UAGAhC,EAAAlI,KAAAZ,KAAM8K,EAAqB5J,IAAI,wBAA0BH,IAAOf,KAmBpE,OA1B4C+H,EAAAA,EAAAA,GAUhC0D,EAAAvL,UAAA8G,YAAV,WACE,MAAO,CAIL7C,QAASnE,KAAKe,OAAOoD,SAAW,KAIpCsH,EAAAvL,UAAA6K,SAAA,WACE/K,KAAKiH,UAGPwE,EAAAvL,UAAA8K,YAAA,WACEhL,KAAK6H,iCA5BRoD,EAAAA,UAASvJ,KAAA,CAAC,CACPwJ,SAAU,oBACVC,SAAA,uGANKtJ,KAkCT4J,GA1B4C9E,GCKtC+E,EAAa,CACjBb,EACAY,GAGFE,EAAA,WAAA,SAAAA,KAwBA,OAbSA,EAAAC,QAAP,SAAe7K,GACb,MAAO,CACL8K,SAAUF,EACV7H,UAAW,CACT/B,EACAjB,EACAe,EACAmE,EACArC,EACA,CAAEmI,QAAS,SAAUC,SAAUhL,0BApBtCiL,EAAAA,SAAQtK,KAAA,CAAC,CACRuK,aAAcP,EACdQ,QAAS,CACPC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,uBAEFvI,UAAW,GACXwI,QAASZ,MAgBXC,EAxBA,iBCpBA,SAAAY,IAAA,IAAAvL,EAAA,OAAA8H,GAAAA,EAAAjI,MAAAb,KAAAU,YAAAV,YAIUgB,EAAAwL,UAAmB,KACnBxL,EAAAyL,YAAmB,GACnBzL,EAAA0L,WAAoB,KACrB1L,EAAA2L,gBAAyB,GACzB3L,EAAA4L,cAAwB,KAEvB5L,EAAA6L,aAAoB,KACpB7L,EAAA8L,qBAA8B,EAC9B9L,EAAA+L,kBAAyB,KAyRnC,OArSoChF,EAAAA,EAAAA,GAclCwE,EAAArM,UAAA+G,OAAA,SAAOe,GAAP,IAAAhH,EAAAhB,KAASgN,EAAAhF,EAAAgF,cAAe9E,EAAAF,EAAAE,UACtBlI,KAAKgN,cAAgBA,EACrBhN,KAAKkI,UAAYA,EAEjBlI,KAAKqI,IAAI,WAAW1F,OAAO,IAE3B3C,KAAKgN,cAAc/I,SAAS,eAAgB,CAC1CmC,QAAO,SAAGE,GAAU,OAAAE,QAAQyG,IAAI3G,MAC/Ba,UAAS,SAAEpC,GACZ/D,EAAKwL,UAAY,GACjBzH,EAASmI,aAAa1L,QAAO,SAAG2L,GAC9BnM,EAAKwL,UAAUnH,KAAIjF,EAAA,GAAM+M,EAAa,UAAA,CAAGC,SAAQ,OAEnDpM,EAAKqH,IAAI,0BAA0B1F,OAAO3B,EAAKwL,WAC/CxL,EAAKqM,6BAA6BtI,GAClC/D,EAAKsM,8BAA8BvI,KAIrC/E,KAAKkI,UAAUvF,OAAO,YAAa,sBACnC3C,KAAKkI,UAAUvF,OAAO,YAAa,6BAMrC4J,EAAArM,UAAAoN,8BAAA,SAA8BvI,GAC5B,GAAIA,GAAaA,EAASwI,gBAA1B,KAEIC,EAAazI,EAASwI,gBAAgBE,WAC1C,GAAGD,EAAW,EAAE,CAEd,QADIE,EAAgB,EACdF,EAAW,KACfA,GAAY,IACZE,GAAiB,MAEfC,EAAmBH,EAAa,GACjCA,EAAW,GAAIG,EAAmB,KAAKH,EAClCA,EAAW,MAAKG,EAAmB,IAAIH,GAE7CxN,KAAK4M,cADJc,EAAc,EACMA,EAAc,IAAIC,EAEnBH,EAAW,QAEjCxN,KAAK4M,cAAgB,KAGvB5M,KAAKqI,IAAI,gCAAgC1F,OAAOoC,EAASwI,gBAAgB5D,SAGpE4C,EAAArM,UAAA0N,iBAAP,SAAwBpF,GACnBA,GAAWA,EAAQqF,SAChB7N,KAAK2M,gBAAgBmB,SAAStF,EAAQqF,SACrC7N,KAAK2M,gBAAgBhM,OAAOX,KAAK8M,uBAClC9M,KAAK2M,gBAAgBtH,KAAKmD,EAAQqF,QAGlC7N,KAAK+N,kCAONxB,EAAArM,UAAA8N,mBAAP,SAA0BxF,GACrBA,GAAWA,EAAQqF,SACpB7N,KAAK2M,gBAAkB3M,KAAK2M,gBAAgBxC,OAAM,SAC/C5K,GAAM,OAAAA,EAAEsK,KAAKrB,EAAQqF,OAAOhE,KAC5BrB,EAAQqF,OAAOI,eAChBzF,EAAQqF,OAAOI,cAAa,EAE5BjO,KAAK+N,kCAKHxB,EAAArM,UAAA6N,6BAAR,WAAA,IAAA/M,EAAAhB,KACMkO,EAAsB,GACvBlO,KAAK+M,mBACR/M,KAAK2M,gBAAgBnL,QAAO,SAAG2M,OACzBC,EAAWpN,EAAK+L,kBAAkBoB,EAAGtE,IACtCuE,GACDF,EAAoB7I,KAAK+I,KAE7BpO,KAAKgN,cAAc/I,SAAS,eAAgB,CAC1CmC,QAAO,SAAGE,GAAU,OAAAE,QAAQyG,IAAI3G,IAChClC,OAAQ,CAAE8J,oBAAmBA,EACnBX,gBAAgB,CAAEc,OAAO,EAAEC,MAAM,MAC1CnH,UAAS,SAAEpC,GACZ/D,EAAKsM,8BAA8BvI,GACnC/D,EAAKuN,iBACLvN,EAAKqM,6BAA6BtI,GAAS,MAI/CwH,EAAArM,UAAAmN,6BAAA,SAA6BtI,EAAcyJ,GAA3C,IAAAxN,EAAAhB,KACE,GAAK+E,GAAaA,EAASmI,aAA3B,CACAlN,KAAK0M,WAAa,GAClB,IAAI,IAAIlM,EAAE,EAAEA,EAAEuE,EAASmI,aAAavM,OAAOH,IAEzC,QADIiO,EAAa1J,EAASmI,aAAa1M,GAC/BkO,EAAE,EAAEA,EAAED,EAAWE,kBAAkBhO,OAAO+N,IAChD1O,KAAK0M,WAAWrH,KAAIjF,EAAA,GAEbqO,EAAWE,kBAAkBD,GAAE,CAClCE,MAAMH,EAAWI,UAAUzL,KAAKwL,SAIxC5O,KAAK+M,kBAAoB,GACzB/M,KAAK0M,WAAWlL,QAAO,SAAGqM,GAKxB,OAFAA,EAAOhE,GAAK,KAAKgE,EAAOiB,OAAOjF,GAAGnF,QAAQ,KAAK,KAC/C1D,EAAK+L,kBAAkBc,EAAOhE,IAAIgE,EAAOiB,OAAOjF,GACzCgE,IAET7N,KAAK0M,WAAWlL,QAAO,SAAGqM,GACxBA,EAAOkB,UAAW,EAClB,IAAI,IAAIvO,EAAE,EAAGA,EAAEQ,EAAK2L,gBAAgBhM,OAAOH,IACtCQ,EAAK2L,gBAAgBnM,GAAGqJ,KAAKgE,EAAOhE,KAAIgE,EAAOkB,UAAS,KAG/D/O,KAAKqI,IAAI,wBAAwB1F,OAAO,CACtCqM,MAAOC,OAAOC,WAAW,IACzBC,QAASnP,KAAKoP,oCACdZ,MAASA,IAAe,EAExBa,eAAc,SAAGC,GAAe,OAAAtO,EAAK6L,aAAeyC,OAIxD/C,EAAArM,UAAAkP,kCAAA,WAAA,IAAApO,EAAAhB,KACMuP,EAASvP,KAAK0M,WAAWvC,OAAM,SAChC0D,GACC,IAAI,IAAIrN,EAAE,EAAGA,EAAEQ,EAAKwL,UAAU7L,OAAQH,IACpC,GAAIqN,EAAOiB,OAAOU,aAAa3F,KAAO7I,EAAKwL,UAAUhM,GAAG4C,KAAKyG,KACtD7I,EAAKwL,UAAUhM,GAAG4M,QAAW,OAAO,EAE7C,OAAO,IAIX,OADA5G,QAAQyG,IAAI,CAACwC,cAAcF,IACpBA,GAIThD,EAAArM,UAAAwP,wBAAA,SAAwBC,OAClBnH,EAAkBmH,EAAOC,aACzBvO,EAAgBsO,EAAOtO,MAE3BrB,KAAKyM,YAAYjE,GAAWnH,EAC5BmF,QAAQyG,IAAI,YAAazE,EAAU,gBAAkBnH,IAGvDkL,EAAArM,UAAA2P,uBAAA,SAAuBC,OACjBtH,EAAkBsH,EAAMF,aACxBvO,EAAgBrB,KAAKyM,YAAYjE,GAErChC,QAAQyG,IAAI,YAAczE,EAAU,gBAAkBnH,IAGxDkL,EAAArM,UAAA6P,uBAAA,SAAuBC,GAAvB,IAAAhP,EAAAhB,KACMiQ,GAAgB,EAChBC,EAAgBlQ,KAAKwM,UAAUrC,OAAM,SAAGgG,GAAM,OAAAA,EAAE/C,UAAUzM,OAe9D,GAdAX,KAAKwM,UAAUhL,QAAO,SAAG2O,GAClBA,EAAE/M,KAAKyG,KAAKmG,IACVG,EAAE/C,QACA8C,EAAc,IACfC,EAAE/C,SAAU,EACZ6C,GAAgB,IAGlBE,EAAE/C,SAAU,EACZ6C,GAAgB,MAIxBjQ,KAAKqI,IAAI,0BAA0B1F,OAAO3C,KAAKwM,WAC5CyD,EAAc,KACXG,EAAmB,GAKvB,GAJApQ,KAAKwM,UAAUhL,QAAO,SAAG6O,GACnBA,EAAGjD,SAASgD,EAAiB/K,KAAKgL,EAAGjN,KAAKyG,MAG7CuG,EAAiB,KACdE,EAA0BtQ,KAAK2M,gBAAgBxC,OAAM,SAAG0D,GAE1D,QADI2B,EAAe,GACXhP,EAAE,EAAEA,EAAEQ,EAAK0L,WAAW/L,OAAOH,IACnC,GAAGQ,EAAK0L,WAAWlM,GAAGqJ,KAAKgE,EAAOhE,GAAG,CACnC2F,EAAaxO,EAAK0L,WAAWlM,GAAGsO,OAAOU,aAAa3F,GACpD,MAGJ,OAAGuG,EAAiBtC,SAAS0B,KAG5Bc,EAAwB3P,QAAQX,KAAK2M,gBAAgBhM,SACtDX,KAAK2M,gBAAkB2D,EACvBtQ,KAAK+N,gCAGT/N,KAAK0M,WAAWlL,QAAO,SAAGqM,GACxBA,EAAOkB,UAAW,EAClB,IAAI,IAAIvO,EAAE,EAAGA,EAAEQ,EAAK2L,gBAAgBhM,OAAOH,IACtCQ,EAAK2L,gBAAgBnM,GAAGqJ,KAAKgE,EAAOhE,KAAIgE,EAAOkB,UAAS,KAG/D/O,KAAKqI,IAAI,wBAAwB1F,OAAO,CACtCqM,MAAOC,OAAOC,WAAW,IACzBC,QAAQnP,KAAKoP,oCACbC,eAAc,SAAGC,GAAe,OAAAtO,EAAK6L,aAAeyC,GACpDd,OAAM,MAKZjC,EAAArM,UAAAqO,eAAA,WAAA,IAAAvN,EAAAhB,KACMuQ,EAAW,GACfvQ,KAAK2M,gBAAgBnL,QAAO,SAAGgP,GAE7B,QADIC,EAAQ,GACJjQ,EAAE,EAAEA,EAAEQ,EAAK0L,WAAW/L,OAAOH,IACnC,GAAGQ,EAAK0L,WAAWlM,GAAGqJ,KAAK2G,EAAQ3G,GAAG,CACpC4G,EAAQzP,EAAK0L,WAAWlM,GAAGsO,OAAO2B,MAClC,MAGJF,EAASlL,KAAK,CAACoL,MAAKA,EAACC,KAAK,gBAAgBlI,QAAQgI,EAAQ3G,GAAGH,QAAQ,OAAO1I,EAAK0L,WAAWlM,GAAGsO,OAAOU,aAAa3F,OAErH7J,KAAKqI,IAAI,6BAA6B1F,OAAO4N,IAI/ChE,EAAArM,UAAAyQ,aAAA,SAAanI,GACX,GAAIA,EAAJ,KACMoI,EAASpI,EACZxI,KAAK6M,cACN7M,KAAK6M,aAAagE,UAAU,KAAKC,KAAI,SAAEvR,GAClCA,EAAEsK,KAAK+G,IAAUrR,EAAE0O,cAAe,KAGzCjO,KAAK2M,gBAAkB3M,KAAK2M,gBAAgBxC,OAAM,SAAG5K,GAAM,OAAAA,EAAEsK,KAAKrB,IAElExI,KAAK+N,iCAICxB,EAAArM,UAAA6Q,WAAR,WACE,MAAO,CAAC,OAAQ,UAAW,UAAUjM,IAAG,SAACkM,GAAQ,MAAA,CAC/CC,KAAMD,EAAKE,cACX1I,QAAS,CACPgC,OAAQ,WACR/B,QAAS,SACTC,KAAM,CAAC,MAAMsI,GACbnH,GAAImH,GAENhH,MAAO,CAAEH,GAAImH,OAITzE,EAAArM,UAAAiR,gBAAR,WACE,MAAO,CACLxH,MAAO,CAAC,CACN8G,MAAO,cACPjI,QAAS,CACPgC,OAAQ,WACR/B,QAAS,SACTC,KAAM,CAAC,aAGX,CACE+H,MAAO,cACPjI,QAAS,CACPgC,OAAQ,WACR/B,QAAS,SACTC,KAAM,CAAC,gBAKjB6D,GArSoC3D,EAAAA,oCCEpC,SAAAwI,IAAA,IAAApQ,EAAA,OAAA8H,GAAAA,EAAAjI,MAAAb,KAAAU,YAAAV,YACUgB,EAAA+H,WAA2B,IAAIC,EAAAA,UA4EzC,OA7EoCjB,EAAAA,EAAAA,GAG3BqJ,EAAAlR,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAOpF,GACL,IAAK,sBACHpC,EAAK0G,WAAWT,OAAOuB,GACvB,MAEF,IAAK,yBACDxH,EAAK+H,WAAW1F,UAQxBrD,KAAKqR,aAAalK,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAOpF,GACL,IAAK,iBACKoF,EAAAoH,aAAcpH,EAAAnH,MAEtB,MAEF,IAAK,+BACHL,EAAK0G,WAAWqI,uBAAuBvH,GACvC,MACF,IAAK,gCACHxH,EAAK0G,WAAWgI,wBAAwBlH,GACxC,MACF,IAAK,+BACHxH,EAAK0G,WAAWmI,uBAAuBrH,GACvC,MAEF,IAAK,6BACiB,WAAjBA,EAAQgC,OACTxJ,EAAK0G,WAAWkG,iBAAiB,CAAC0D,cAAc9I,EAAQ8I,cAAczD,OAAOrF,EAAQqF,SAC9D,UAAjBrF,EAAQgC,QACdxJ,EAAK0G,WAAWsG,mBAAmB,CAACsD,cAAc9I,EAAQ8I,cAAczD,OAAOrF,EAAQqF,SACzF,MAEF,IAAK,mCACHrH,QAAQyG,IAAI,qBAAqBzE,GAEjC,MAEF,IAAK,mCACHhC,QAAQyG,IAAI,qBAAqBzE,GAEjC,MAEF,IAAK,kCACDxH,EAAK0G,WAAWiJ,aAAanI,OAuBzC4I,GA7EoCjI,EAAAA,gCCDpC,SAAAoI,mDAmBA,OAnB8BxJ,EAAAA,EAAAA,GAElBwJ,EAAArR,UAAAqJ,UAAV,SAAoBvE,GAClBwB,QAAQyG,IAAI,CAACjI,KAAIA,IAcjB,MAbkB,CAChBwM,MAAO,iDACPP,KAAM,gGACNQ,OAAQ,CACNR,KAAM,QACNzI,QAAS,SAEXkJ,gBAAiB,kCACjBC,MAAO,CACLC,YAAa,iBACbpJ,QAAS,oBAKjB+I,GAnB8B/H,EAAAA,0BCA9B,SAAAqI,mDAKA,OAL+B9J,EAAAA,EAAAA,GAEnB8J,EAAA3R,UAAAqJ,UAAV,SAAoBvE,GAClB,OAAO8M,EAAAA,YAEXD,GAL+BrI,EAAAA,0BCD/B,SAAAuI,mDAeA,OAf4ChK,EAAAA,EAAAA,GAEhCgK,EAAA7R,UAAAqJ,UAAV,SAAoBvE,GAWlB,MAV6B,CAC3BwM,MAAO,WACPE,gBAAiB,8FACjBM,MAAO,kCACPf,KAAM,yuBACNQ,OAAQ,CACNR,KAAM,uBACNzI,QAAS,uBAKjBuJ,GAf4CvI,EAAAA,0BCC5C,SAAAyI,IAAA,IAAAjR,EAAA,OAAA8H,GAAAA,EAAAjI,MAAAb,KAAAU,YAAAV,YAEUgB,EAAAkR,mBAA4B,GAC5BlR,EAAAmR,mBAA4B,KAmGtC,OAtGyCpK,EAAAA,EAAAA,GAK7BkK,EAAA/R,UAAAqJ,UAAV,SAAoBvE,GAApB,IAAAhE,EAAAhB,KACE,IAAIgF,EAAM,OAAO,SAGXoN,EADiBC,SAASC,eAAe,0BACfC,YAI1BC,EAFU,IAEMJ,EAElBK,EAAc,CAChBC,YAAa,uBACbC,eAAiBP,EACjBQ,gBAPc,IAQdC,0BAA0B,EAC1BC,mBAAmB,EAGrBL,YAA6B,IAEzBM,GAAgB,EAChBC,GAAgB,EAChBC,EAAa,EACbxF,EAAW,EACXyF,EAAqB,EAuEzB,OAtEAlO,EAAKmK,QAAQ3N,QAAO,SAAEqM,GACjBkF,EAAelF,EAAOsF,QAAOJ,EAAelF,EAAOsF,QACnDH,EAAe,GAAKA,EAAenF,EAAOsF,SAAOH,EAAenF,EAAOsF,OAC1EF,IACAxF,GAAYI,EAAOsF,MAChBtF,EAAOkB,UAAUmE,MAEtB1M,QAAQyG,IAAI,CAACuF,cAAcY,KAAKnG,IAAIuF,GAAeS,aAAYA,EAACD,eAAcA,EAACD,eAAcA,EAACtF,WAAUA,EAACyF,qBAAoBA,IAC7HlO,EAAKmK,QAAQ3N,QAAO,SAAEqM,OAChBwF,EAAMxF,EAAOhE,GAGbyJ,GAAqBzF,EAAOsF,MAASH,EAAe,IAAuB,EAAfD,EAAqBC,EAAe,GAChGO,EAAgBH,KAAKnG,IAAIuF,GAAe,IAAsB,EAAjBc,IAAqB,GAAGF,KAAKI,KAAKP,IAC/EQ,EAAa,CACf5J,GAAIwJ,EACJK,MAAO,CACL,CACE7J,GAAGwJ,EAAI,UACP5C,MAAK,SAAGnR,GAAQ,OAAGA,EAAEqU,OAAO3S,EAAKkR,mBAA2B,KAAarE,EAAOiB,OAAO2B,OACvFmD,WAAU,SAAGtU,GAAM,OAAAA,EAAEuU,GACrBC,WAAU,SAAGxU,OACPyU,EAAQzU,EAAEqU,OAAO,EAErB,OADGrU,EAAEqU,OAAO3S,EAAKmR,qBAAoB4B,EAAK,GACnCzU,EAAE0U,EAAED,GAEbE,YAAc,OACdC,kBAAiB,SAAG5U,GAAM,OAAAA,EAAEqU,OAAO,GACnC/E,MAAO,QACPlF,QAAU,IAEZ,CACEG,GAAGwJ,EAAI,UACP5C,MAAK,SAAGnR,GAAQ,OAAGA,EAAEqU,OAAO3S,EAAKmR,mBAA2B,KAAatE,EAAOsF,OAChFS,WAAU,SAAGtU,GAAM,OAAAA,EAAEuU,GACrBC,WAAU,SAAGxU,GAAM,OAAAA,EAAE0U,EAAG1U,EAAEqU,OAAO,GACjCM,YAAc,OACdC,kBAAiB,SAAG5U,GAAM,OAAAA,EAAEqU,OAAO,GACnC/E,MAAO,QACPlF,QAAU,KAGdmK,EAAGzB,EAAO,EAAE,GACZ4B,EAAGG,IACHR,OAAUJ,EACV3E,MAAMf,EAAOe,MACbX,eAAgBJ,EAAOkB,UAAWlB,EAAOkB,SACzCvG,QAAQ,CACNqB,GAAIwJ,IAIRZ,EAAyB,YAAEpN,KAAKoO,KAIlChB,EAAiC,oBAAI,CACnC2B,MAAOhC,EAAO,EACdiC,eAAgB,IAChBC,MAAOH,IACPI,eAAgB,IAChBC,iBAAkB,IAClBC,oBAAqB,EACrBC,cAAe,KAGd1P,EAAKwJ,QAAOiE,EAAmB,MAAIzN,EAAKwJ,OAExCxJ,EAAK2P,qBAAoBlC,EAAgC,mBAAIzN,EAAK2P,oBAClE3P,EAAKqK,iBAAgBoD,EAA4B,eAAIzN,EAAKqK,gBACtDoD,GAEXR,GAtGyCzI,EAAAA,8BCDzC,SAAAoL,mDAyCA,OAzC2C7M,EAAAA,EAAAA,GAE/B6M,EAAA1U,UAAAqJ,UAAV,SAAoBvE,OACd6P,EAAiB,GACjBC,EAAgB,GAEpB9P,EAAKxD,QAAO,SAACuT,GAOXF,EAAQxP,KAAK,CACX2P,SAAUD,EAAM3R,KAAKsN,KACrBO,KAAM8D,EAAM3R,KAAKqN,MACjBwE,eAAgBF,EAAM5B,MACtB+B,UAAYH,EAAM3H,QAAU,cAAgB,oBAC5C1D,SAAUqL,EAAM3H,QAAU,QAAU,gBAAkB2H,EAAM3R,KAAKwL,MAAQ,IAAImG,EAAM3R,KAAKwL,MAAU,IAClGpG,QAASuM,EAAM3R,KAAKyG,KAGtBiL,EAAOzP,KAAK,CACVsM,MAAO,CACLC,YAAa,SACblB,KAAM,iBAENyE,UAAWJ,EAAM3H,QACjB5E,QAAS4M,OAAOL,EAAM3R,KAAKyG,IAAM,mBAMnCwL,EAAoB,GAIxB,OAHAR,EAAQ/P,IAAG,SAAGiF,EAAMvJ,GAClB6U,EAAWhQ,KAAM,CAAEiQ,OAAQvL,EAAM4H,MAAOmD,EAAOtU,OAE1C6U,GAGXT,GAzC2CpL,EAAAA,0BCA3C,SAAA+L,mDA6BA,OA7BgDxN,EAAAA,EAAAA,GAEpCwN,EAAArV,UAAAqJ,UAAV,SAAoBvE,OACduK,EAAS,GAwBb,OAvBAvK,EAAKxD,QAAO,SAACuI,OACPyL,EAAY,CACd,CAAE/E,MAAO,SAAUpP,MAAO,IAC1B,CAAEoP,MAAO,GAAIpP,MAAO,KACtB0I,EAAKA,KAAK0L,KAAKjU,QAAO,SAAEhB,GACX,WAARA,EAAEW,IAAgBqU,EAAU,GAAGnU,MAAMb,EAAEa,MAC1B,sBAARb,EAAEW,MAA2BqU,EAAU,GAAGnU,MAAMb,EAAEa,aAExDqU,EAAW3L,EAAK4L,eAAe7Q,IAAG,SAAE8Q,GACpC,MAAO,CACLnF,MAAOmF,EAAKxS,KAAKqN,MACjBpP,MAAOuU,EAAKzC,MACZzC,KAAMkF,EAAKxS,KAAKsN,QAGlBmF,EAAW,CAAC,CAAClM,MAAM6L,GAAW,CAAC7L,MAAM+L,IACzCnG,EAAOlK,KAAK,CACV2M,MAAOjI,EAAK+L,UACZtE,MAAOzH,EAAKA,KAAK0G,MACjBoF,SAAQA,EACRrN,QAASuB,EAAKA,KAAKF,OAGhB0F,GAEXgG,GA7BgD/L,EAAAA,0BCAhD,SAAAuM,mDAKA,OAL6ChO,EAAAA,EAAAA,GAEjCgO,EAAA7V,UAAAqJ,UAAV,SAAoBvE,GAClB,OAAOA,GAEX+Q,GAL6CvM,EAAAA,kMCA7C,SAAAwM,mDAcA,OAd+BjO,EAAAA,EAAAA,GAEtBiO,EAAA9V,UAAA+I,OAAP,aAYF+M,GAd+B7M,EAAAA,4BCA/B,SAAA8M,mDAsBA,OAtB8BlO,EAAAA,EAAAA,GAErBkO,EAAA/V,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAQpF,GACN,IAAK,gBAEH,MAEF,IAAK,iBACHpC,EAAKkV,UAAU,SAAU1N,OAYnCyN,GAtB8B9M,EAAAA,4BCA9B,SAAAgN,mDAsBA,OAtB4CpO,EAAAA,EAAAA,GAEnCoO,EAAAjW,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAM4E,EAAAQ,QACnC,OAAQpF,GACN,IAAK,gCACHpC,EAAKsJ,WAAW,WAAY,CAC1B7B,QAAS,SACTC,KAAM,CAAC,uBAcnByN,GAtB4ChN,EAAAA,4BCA5C,SAAAiN,mDAyBA,OAzByCrO,EAAAA,EAAAA,GAEhCqO,EAAAlW,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAACkP,GAC1B,OAAQA,EAAMjT,MACZ,IAAK,6BACHpC,EAAKkV,UAAU,QAAQG,EAAM7N,SAC7B,MACF,IAAK,mCACHxH,EAAKkV,UAAU,cAAcG,EAAM7N,SACnC,MACF,IAAK,mCACHxH,EAAKkV,UAAU,cAAcG,EAAM7N,aAa7C4N,GAzByCjN,EAAAA,6BCAzC,SAAAmN,mDAyBA,OAzB2CvO,EAAAA,EAAAA,GAElCuO,EAAApW,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAQpF,GAEN,IAAK,+BACHpC,EAAKkV,UAAU,QAAS1N,GACxB,MAEF,IAAK,gCACHxH,EAAKkV,UAAU,SAAU1N,GACzB,MAEF,IAAK,+BACHxH,EAAKkV,UAAU,QAAS1N,OAUlC8N,GAzB2CnN,EAAAA,6BCA3C,SAAAoN,mDAWA,OAXgDxO,EAAAA,EAAAA,GAEvCwO,EAAArW,UAAA+I,OAAP,aASFsN,GAXgDpN,EAAAA,6BCAhD,SAAAqN,mDAiBA,OAjB6CzO,EAAAA,EAAAA,GAEpCyO,EAAAtW,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAGkP,GAC5B,OAAOA,EAAMjT,MACX,IAAK,kCACHpC,EAAKkV,UAAU,QAAQG,EAAM7N,aAWvCgO,GAjB6CrN,EAAAA,0LCGhCsN,GAAqB,CAChC1P,SAAU,iBACVH,QAAS,CAAC,CACRiD,GAAI,WACH,CACDA,GAAI,0BACJ6M,eAAe,GACd,CACD7M,GAAI,wBACH,CACDA,GAAI,0BACH,CACDA,GAAI,6BACH,CACDA,GAAI,iCAENlC,SAAU4E,EACV3E,SAAUwJ,EACV5J,mBAAoBmD,EACpBlD,qBAAsBmD,GACtBzG,QAAS,ICzBXwS,GAAA,WAUE,SAAAA,EACU/S,EACA7C,GADAf,KAAA4D,KAAAA,EACA5D,KAAAe,OAAAA,SAGV4V,EAAAzW,UAAA0W,KAAA,SAAKlO,GAAL,IAAA1H,EAAAhB,KACE,OAAOA,KAAK4D,KAAK1C,IAAIwH,GAAM7D,KACzBwB,EAAAA,WAAU,SAAEC,GAAU,OAAAuQ,EAAAA,GAAG,MACzBC,EAAAA,IAAG,SAAC/R,GAAY,OAAA/D,EAAK+V,gBAAgBhS,MACrCiS,aAGIL,EAAAzW,UAAA6W,gBAAR,SAAwBhS,GAAxB,IAAA/D,EAAAhB,KACK+E,GACDvF,OAAO+B,KAAKwD,GAAUvD,QAAO,SAACL,GAAO,OAAAH,EAAKD,OAAOK,IAAID,EAAK4D,EAAS5D,2BAlBxEM,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,oDANL8D,EAAAA,kBAEA3E,oJAHT,sBCcE,SAAAmW,EACEnM,EACQ3C,EACAF,EACA+E,EACA9E,GALV,IAAAlH,EAOE8H,EAAAlI,KAAAZ,KAAM8K,EAAqB5J,IAAI,uBAAyBH,KAAOf,YALvDgB,EAAAmH,OAAAA,EACAnH,EAAAiH,cAAAA,EACAjH,EAAAgM,cAAAA,EACAhM,EAAAkH,UAAAA,IAsBZ,OA5B2CH,EAAAA,EAAAA,GAW/BkP,EAAA/W,UAAA8G,YAAV,WACE,MAAO,CACLiB,cAAejI,KAAKiI,cACpBC,UAAWlI,KAAKkI,UAChBC,OAAQnI,KAAKmI,OACb6E,cAAehN,KAAKgN,cACpB7I,QAASnE,KAAKe,OAAOoD,SAAW,KAIpC8S,EAAA/W,UAAA6K,SAAA,WACE/K,KAAKiH,UAGPgQ,EAAA/W,UAAA8K,YAAA,WACEhL,KAAK6H,iCA9BRoD,EAAAA,UAASvJ,KAAA,CAAC,CACPwJ,SAAU,iBACVC,SAAA,0yFAPKtJ,SAHAuJ,EAAAA,cAEAtK,SAIAkF,SAFAjE,KAoCTkV,GA5B2CtQ,sBCX3C,SAAAuQ,mDAIA,OAJqCnP,EAAAA,EAAAA,GACnCmP,EAAAhX,UAAA+G,OAAA,SAAOuB,KAGT0O,GAJqCtO,EAAAA,iCCArC,SAAAuO,mDAYA,OAZqCpP,EAAAA,EAAAA,GAE5BoP,EAAAjX,UAAA+I,OAAP,aAUFkO,GAZqChO,EAAAA,cCGxBiO,GAAsB,CACjCrQ,SAAU,kBACVH,QAAS,GACTe,SAAUuP,GACVtP,SAAUuP,GACV3P,mBAAoBmD,EACpBlD,qBAAsBmD,GACtByM,cAAe,mBCHf,SAAAC,WAEExO,EAAAlI,KAAAZ,KAAMe,KAAOf,KAWjB,OAd4C+H,EAAAA,EAAAA,GAM1CuP,EAAApX,UAAA6K,SAAA,WACE/K,KAAKiH,UAGPqQ,EAAApX,UAAA8K,YAAA,WACEhL,KAAK6H,iCAfRoD,EAAAA,UAASvJ,KAAA,CAAC,CACTwJ,SAAU,kBACVC,SAAA,0GAgBFmM,GAd4C3Q,kBCN5C,SAAA4Q,mDAIA,OAJqCxP,EAAAA,EAAAA,GACnCwP,EAAArX,UAAA+G,OAAA,SAAOuB,KAGT+O,GAJqC3O,EAAAA,iCCArC,SAAA4O,mDAYA,OAZqCzP,EAAAA,EAAAA,GAE5ByP,EAAAtX,UAAA+I,OAAP,aAUFuO,GAZqCrO,EAAAA,cCGxBsO,GAAsB,CACjC1Q,SAAU,kBACVH,QAAS,GACTe,SAAU4P,GACV3P,SAAU4P,GACVhQ,mBAAoBmD,EACpBlD,qBAAsBmD,GACtByM,cAAe,mBCHf,SAAAK,WAEE5O,EAAAlI,KAAAZ,KAAMe,KAAOf,KAWjB,OAd4C+H,EAAAA,EAAAA,GAM1C2P,EAAAxX,UAAA6K,SAAA,WACE/K,KAAKiH,UAGPyQ,EAAAxX,UAAA8K,YAAA,WACEhL,KAAK6H,iCAfRoD,EAAAA,UAASvJ,KAAA,CAAC,CACTwJ,SAAU,kBACVC,SAAA,0GAgBFuM,GAd4C/Q,kBCN5C,SAAAgR,mDA6BA,OA7B0C5P,EAAAA,EAAAA,GAiBxC4P,EAAAzX,UAAA+G,OAAA,SAAOe,OAAEC,EAAAD,EAAAC,cAAeC,EAAAF,EAAAE,UAAWC,EAAAH,EAAAG,OAAQhE,EAAA6D,EAAA7D,QAASiE,EAAAJ,EAAAI,aAClDpI,KAAKiI,cAAgBA,EACrBjI,KAAKkI,UAAYA,EACjBlI,KAAKmI,OAASA,EACdnI,KAAKoI,aAAeA,EACpBpI,KAAKmE,QAAUA,GAOnBwT,GA7B0C/O,EAAAA,qCCE1C,SAAAgP,IAAA,IAAA5W,EAAA,OAAA8H,GAAAA,EAAAjI,MAAAb,KAAAU,YAAAV,YACUgB,EAAA+H,WAA2B,IAAIC,EAAAA,UAkBzC,OAnB0CjB,EAAAA,EAAAA,GAGjC6P,EAAA1X,UAAA+I,OAAP,WAAA,IAAAjI,EAAAhB,KACEA,KAAKkJ,aAAa/B,UAAS,SAAEa,OAAE5E,EAAA4E,EAAA5E,KAAMoF,EAAAR,EAAAQ,QACnC,OAAQpF,GACN,IAAK,4BACHpC,EAAK0G,WAAWT,OAAOuB,GACvB,MAEF,IAAK,+BACHxH,EAAK+H,WAAW1F,WAQ1BuU,GAnB0CzO,EAAAA,cCC1C,IAAa0O,GAA2B,CACtC9Q,SAAU,gBAKVH,QAAS,GAGTe,SAAUgQ,GACV/P,SAAUgQ,GACVpQ,mBAAoBmD,EACpBlD,qBAAsBmD,GACtBzG,QAAS,mBCHT,SAAA2T,EACU3P,EACAF,EACA6C,EACA5C,EACAE,GALV,IAAApH,EAOE8H,EAAAlI,KAAAZ,KAAM8K,EAAqB5J,IAAI,6BAA+BH,KAAOf,YAN7DgB,EAAAmH,OAAAA,EACAnH,EAAAiH,cAAAA,EACAjH,EAAA8J,qBAAAA,EACA9J,EAAAkH,UAAAA,EACAlH,EAAAoH,aAAAA,IA2BZ,OAjCiDL,EAAAA,EAAAA,GAgBrC+P,EAAA5X,UAAA8G,YAAV,WACE,MAAO,CACLiB,cAAejI,KAAKiI,cACpBC,UAAWlI,KAAKkI,UAChBC,OAAQnI,KAAKmI,OACbC,aAAcpI,KAAKoI,aACnBjE,QAASnE,KAAKe,OAAOoD,SAAW,KAIpC2T,EAAA5X,UAAA6K,SAAA,WACE/K,KAAKiH,UAGP6Q,EAAA5X,UAAA8K,YAAA,WACEhL,KAAK6H,iCApCRoD,EAAAA,UAASvJ,KAAA,CAAC,CACTwJ,SAAU,uBACVC,SAAA,yIAVOC,EAAAA,cAGAtK,SACAe,SACAE,SAJAsJ,EAAAA,SA6CTyM,GAjCiDnR,OCH3C+E,GAAa,CACjBuL,GACAK,GACAI,GACAI,IAIFC,GAAA,WAAA,SAAAA,KAU6C,2BAV5C/L,EAAAA,SAAQtK,KAAA,CAAC,CACRuK,aAAcP,GACdQ,QAAS,CACPC,EAAAA,aACAE,EAAAA,sBACAV,GAEF7H,UAAW,GACXwI,QAASZ,OAEkCqM,EAV7C,GCnBAC,GAAA,WAKA,SAAAA,KAUsC,2BAVrChM,EAAAA,SAAQtK,KAAA,CAAC,CACRwK,QAAS,CACPC,EAAAA,cAEFrI,UAAW,GACXwI,QAAS,CACPX,EACAoM,QAGkCC,EAftC","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable, Inject } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigurationService {\n  private defaults: any = {};\n\n  constructor(@Inject('config') private config: any){\n    if(this.config.global){\n      Object.keys(this.config.global).forEach(key => {\n        this.set(key, this.config.global[key]);\n      });\n    }\n  }\n\n  public get = (key) => this.defaults[key];\n  public set = (key, value) => this.defaults[key] = value;\n}","import { Injectable, Inject } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LayoutsConfigurationService {\n  private defaults: any = {};\n\n  constructor(@Inject('config') private config: any){\n    if(this.config.layouts){\n      Object.keys(this.config.layouts).forEach(key => {\n        this.set(key, this.config.layouts[key]);\n      });\n    }\n  }\n\n  public get = (key) => this.defaults[key];\n  public set = (key, value) => this.defaults[key] = value;\n}","import { Injectable } from '@angular/core';\nimport { ReplaySubject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MainStateService {\n  // custom streams\n  private custom: any = {};\n  \n  // default streams\n  private default: {\n    headTitle: ReplaySubject<any>,\n    pageTitle: ReplaySubject<any>,\n    subnav: ReplaySubject<any>,\n    breadcrumbs: ReplaySubject<any>,\n    filters: ReplaySubject<any>,\n  } = {\n    headTitle: new ReplaySubject(),\n    pageTitle: new ReplaySubject(),\n    subnav: new ReplaySubject(),\n    breadcrumbs: new ReplaySubject(),\n    filters: new ReplaySubject(),\n  };\n\n  public get$ = (key: string) => this._get('default', key);\n  public getCustom$ = (key: string) => this._get('custom', key);\n\n  public update = (key: string, newValue: any) => this._update('default', key, newValue);\n  public updateCustom = (key: string, newValue: any) => this._update('custom', key, newValue);\n\n  public has = (key: string) => !!this.default[key];\n  public hasCustom = (key: string) => !!this.custom[key];\n\n  public addCustom(key: string, stream$: ReplaySubject<any>){\n    if(this.custom[key]) throw Error(`custom stream ${key} exists!`);\n\n    this.custom[key] = stream$;\n  }\n\n  private _update(type: string, key: string, newValue: any){\n    if(!this[type]) throw Error(`${type} stream group does not exists!`);\n    if(!this[type][key]) throw Error(`${type} stream ${key} does not exists!`);\n    \n    this[type][key].next(newValue);\n  }\n\n  private _get(type: string, key: string){\n    if(!this[type]) throw Error(`${type} stream group does not exists!`);\n    if(!this[type][key]) throw Error(`${type} stream ${key} does not exists!`);\n    \n    return this[type][key];\n  }\n\n}","export const ApolloProviderConfig = {\n  'getLastPosts': {\n    queryName: 'getLastPosts',\n    queryBody: `\n      {\n        getLastPosts(__PARAMS__) {\n          id\n          title\n        }\n      }\n    ` \n  },\n  'globalFilter':{\n    queryName: 'globalFilter',\n    queryBody:`{\n      globalFilter(__PARAMS__){\n        entitiesData {\n          countData {\n            type {\n              id\n              label\n              color\n              icon\n            }\n            count\n          }\n          entitiesCountData {\n            entity {\n              id\n              label\n              typeOfEntity {\n                id\n              }\n            }\n            count\n          }\n        }\n        itemsPagination {\n          totalCount\n          items {\n            item {\n              id\n              label\n              info {\n                key\n                value\n              }\n            }\n            thumbnail\n            relatedTOEData {\n              type {\n                id\n                label\n                icon\n                color\n              }\n              count\n            }\n          }\n        }\n      }\n    }`\n  }\n};","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http'\nimport { ApolloProviderConfig } from './config';\nimport { ConfigurationService } from '../../configuration.service';\nimport { ICommunicationProvider } from '../communication-provider.interface';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ApolloProvider implements ICommunicationProvider {\n  private providerConfig: any;\n\n  constructor(\n    private config: ConfigurationService,\n    private http: HttpClient,\n  ) {\n    try {\n      this.providerConfig = this.config.get('communication').providers.apollo;\n    } catch(err) {\n      throw Error('No config found for apollo provider!');\n    }\n  }\n\n  request$(requestId, options){\n    const { params, method, httpOptions } = options;\n    let query = ApolloProviderConfig[requestId];\n\n    if(this.providerConfig.config && this.providerConfig.config[requestId]){\n      query = this.providerConfig.config[requestId];\n    }\n\n    query = query || {};\n    let { queryName, queryBody } = query;\n\n    // config query control\n    if(!queryName || !queryBody) throw Error(`No config found for requestId \"${requestId}\"`);\n\n    if(params){\n      let paramsStr = this.makeParamsStr(params);\n      queryBody = queryBody.replace('__PARAMS__', paramsStr);\n    } else {\n      queryBody = queryBody.replace('(__PARAMS__)', '');\n    }\n\n    let source$: Observable<any>;\n\n    if(method && method === 'GET'){\n      source$ = this.http.get(this.providerConfig.baseUrl);\n    } else {\n      source$ = this.http.post(this.providerConfig.baseUrl, { query: queryBody }, httpOptions);  \n    }\n\n    return source$.pipe(\n      map((response: any) => response.data[queryName])\n    );\n  }\n\n  private makeParamsStr(params){\n    let paramsStr = [];\n    Object.keys(params).forEach(key => {\n      if(Array.isArray(params[key])){\n        let arrStr = [];\n        params[key].forEach( val => {\n          if(typeof(val)==='object'){\n            let subParamsStr = this.makeParamsStr(val);\n            arrStr.push(`{ ${subParamsStr} }`);\n          } else {\n            if(!isNaN(val)) arrStr.push(`${val}`);\n            else arrStr.push(`\"${val}\"`)\n          }\n        });\n        paramsStr.push(`${key}: [${arrStr.join(',')}]`);\n      } else if( typeof(params[key])==='object' && params[key] ){\n          let subParamsStr = this.makeParamsStr(params[key]);\n          paramsStr.push(`${key}: { ${subParamsStr} }`);\n      } else if( typeof(params[key])==='string' && key.indexOf('$') === 0){\n        paramsStr.push(`${key.replace('$', '')}: ${params[key]}`);\n      } else {\n        if(!isNaN(params[key])) paramsStr.push(`${key}: ${params[key]}`);\n        else paramsStr.push(`${key}: \"${params[key]}\"`);\n      }\n    });\n    return paramsStr.join(' ');\n  }\n\n}\n","export const RestProviderConfig = {\n  'getLastPosts': 'posts', \n};","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http'\nimport { RestProviderConfig } from './config';\nimport { ConfigurationService } from '../../configuration.service';\nimport { ICommunicationProvider } from '../communication-provider.interface';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RestProvider implements ICommunicationProvider {\n  private providerConfig: any;\n\n  constructor(\n    private config: ConfigurationService,\n    private http: HttpClient,\n  ) {\n    try {\n      this.providerConfig = this.config.get('communication').providers.rest;\n    } catch(err) {\n      throw Error('No config found for rest provider!');\n    }\n  }\n\n  request$(requestId, options: any = {}){\n    let { params, method, httpOptions } = options;\n    let point = RestProviderConfig[requestId];\n\n    // default method\n    if(!method) method = this.providerConfig.defaultMethod || 'GET';\n\n    if(this.providerConfig.config && this.providerConfig.config[requestId]){\n      point = this.providerConfig.config[requestId];\n    }\n\n    // config point control\n    if(!point) throw Error(`No config found for requestId \"${requestId}\"`);\n\n    if(method === 'POST' || method === 'PUT'){\n      return this.http[method.toLowerCase()](this.providerConfig.baseUrl + point, params, httpOptions);\n    } else if(method === 'GET' || method === 'DELETE'){\n      return this.http[method.toLowerCase()](this.providerConfig.baseUrl + point, httpOptions);\n    } else {\n      throw Error(`Rest method ${method} not supported`);\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ConfigurationService } from './configuration.service';\nimport { ApolloProvider } from './communication-providers/apollo/apollo.provider';\nimport { RestProvider } from './communication-providers/rest/rest.provider';\nimport { catchError } from 'rxjs/operators';\nimport { Observable, empty } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CommunicationService {\n  private defaultProvider: string;\n  private communicationConfig: any;\n\n  constructor(\n    private config: ConfigurationService,\n    private apollo: ApolloProvider,\n    private rest: RestProvider,\n  ){\n    try {\n      this.communicationConfig = this.config.get('communication');\n      this.defaultProvider = this.communicationConfig.defaultProvider;\n    } catch(err) {\n      throw Error('No communications.defaultProvider setted in config');\n    }\n  }\n\n  request$(requestId, options: any = {}, provider?){\n    provider = provider || this.defaultProvider;\n    if(!this[provider]) throw Error(`There is no ${provider} provider`);\n\n    const { onError } = options;\n    return this[provider].request$(requestId, options)\n      .pipe(\n        catchError((error) => this.handleError(error, onError))\n      );\n  }\n\n  handleError(error, onError): Observable<any> {\n    if(onError){\n      onError(error);\n    } else {\n      console.warn('No error handler for communication request', error);\n    }\n\n    return empty();\n  }\n}","import { LayoutBuilder } from '@n7-frontend/core';\n\nexport abstract class AbstractLayout {\n  protected config: any;\n  protected widgets: any[]; \n  public lb: any;\n  \n  constructor(config: any){\n    this.config = config;\n    this.widgets = this.config.widgets; \n    this.lb = new LayoutBuilder(this.config.layoutId);\n  }\n\n  protected initPayload(): any {};\n\n  protected onInit(){\n    // on ready\n    this.lb.ready$.subscribe(() => {\n      this.lb.eventHandler.emitInner('init', this.initPayload());\n    });\n\n    this.lb.init({\n      widgetsConfig: this.widgets,\n      widgetsDataSources: this.config.widgetsDataSources,\n      widgetsEventHandlers: this.config.widgetsEventHandlers,\n      dataSource: new this.config.layoutDS(),\n      eventHandler: new this.config.layoutEH(),\n    });\n  }\n\n  protected onDestroy(){\n    this.lb.eventHandler.emitInner('destroy');\n  }\n}","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class MainLayoutDS extends LayoutDataSource {\n  protected configuration: any;\n  protected mainState: any;\n  protected router: any;\n  protected titleService: any;\n\n  public options: any;\n  public pageTitle: string;\n\n  onInit({ configuration, mainState, router, options, titleService }){\n    this.configuration = configuration;\n    this.mainState = mainState;\n    this.router = router;\n    this.titleService = titleService;\n    this.options = options;\n\n    // update header\n    this.one('header').update(this.configuration.get('header'));\n\n    // main state updates\n    this.mainState.get$('headTitle').subscribe(val => this.titleService.setTitle(val));\n    this.mainState.get$('pageTitle').subscribe(val => this.pageTitle = val);\n    this.mainState.get$('subnav').subscribe(val => this.one('subnav').update(val));\n    this.mainState.get$('breadcrumbs').subscribe(val => this.one('breadcrumbs').update(val));\n\n    // mainState test\n    /* this.mainState.addCustom('customNav', new Subject());\n    this.mainState.get$('pageTitle').subscribe(val => console.log('pageTitle', val));\n    this.mainState.getCustom$('customNav').subscribe(val => console.log('customNav', val));\n\n    this.mainState.update('pageTitle', 'hola');\n    this.mainState.updateCustom('customNav', {'hello': 'mundo!'});\n    \n    setTimeout(() => {\n      this.mainState.update('pageTitle', 'chao');\n      this.mainState.updateCustom('customNav', {'hello': 'world!'});\n      console.log('has', {\n        'pageSubTitle' : this.mainState.has('pageSubTitle'),\n        'customNav' : this.mainState.hasCustom('customNav'),\n        'customNavs' : this.mainState.has('customNavs'),\n      });\n    }, 5000); */\n  }\n\n  onNavigate(payload){\n    // router navigation\n    if(payload.handler === 'router'){\n      // path control\n      if(!payload.path) throw Error('onNavigate: no path for router navigate');\n      this.router.navigate(payload.path);\n    }\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport class MainLayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type) {\n        case 'main-layout.init':\n          this.dataSource.onInit(payload);\n          break;\n\n        case 'main-layout.destroy':\n            this.destroyed$.next();\n            break;\n\n        default:\n            break;\n      }\n    });\n\n    // listen to global events\n    EventHandler.globalEvents$.pipe(\n      takeUntil(this.destroyed$)\n    ).subscribe(({type, payload}) => {\n      switch(type){\n        case 'global.navigate':\n          this.dataSource.onNavigate(payload);\n          break;\n          \n        default: \n          break;\n      }\n    });\n  }\n  \n}","import { DataSource } from '@n7-frontend/core';\n\nexport class HeaderDS extends DataSource {\n  protected transform(data) {\n    return data;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\n\nexport class SubnavDS extends DataSource {\n\n  protected transform(data) {\n    return {\n      classes: 'main-subnav',\n      items: data\n    }\n  }\n\n  setActive(id){\n    this.output.items.forEach(item => {\n      if(item._meta.id === id){\n        item.classes = 'is-current';\n        item._meta.isActive = true;\n      } else {\n        item.classes = '';\n        item._meta.isActive = false;\n      }\n    });\n  }\n\n  getActive(){\n    return this.output.items.filter(item => item._meta.isActive)[0] || null;\n  }\n}\n","import { DataSource } from '@n7-frontend/core';\nimport { IBreadcrumbsData } from '@n7-frontend/components';\n\nexport class BreadcrumbsDS extends DataSource {\n  protected transform(data): IBreadcrumbsData | null {\n    return data;\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class HeaderEH extends EventHandler {\n\n  public listen(){\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case 'header.click':\n          // navigate control\n          // if(payload.source === 'navigate'){\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: [payload]\n          });\n          // }\n          // global signal\n          // this.emitGlobal(type, payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n\n}\n","import { EventHandler } from '@n7-frontend/core';\n\nexport class SubnavEH extends EventHandler {\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case 'subnav.click':\n          // navigate control\n          if(payload.source === 'navigate'){\n            this.emitGlobal('navigate', payload);\n          }\n\n          // global signal\n          this.emitGlobal(type, payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class BreadcrumbsEH extends EventHandler {\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case 'breadcrumbs.click':\n          // navigate control\n          if(payload.source === 'navigate'){\n            this.emitGlobal('navigate', payload);\n          }\n\n          // global signal\n          this.emitGlobal(type, payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n}","import { MainLayoutDS } from './main-layout.ds';\nimport { MainLayoutEH } from './main-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const MainLayoutConfig = {\n  layoutId: 'main-layout',\n  widgets: [{\n    id: 'header'\n  }, {\n    id: 'subnav'\n  }, {\n    id: 'breadcrumbs'\n  }],\n  layoutDS: MainLayoutDS,\n  layoutEH: MainLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Title } from '@angular/platform-browser';\nimport { AbstractLayout } from '../../models/abstract-layout'\nimport { ConfigurationService } from '../../services/configuration.service';\nimport { LayoutsConfigurationService } from '../../services/layouts-configuration.service';\nimport { MainStateService } from '../../services/main-state.service';\nimport { MainLayoutConfig as config } from './main-layout.config';\n\n@Component({\n    selector: 'main-layout',\n    templateUrl: './main-layout.html'\n})\nexport class MainLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    private router: Router,\n    private configuration: ConfigurationService,\n    private layoutsConfiguration: LayoutsConfigurationService,\n    private mainState: MainStateService,\n    private titleService: Title\n  ){\n    super(layoutsConfiguration.get('MainLayoutConfig') || config);\n  }\n\n  protected initPayload(){\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      router: this.router,\n      titleService: this.titleService,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n}\n","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class Page404LayoutDS extends LayoutDataSource {\n  public options: any;\n\n  onInit({ options }){\n    this.options = options;\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\n\nexport class Page404LayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type) {\n        case 'n7-page404-layout.init':\n          this.dataSource.onInit(payload);\n          break;\n\n        case 'n7-page404-layout.destroy':\n            this.destroyed$.next();\n            break;\n\n        default:\n            break;\n      }\n    });\n\n    // listen to global events\n    /* EventHandler.globalEvents$.pipe(\n      takeUntil(this.destroyed$)\n    ).subscribe(({type, payload}) => {\n      switch(type){\n        case 'global.navigate':\n          this.dataSource.onNavigate(payload);\n          break;\n          \n        default: \n          break;\n      }\n    }); */\n  }\n  \n}","import { Page404LayoutDS } from './page404-layout.ds';\nimport { Page404LayoutEH } from './page404-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const Page404LayoutConfig = {\n  layoutId: 'n7-page404-layout',\n  widgets: [],\n  layoutDS: Page404LayoutDS,\n  layoutEH: Page404LayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\n// import { Router } from '@angular/router';\nimport { AbstractLayout } from '../../models/abstract-layout'\n// import { ConfigurationService } from '../../services/configuration.service';\nimport { LayoutsConfigurationService } from '../../services/layouts-configuration.service';\n// import { MainStateService } from '../../services/main-state.service';\nimport { Page404LayoutConfig as config } from './page404-layout.config';\n\n@Component({\n    selector: 'n7-page404-layout',\n    templateUrl: './page404-layout.html'\n})\nexport class Page404LayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    // private router: Router,\n    // private configuration: ConfigurationService,\n    layoutsConfiguration: LayoutsConfigurationService,\n    // private mainState: MainStateService,\n  ){\n    super(layoutsConfiguration.get('Page404LayoutConfig') || config);\n  }\n\n  protected initPayload(){\n    return {\n      // configuration: this.configuration,\n      // mainState: this.mainState,\n      // router: this.router,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { ModuleWithProviders } from '@angular/compiler/src/core';\nimport { DvComponentsLibModule } from '@n7-frontend/components';\n\n// services\nimport { ConfigurationService } from './services/configuration.service';\nimport { LayoutsConfigurationService } from './services/layouts-configuration.service';\nimport { MainStateService } from './services/main-state.service';\nimport { CommunicationService } from './services/communication.service';\nimport { ApolloProvider } from './services/communication-providers/apollo/apollo.provider';\n\n// layouts\nimport { MainLayoutComponent } from './layouts/main-layout/main-layout';\nimport { Page404LayoutComponent } from './layouts/page404-layout/page404-layout';\n\nconst COMPONENTS = [\n  MainLayoutComponent,\n  Page404LayoutComponent,\n];\n\n@NgModule({\n  declarations: COMPONENTS,\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    DvComponentsLibModule\n  ],\n  providers: [],\n  exports: COMPONENTS\n})\nexport class N7BoilerplateCommonModule {\n  static forRoot(config: any): ModuleWithProviders {\n    return {\n      ngModule: N7BoilerplateCommonModule,\n      providers: [\n        MainStateService, \n        ConfigurationService, \n        LayoutsConfigurationService, \n        CommunicationService, \n        ApolloProvider, \n        { provide: 'config', useValue: config }\n      ]\n    }\n  }\n}\n","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwHomeLayoutDS extends LayoutDataSource {\n  private communication: any;\n  private mainState: any;\n  public test: string;\n  private facetData: any[] = null;\n  private facetInputs: any = {};\n  private allBubbles: any[] = null;\n  public selectedBubbles: any[] = [];\n  public numOfItemsStr: string = null;\n  //public _updateBubbles: any = null;\n  private _bubbleChart: any = null;\n  private maxBubblesSelectable:number = 3;\n  private entityBubbleIdMap: any = {};\n\n  onInit({ communication, mainState }){\n    this.communication = communication;\n    this.mainState = mainState;\n\n    this.one('aw-hero').update({});\n\n    this.communication.request$('globalFilter', {\n      onError: (error) => console.log(error),\n    }).subscribe((response) => {\n      this.facetData = [];\n      response.entitiesData.forEach( (ent) => {\n        this.facetData.push({...(ent.countData), enabled:true});\n      } );\n      this.one('aw-home-facets-wrapper').update(this.facetData);\n      this.setAllBubblesFromApolloQuery(response);\n      this.renderPreviewsFromApolloQuery(response);\n    });\n\n    // update streams\n    this.mainState.update('headTitle', 'Arianna Web > Home');\n    this.mainState.update('pageTitle', 'Arianna Web: Home Layout');\n    // this.mainState.update('subnav', this._getSubnav());\n    // this.mainState.update('breadcrumbs', this._getBreadcrumbs());\n  }\n\n\n  renderPreviewsFromApolloQuery(response: any){\n    if(!response || !response.itemsPagination) return;\n\n    let numOfItems = response.itemsPagination.totalCount;\n    if(numOfItems>0){\n      let numOfThousand = 0;\n      while(numOfItems>999){\n        numOfItems-=1000;\n        numOfThousand += 1;\n      }\n      let numOfItemsTmpStr = numOfItems + '';\n      if(numOfItems<10) numOfItemsTmpStr = '00'+numOfItems;\n      else if(numOfItems<100) numOfItemsTmpStr = '0'+numOfItems;\n      if(numOfThousand>0)\n        this.numOfItemsStr = numOfThousand+'.'+numOfItemsTmpStr;\n      else\n       this.numOfItemsStr = numOfItems+'';\n    } else {\n      this.numOfItemsStr = null;\n    }\n\n    this.one('aw-home-item-preview-wrapper').update(response.itemsPagination.items);\n  }\n\n  public onBubbleSelected(payload){\n    if(payload && payload.bubble){\n      if(!this.selectedBubbles.includes(payload.bubble)){\n        if(this.selectedBubbles.length<this.maxBubblesSelectable){\n          this.selectedBubbles.push(payload.bubble);\n          //payload.bubble.hasCloseIcon=true;\n          //if(this._updateBubbles) this._updateBubbles();\n          this.updateBubblesAndItemPreviews();\n        }\n      }\n    }\n  }\n\n\n  public onBubbleDeselected(payload){\n    if(payload && payload.bubble){\n      this.selectedBubbles = this.selectedBubbles.filter(\n        (b) => b.id!==payload.bubble.id );\n      if(payload.bubble.hasCloseIcon){\n        payload.bubble.hasCloseIcon=false;\n        //if(this._updateBubbles) this._updateBubbles();\n        this.updateBubblesAndItemPreviews();\n      }\n    }\n  }\n\n  private updateBubblesAndItemPreviews(){\n    let selectedEntitiesIds = [];\n    if(this.entityBubbleIdMap)\n    this.selectedBubbles.forEach( (sB) => {\n      let entityId = this.entityBubbleIdMap[sB.id];\n      if(entityId)\n        selectedEntitiesIds.push(entityId);\n    });\n    this.communication.request$('globalFilter', {\n      onError: (error) => console.log(error),\n      params: { selectedEntitiesIds,\n                itemsPagination:{ offset:0,limit:4 } },\n    }).subscribe((response) => {\n      this.renderPreviewsFromApolloQuery(response);\n      this.renderItemTags();\n      this.setAllBubblesFromApolloQuery(response,true);\n    });\n  }\n\n  setAllBubblesFromApolloQuery(response: any,reset?:boolean){\n    if( !response || !response.entitiesData ) return;\n    this.allBubbles = [];\n    for(var i=0;i<response.entitiesData.length;i++){\n      let currentToE = response.entitiesData[i];\n      for(var j=0;j<currentToE.entitiesCountData.length;j++){\n        this.allBubbles.push(\n          {\n            ...currentToE.entitiesCountData[j],\n            color:currentToE.countData.type.color\n          });\n      }\n    }\n    this.entityBubbleIdMap = {};\n    this.allBubbles.forEach( (bubble) => {\n      // d3/svg doesn't allow '-' as part of the ids\n      // or strings starting with a number as ids\n      bubble.id = 'B_'+bubble.entity.id.replace(/-/g,'_');\n      this.entityBubbleIdMap[bubble.id]=bubble.entity.id;\n      return bubble;\n    });\n    this.allBubbles.forEach( (bubble) => {\n      bubble.selected = false;\n      for(var i=0; i<this.selectedBubbles.length;i++){\n        if(this.selectedBubbles[i].id===bubble.id) bubble.selected=true;\n      }\n    });\n    this.one('aw-home-bubble-chart').update({\n      width: window.innerWidth/1.8,\n      bubbles: this.filterBubblesBasedOnFacetsEnabled(),\n      reset: ( reset? reset : false ),\n      //setUpdateReference: (ref) => this._updateBubbles = ref,\n      setBubbleChart: (bubbleCref) => this._bubbleChart = bubbleCref\n    });\n  }\n\n  filterBubblesBasedOnFacetsEnabled(){\n    let result = this.allBubbles.filter(\n      (bubble) => {\n        for(var i=0; i<this.facetData.length; i++){\n          if( bubble.entity.typeOfEntity.id === this.facetData[i].type.id )\n            if( !this.facetData[i].enabled ){ return false; }\n        }\n        return true;\n      }\n    );\n    console.log({filterBubbles:result});\n    return result;\n  }\n\n\n  handleFacetSearchChange(change) {\n    var payload: string = change.inputPayload;\n    var value: string = change.value;\n    // store the entered text in facetInputs\n    this.facetInputs[payload] = value;\n    console.log('changed: '+ payload + ' with value: ' + value)\n  }\n\n  handleFacetSearchEnter(enter) {\n    var payload: string = enter.inputPayload;\n    var value: string = this.facetInputs[payload];\n    // get the text entered in this input\n    console.log('entered: ' + payload + ' with value: ' + value)\n  }\n\n  handleFacetHeaderClick(facetId){\n    let updateBubbles = false;\n    let enabledFacets = this.facetData.filter( (f) => f.enabled ).length;\n    this.facetData.forEach( (f) => {\n        if(f.type.id===facetId){\n          if(f.enabled){\n            if(enabledFacets>1){\n              f.enabled = false;\n              updateBubbles = true;\n            }\n          } else {\n            f.enabled = true;\n            updateBubbles = true;\n          }\n        }\n    });\n    this.one('aw-home-facets-wrapper').update(this.facetData);\n    if(updateBubbles){\n      let disableFacetsIds = [];\n      this.facetData.forEach( (fD) => {\n        if(!fD.enabled) disableFacetsIds.push(fD.type.id);\n      });\n\n      if(disableFacetsIds){\n        let filteredSelectedBubbles = this.selectedBubbles.filter( (bubble) => {\n          let typeOfEntity = \"\";\n          for(var i=0;i<this.allBubbles.length;i++){\n            if(this.allBubbles[i].id===bubble.id){\n              typeOfEntity=this.allBubbles[i].entity.typeOfEntity.id;\n              break;\n            }\n          }\n          if(disableFacetsIds.includes(typeOfEntity)) return false;\n          return true;\n        });\n        if(filteredSelectedBubbles.length!=this.selectedBubbles.length){\n          this.selectedBubbles = filteredSelectedBubbles;\n          this.updateBubblesAndItemPreviews();\n        };\n      }\n      this.allBubbles.forEach( (bubble) => {\n        bubble.selected = false;\n        for(var i=0; i<this.selectedBubbles.length;i++){\n          if(this.selectedBubbles[i].id===bubble.id) bubble.selected=true;\n        }\n      });\n      this.one('aw-home-bubble-chart').update({\n        width: window.innerWidth/1.8,\n        bubbles:this.filterBubblesBasedOnFacetsEnabled(),\n        setBubbleChart: (bubbleCref) => this._bubbleChart = bubbleCref,\n        reset:true\n      });\n    }\n  }\n\n  renderItemTags(){\n    let tagsData = [];\n    this.selectedBubbles.forEach( (sBubble) => {\n      let label = '';\n      for(var i=0;i<this.allBubbles.length;i++){\n        if(this.allBubbles[i].id===sBubble.id){\n          label = this.allBubbles[i].entity.label;\n          break;\n        }\n      }\n      tagsData.push({label,icon:\"n7-icon-close\",payload:sBubble.id,classes:\"tag-\"+this.allBubbles[i].entity.typeOfEntity.id});\n    });\n    this.one('aw-home-item-tags-wrapper').update(tagsData);\n  }\n\n\n  onTagClicked(payload){\n    if(!payload) return;\n    const bubbleId=payload;\n    if(this._bubbleChart){\n      this._bubbleChart.selectAll(`g`).each( b => {\n        if(b.id===bubbleId) b.hasCloseIcon = false;\n      });\n    }\n    this.selectedBubbles = this.selectedBubbles.filter( (b) => b.id!==payload );\n    //if(this._updateBubbles) this._updateBubbles();\n    this.updateBubblesAndItemPreviews();\n  }\n\n\n  private _getSubnav(){\n    return ['home', 'results', 'single'].map(page => ({\n      text: page.toUpperCase(), \n      payload: {\n        source: 'navigate',\n        handler: 'router',\n        path: [`aw/${page}`],\n        id: page\n      },\n      _meta: { id: page }\n    }));\n  }\n\n  private _getBreadcrumbs(){\n    return {\n      items: [{\n        label: 'Arianna Web',\n        payload: {\n          source: 'navigate',\n          handler: 'router',\n          path: [`aw/home`]\n        }\n      },\n      {\n        label: 'Home Layout',\n        payload: {\n          source: 'navigate',\n          handler: 'router',\n          path: [`aw/home`]\n        }\n      }] \n    };\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport class AwHomeLayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n  \n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch(type) {\n        case 'aw-home-layout.init':\n          this.dataSource.onInit(payload);\n          break;\n\n        case 'aw-home-layout.destroy':\n            this.destroyed$.next();\n            break;\n\n        default:\n            break;\n      }\n    });\n    \n    this.outerEvents$.subscribe(({ type, payload }) => {\n      switch(type){\n        case 'aw-hero.change':\n          const { inputPayload, value } = payload;\n          // do something\n          break;\n\n        case 'aw-home-facets-wrapper.click':\n          this.dataSource.handleFacetHeaderClick(payload);\n          break;\n        case 'aw-home-facets-wrapper.change':\n          this.dataSource.handleFacetSearchChange(payload);\n          break;\n        case 'aw-home-facets-wrapper.enter':\n          this.dataSource.handleFacetSearchEnter(payload);\n          break;\n\n        case 'aw-home-bubble-chart.click':\n          if(payload.source==='bubble')\n            this.dataSource.onBubbleSelected({bubblePayload:payload.bubblePayload,bubble:payload.bubble});\n          else if(payload.source==='close')\n            this.dataSource.onBubbleDeselected({bubblePayload:payload.bubblePayload,bubble:payload.bubble});\n          break;\n\n        case 'aw-home-bubble-chart.mouse_enter':\n          console.log('bubble mouse enter',payload);\n          // TODO: implemente behaviour\n          break;\n\n        case 'aw-home-bubble-chart.mouse_leave':\n          console.log('bubble mouse leave',payload);\n          // TODO: implemente behaviour\n          break;\n\n        case 'aw-home-item-tags-wrapper.click':\n            this.dataSource.onTagClicked(payload);\n            break;\n\n        default:\n            break;\n      }\n    });\n\n    // listen to global events\n    /* EventHandler.globalEvents$.pipe(\n      takeUntil(this.destroyed$)\n    ).subscribe(({type, payload}) => {\n      switch(type){\n        case 'global.navigate':\n          this.dataSource.onNavigate(payload);\n          break;\n\n        default:\n          break;\n      }\n    }); */\n  }\n\n}","import { DataSource } from '@n7-frontend/core';\nimport { HERO_MOCK } from '@n7-frontend/components';\n\nexport class AwHeroDS extends DataSource {\n\n  protected transform(data){\n    console.log({data});\n    const HERO_DATA = {\n      title: \"Arte, architettura e fotografia nel XXI secolo\",\n      text: \"Consulta il patrimonio completo del polo nazionale per l\\'arte e l\\'architettura contemporanee.\",\n      button: {\n        text: \"CERCA\",\n        payload: \"cerca\"\n      },\n      backgroundImage: \"https://i.imgur.com/FgsxSYR.png\",\n      input: {\n        placeholder: \"Cerca in MAXXI\",\n        payload: \"cerca-in-maxxi\"\n      }\n    };  \n    return HERO_DATA;\n  }\n}","import { DataSource } from '@n7-frontend/core';\nimport { TABLE_MOCK } from '@n7-frontend/components';\n\nexport class AwTableDS extends DataSource {\n\n  protected transform(data){\n    return TABLE_MOCK;\n  }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwHomeHeroPatrimonioDS extends DataSource {\n\n  protected transform(data) {\n    const HERO_PATRIMONIO_DATA = {\n      title: \"IL MAXXI\",\n      backgroundImage: \"https://www.solidbackgrounds.com/images/2560x1440/2560x1440-gray-solid-color-background.jpg\",\n      image: \"https://i.imgur.com/8BgHOBi.png\",\n      text: \"La storia del MAXXI inizia nell'autunno del 1997 quando l'allora Ministero per i beni culturali ottiene dal Ministero della Difesa la cessione di un'ampia area nel quartiene Flaminio di Roma, occupata da officine e padiglioni della ex Caserma Montello, in disuso da tempo, con il fine di creare un nuovo polo mseale nazionale dedicato alle arti contemporanee per la cui progettazione, nel 1998, viene bandito un concorso internazionale di idee in due fasi. Il bando di concorso prevedeva un piano funzionale complesso, con la presenza di vari poli museali: un museo per l'architettura e uno per le arti del XXI secolo, uno spazio per le produzioni sperimentali, la biblioteca, l'auditorium, spazi per eventi dal vivo e infine spazi didattici.\",\n      button: {\n        text: \"NAVIGA IL PATRIMONIO\",\n        payload: \"naviga-patrimonio\"\n      }\n    };\n    return HERO_PATRIMONIO_DATA;\n  }\n}","import { DataSource } from '@n7-frontend/core';\nimport { BUBBLECHART_MOCK } from '@n7-frontend/components';\n\nexport class AwHomeBubbleChartDS extends DataSource {\n\n  private thresholdShowTitle:number = 50;\n  private thresholdShowValue:number = 60;\n\n  protected transform(data){\n    if(!data) return null;\n\n    let bubbleCointainer = document.getElementById(\"bubble-chart-container\");\n    const cWidth = bubbleCointainer.offsetWidth;\n    // TODO: think of a good way to pass/compute cHeight\n    const cHeight = 700; // bubbleCointainer.offsetHeight\n\n    const containerSize = cWidth*cHeight;\n\n    let bubblesData = {\n      containerId: \"bubbleChartContainer\",\n      containerWidth : cWidth,\n      containerHeight : cHeight,\n      isForceSimulationEnabled: true,\n      maxBubblesSelected:3\n    };\n\n    bubblesData['bubblesData'] = [];\n\n    let maxBubbleCount=-1;\n    let minBubbleCount=-1;\n    let numOfBubbles=0;\n    let totalCount=0;\n    let numOfSelectedBubbles=0;\n    data.bubbles.forEach( bubble => {\n      if(maxBubbleCount<bubble.count) maxBubbleCount=bubble.count;\n      if(minBubbleCount<0 || minBubbleCount>bubble.count) minBubbleCount=bubble.count;\n      numOfBubbles++;\n      totalCount+=bubble.count;\n      if(bubble.selected) numOfSelectedBubbles++;\n    });\n    console.log({containerSize:Math.log(containerSize),numOfBubbles,minBubbleCount,maxBubbleCount,totalCount,numOfSelectedBubbles});\n    data.bubbles.forEach( bubble => {\n      let bId = bubble.id;\n      //let bubblePercentage = ( bubble.count - (minBubbleCount/3) )/( (maxBubbleCount*3) - (minBubbleCount/3) );\n      //let bubbleRadius = 2*( ((containerSize/(numOfBubbles*(totalCount/600)))*bubblePercentage)/( Math.pow(numOfSelectedBubbles+1,1.8)) );\n      let bubblePercentage = ( bubble.count - (minBubbleCount/3) )/( (maxBubbleCount*3) - (minBubbleCount/3) );\n      let bubbleRadius = (Math.log(containerSize)/10)*(bubblePercentage*3)*(70-Math.sqrt(numOfBubbles));\n      let bubbleData = {\n        id: bId,\n        texts: [\n          {\n            id:bId+\"_label0\",\n            label: (d) => { if(d.radius<this.thresholdShowTitle) return null; return bubble.entity.label },\n            x_function: (d) => d.x,\n            y_function: (d) => {\n              let mNum = (d.radius/9);\n              if(d.radius<this.thresholdShowValue) mNum=0;\n              return d.y-mNum;\n            },\n            \"user_select\":\"none\",\n            fontSize_function: (d) => d.radius/5,\n            color: \"white\",\n            \"classes\":\"\"\n          },\n          {\n            id:bId+\"_label1\",\n            label: (d) => { if(d.radius<this.thresholdShowValue) return null; return bubble.count },\n            x_function: (d) => d.x,\n            y_function: (d) => d.y+(d.radius/9),\n            \"user_select\":\"none\",\n            fontSize_function: (d) => d.radius/6,\n            color: \"white\",\n            \"classes\":\"\"\n        }\n        ],\n        x: cWidth/2+50,\n        y: cHeight/2+50,\n        \"radius\": bubbleRadius,\n        color:bubble.color,\n        hasCloseIcon: ( bubble.selected ? bubble.selected : false ),\n        payload:{\n          id: bId\n        },\n      };\n\n      bubblesData['bubblesData'].push(bubbleData);\n    });\n\n\n    bubblesData['forceSimulationData'] = {\n      xPull: cWidth/2,\n      xPullStrength: -0.01,\n      yPull: cHeight/2,\n      yPullStrength: -0.01,\n      collisionStrengh: 0.99,\n      collisionIterations: 1,\n      velocityDecay: 0.65\n    }\n\n    if(data.reset) bubblesData['reset'] = data.reset;\n\n    if(data.setUpdateReference) bubblesData['setUpdateReference'] = data.setUpdateReference;\n    if(data.setBubbleChart) bubblesData['setBubbleChart'] = data.setBubbleChart;\n    return bubblesData;\n  }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwHomeFacetsWrapperDS extends DataSource {\n\n  protected transform(data) {\n    var headers: any[] = []\n    var inputs: any[] = []\n\n    data.forEach(facet => {\n      /**\n       * For each facet on back-end, push a header-component\n       * and a facet-component (search input only) to each array.\n       */\n\n      // make array of headers data\n      headers.push({\n        iconLeft: facet.type.icon,\n        text: facet.type.label,\n        additionalText: facet.count,\n        iconRight: (facet.enabled ? 'n7-icon-eye' : 'n7-icon-eye-slash'),\n        classes: (facet.enabled ? 'prova' : 'is-disabled') + (facet.type.color ? ` ${facet.type.color}` : ''),\n        payload: facet.type.id,\n      });\n      // make array of inputs data\n      inputs.push({\n        input: {\n          placeholder: 'Search',\n          icon: 'n7-icon-search',\n          // disable input if faced header is not enabled\n          disabled: !facet.enabled,\n          payload: String(facet.type.id) + '-search',\n        }\n      });\n    });\n\n    // zipping arrays to render widgets with separate data (see home-layout.html)\n    var widgetData: any[] = []\n    headers.map( (item, i) => {\n      widgetData.push( { header: item, input: inputs[i] } )\n    });\n    return widgetData\n  }\n\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwHomeItemPreviewWrapperDS extends DataSource {\n\n  protected transform(data) {\n    let result = [];\n    data.forEach(item => {\n      let infoGroup = [\n        { label: 'Autore', value: '' },\n        { label: '', value: '' } ];\n      item.item.info.forEach( i => {\n        if(i.key==='author') infoGroup[0].value=i.value;\n        else if(i.key==='short_description') infoGroup[1].value=i.value;\n      });\n      let toeGroup = item.relatedTOEData.map( rToe => {\n          return {\n            label: rToe.type.label,\n            value: rToe.count,\n            icon: rToe.type.icon\n          };\n      });\n      let metadata = [{items:infoGroup},{items:toeGroup}];\n      result.push({\n        image: item.thumbnail,\n        title: item.item.label,\n        metadata,\n        payload: item.item.id\n      });\n    });\n    return result;\n  }\n}","import { DataSource } from '@n7-frontend/core';\n\nexport class AwHomeItemTagsWrapperDS extends DataSource {\n\n  protected transform(data) {\n    return data;\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwTableEH extends EventHandler {\n\n  public listen() {\n    /*\n    this.innerEvents$.subscribe(event => {\n      \n    });\n\n    this.outerEvents$.subscribe(event => {\n      \n    });\n    */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHeroEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-hero.click':\n          // TODO\n          break;\n\n        case 'aw-hero.change':\n          this.emitOuter('change', payload);\n          break;\n\n        default:\n          break;\n      }\n    });\n    /* this.outerEvents$.subscribe(event => {\n    \n    }); */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeHeroPatrimonioEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-home-hero-patrimonio.click':\n          this.emitGlobal('navigate', {\n            handler: 'router',\n            path: ['aw/patrimonio']\n          });\n          break;\n        default:\n          break;\n      }\n    });\n    /*\n    this.outerEvents$.subscribe(event => {\n      \n    });\n    */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeBubbleChartEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(event => {\n      switch (event.type) {\n        case 'aw-home-bubble-chart.click':\n          this.emitOuter('click',event.payload);\n          break;\n        case 'aw-home-bubble-chart.mouse_enter':\n          this.emitOuter('mouse_enter',event.payload);\n          break;\n        case 'aw-home-bubble-chart.mouse_leave':\n          this.emitOuter('mouse_leave',event.payload);\n          break;\n        default:\n          break;\n      }\n    });\n    /*\n    this.outerEvents$.subscribe(event => {\n      \n    });\n    */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeFacetsWrapperEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        // toggle visibility from facet header\n        case 'aw-home-facets-wrapper.click':\n          this.emitOuter('click', payload);\n          break;\n        // change search input text\n        case 'aw-home-facets-wrapper.change':\n          this.emitOuter('change', payload);\n          break;\n        // press return while typing in search\n        case 'aw-home-facets-wrapper.enter':\n          this.emitOuter('enter', payload);\n        default:\n          break;\n      }\n    });\n    /* this.outerEvents$.subscribe(event => {\n    \n    }); */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeItemPreviewWrapperEH extends EventHandler {\n\n  public listen() {\n    // this.innerEvents$.subscribe( e => {\n\n    // });\n    /* this.outerEvents$.subscribe(event => {\n    \n    }); */\n  }\n\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwHomeItemTagsWrapperEH extends EventHandler {\n\n  public listen() {\n    this.innerEvents$.subscribe( (event) => {\n      switch(event.type){\n        case \"aw-home-item-tags-wrapper.click\":\n          this.emitOuter('click',event.payload);\n          break;\n        default:\n          break;\n      }\n    });\n    /* this.outerEvents$.subscribe(event => {\n    \n    }); */\n  }\n\n}","import { AwHomeLayoutDS } from './home-layout.ds';\nimport { AwHomeLayoutEH } from './home-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwHomeLayoutConfig = {\n  layoutId: 'aw-home-layout',\n  widgets: [{\n    id: 'aw-hero',\n  }, {\n    id: 'aw-home-hero-patrimonio',\n    hasStaticData: true\n  }, {\n    id: 'aw-home-bubble-chart',\n  }, {\n    id: 'aw-home-facets-wrapper',\n  }, {\n    id: 'aw-home-item-tags-wrapper',\n  }, {\n    id: 'aw-home-item-preview-wrapper'\n  }],\n  layoutDS: AwHomeLayoutDS,\n  layoutEH: AwHomeLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { tap, catchError } from 'rxjs/operators';\nimport { ConfigurationService } from './configuration.service';\nimport { of } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class JsonConfigService {\n  constructor(\n    private http: HttpClient,\n    private config: ConfigurationService,\n  ){}\n\n  load(path): Promise<any> {\n    return this.http.get(path).pipe(\n      catchError((error) => of({})),\n      tap(response => this._handleResponse(response))\n    ).toPromise();\n  }\n\n  private _handleResponse(response){\n    if(response){\n      Object.keys(response).forEach(key => this.config.set(key, response[key]));\n    }\n  }\n}","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AbstractLayout } from '../../../common/models/abstract-layout'\nimport { ConfigurationService } from '../../../common/services/configuration.service';\nimport { LayoutsConfigurationService } from '../../../common/services/layouts-configuration.service';\nimport { MainStateService } from '../../../common/services/main-state.service';\nimport { AwHomeLayoutConfig as config } from './home-layout.config';\nimport { CommunicationService } from '../../../common/services';\n\n@Component({\n    selector: 'aw-home-layout',\n    templateUrl: './home-layout.html'\n})\nexport class AwHomeLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    layoutsConfiguration: LayoutsConfigurationService,\n    private router: Router,\n    private configuration: ConfigurationService,\n    private communication: CommunicationService,\n    private mainState: MainStateService,\n  ){\n    super(layoutsConfiguration.get('AwHomeLayoutConfig') || config);\n  }\n\n  protected initPayload(){\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      router: this.router,\n      communication: this.communication,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n}\n","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwAboutLayoutDS extends LayoutDataSource {\n  onInit(payload){\n    // TODO\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwAboutLayoutEH extends EventHandler {\n  \n  public listen() {\n    /* this.innerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n    \n    /* this.outerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n  }\n\n}","import { AwAboutLayoutDS } from './about-layout.ds';\nimport { AwAboutLayoutEH } from './about-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwAboutLayoutConfig = {\n  layoutId: 'aw-about-layout',\n  widgets: [],\n  layoutDS: AwAboutLayoutDS,\n  layoutEH: AwAboutLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  layoutOptions: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractLayout } from '../../../common/models/abstract-layout';\nimport { AwAboutLayoutConfig as config } from './about-layout.config';\n\n@Component({\n  selector: 'aw-about-layout',\n  templateUrl: './about-layout.html'\n})\nexport class AwAboutLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n  ){\n    super(config);\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n\n}","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwWorksLayoutDS extends LayoutDataSource {\n  onInit(payload){\n    // TODO\n  }\n}","import { EventHandler } from '@n7-frontend/core';\n\nexport class AwWorksLayoutEH extends EventHandler {\n  \n  public listen() {\n    /* this.innerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n    \n    /* this.outerEvents$.subscribe(({ type, payload }) => {\n      \n    }); */\n  }\n\n}","import { AwWorksLayoutDS } from './works-layout.ds';\nimport { AwWorksLayoutEH } from './works-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwWorksLayoutConfig = {\n  layoutId: 'aw-works-layout',\n  widgets: [],\n  layoutDS: AwWorksLayoutDS,\n  layoutEH: AwWorksLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  layoutOptions: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { AbstractLayout } from '../../../common/models/abstract-layout';\nimport { AwWorksLayoutConfig as config } from './works-layout.config';\n\n@Component({\n  selector: 'aw-works-layout',\n  templateUrl: './works-layout.html'\n})\nexport class AwWorksLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n  ){\n    super(config);\n  }\n\n  ngOnInit(){\n    this.onInit();\n  }\n\n  ngOnDestroy(){\n    this.onDestroy();\n  }\n\n}","import { LayoutDataSource } from '@n7-frontend/core';\n\nexport class AwPatrimonioLayoutDS extends LayoutDataSource {\n  /**\n  * If you are not using these variables (from your-layout.ts), \n  * remove them from here too.\n  */\n  protected configuration: any;\n  protected mainState: any;\n  protected router: any;\n  protected titleService: any;\n\n  public options: any;\n  public pageTitle: string;\n\n  /**\n  * If you are not using these variables (from your-layout.ts), \n  * remove them from onInit() parameters and inside the function.\n  */\n  onInit({ configuration, mainState, router, options, titleService }) {\n    this.configuration = configuration;\n    this.mainState = mainState;\n    this.router = router;\n    this.titleService = titleService;\n    this.options = options;\n\n    /*\n    * For an example of header update, or mainState update, check\n    * main-layout.ds.ts\n    */\n  }\n}","import { EventHandler } from '@n7-frontend/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nexport class AwPatrimonioLayoutEH extends EventHandler {\n  private destroyed$: Subject<any> = new Subject();\n\n  public listen() {\n    this.innerEvents$.subscribe(({ type, payload }) => {\n      switch (type) {\n        case 'aw-patrimonio-layout.init':\n          this.dataSource.onInit(payload);\n          break;\n\n        case 'aw-patrimonio-layout.destroy':\n          this.destroyed$.next();\n          break;\n\n        default:\n          break;\n      }\n    });\n  }\n}","import { AwPatrimonioLayoutDS } from './patrimonio-layout.ds';\nimport { AwPatrimonioLayoutEH } from './patrimonio-layout.eh';\nimport * as DS from '../../data-sources';\nimport * as EH from '../../event-handlers';\n\nexport const AwPatrimonioLayoutConfig = {\n  layoutId: 'n7-new-layout',\n  /**\n   * Array of components you want to use\n   * in this leyout\n   */\n  widgets: [\n    // { id: 'header' },\n  ],\n  layoutDS: AwPatrimonioLayoutDS,\n  layoutEH: AwPatrimonioLayoutEH,\n  widgetsDataSources: DS,\n  widgetsEventHandlers: EH,\n  options: {\n    // TODO\n  }\n};","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Title } from '@angular/platform-browser';\nimport { AbstractLayout } from '../../../common/models/abstract-layout'\nimport { ConfigurationService } from '../../../common/services/configuration.service';\nimport { LayoutsConfigurationService } from '../../../common/services/layouts-configuration.service';\nimport { MainStateService } from '../../../common/services';\nimport { AwPatrimonioLayoutConfig as config } from './patrimonio-layout.config';\n\n@Component({\n  selector: 'aw-patrimonio-layout',\n  templateUrl: './patrimonio-layout.html'\n})\n\nexport class AwPatrimonioLayoutComponent extends AbstractLayout implements OnInit, OnDestroy {\n  constructor(\n    private router: Router,\n    private configuration: ConfigurationService,\n    private layoutsConfiguration: LayoutsConfigurationService,\n    private mainState: MainStateService,\n    private titleService: Title\n  ) {\n    super(layoutsConfiguration.get('AwPatrimonioLayoutConfig') || config);\n  }\n\n  /**\n   * Optional variables that can be accessed from the layout's logic.\n   * If removed, they must also be removed from the layout's DataSource file,\n   * and from this file imports.\n   */\n  protected initPayload() {\n    return {\n      configuration: this.configuration,\n      mainState: this.mainState,\n      router: this.router,\n      titleService: this.titleService,\n      options: this.config.options || {},\n    }\n  }\n\n  ngOnInit() {\n    this.onInit();\n  }\n\n  ngOnDestroy() {\n    this.onDestroy();\n  }\n}","// MODULES\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DvComponentsLibModule } from '@n7-frontend/components';\nimport { N7BoilerplateCommonModule } from '../common/n7-boilerplate-common.module';\n// LAYOUTS\nimport { AwHomeLayoutComponent } from './layouts/home-layout/home-layout';\nimport { AwAboutLayoutComponent } from './layouts/about-layout/about-layout';\nimport { AwWorksLayoutComponent } from './layouts/works-layout/works-layout';\nimport { AwPatrimonioLayoutComponent } from './layouts/patrimonio-layout/patrimonio-layout';\n\nconst COMPONENTS = [\n  AwHomeLayoutComponent,\n  AwAboutLayoutComponent,\n  AwWorksLayoutComponent,\n  AwPatrimonioLayoutComponent,\n];\n\n\n@NgModule({\n  declarations: COMPONENTS,\n  imports: [\n    CommonModule,\n    DvComponentsLibModule,\n    N7BoilerplateCommonModule,\n  ],\n  providers: [],\n  exports: COMPONENTS\n})\nexport class N7BoilerplateAriannaWebModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { N7BoilerplateCommonModule } from './common/n7-boilerplate-common.module';\nimport { N7BoilerplateAriannaWebModule } from './arianna-web/n7-boilerplate-arianna-web.module';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  providers: [],\n  exports: [\n    N7BoilerplateCommonModule,\n    N7BoilerplateAriannaWebModule,\n  ]\n})\nexport class N7BoilerplateLibModule { }\n"]}