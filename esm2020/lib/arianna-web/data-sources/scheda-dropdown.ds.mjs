import { DataSource } from '@n7-frontend/core';
export class AwSchedaDropdownDS extends DataSource {
    transform(response) {
        const { digitalObjects } = response;
        const firstObject = digitalObjects[0];
        return {
            header: {
                label: firstObject.label,
                icon: {
                    id: 'n7-icon-caret-down'
                },
                payload: 'toggle',
            },
            items: digitalObjects.map(({ label, type }, index) => ({
                label,
                type,
                payload: index,
                selected: index === 0,
            }))
        };
    }
    toggle() {
        const { classes } = this.output;
        this.output.classes = classes ? null : 'is-open';
    }
    onChange(payload) {
        // link check
        if (this.output.items[payload].type !== 'external') {
            this.output.items.forEach((item) => {
                item.selected = item.payload === payload;
                if (item.selected) {
                    this.output.header.label = item.label;
                }
            });
        }
        // close
        this.toggle();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZWRhLWRyb3Bkb3duLmRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbjctYm9pbGVycGxhdGUtbGliL3NyYy9saWIvYXJpYW5uYS13ZWIvZGF0YS1zb3VyY2VzL3NjaGVkYS1kcm9wZG93bi5kcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFHL0MsTUFBTSxPQUFPLGtCQUFtQixTQUFRLFVBQVU7SUFDdEMsU0FBUyxDQUFDLFFBQVE7UUFDMUIsTUFBTSxFQUFFLGNBQWMsRUFBRSxHQUFHLFFBQVEsQ0FBQztRQUNwQyxNQUFNLFdBQVcsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEMsT0FBTztZQUNMLE1BQU0sRUFBRTtnQkFDTixLQUFLLEVBQUUsV0FBVyxDQUFDLEtBQUs7Z0JBQ3hCLElBQUksRUFBRTtvQkFDSixFQUFFLEVBQUUsb0JBQW9CO2lCQUN6QjtnQkFDRCxPQUFPLEVBQUUsUUFBUTthQUNsQjtZQUNELEtBQUssRUFBRSxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUNyRCxLQUFLO2dCQUNMLElBQUk7Z0JBQ0osT0FBTyxFQUFFLEtBQUs7Z0JBQ2QsUUFBUSxFQUFFLEtBQUssS0FBSyxDQUFDO2FBQ3RCLENBQUMsQ0FBQztTQUNKLENBQUM7SUFDSixDQUFDO0lBRUQsTUFBTTtRQUNKLE1BQU0sRUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ2hDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDbkQsQ0FBQztJQUVELFFBQVEsQ0FBQyxPQUFPO1FBQ2QsYUFBYTtRQUNiLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxLQUFLLFVBQVUsRUFBRTtZQUNsRCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDakMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxLQUFLLE9BQU8sQ0FBQztnQkFDekMsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFO29CQUNqQixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztpQkFDdkM7WUFDSCxDQUFDLENBQUMsQ0FBQztTQUNKO1FBQ0QsUUFBUTtRQUNSLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNoQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEYXRhU291cmNlIH0gZnJvbSAnQG43LWZyb250ZW5kL2NvcmUnO1xuaW1wb3J0IHsgU2NoZWRhRHJvcGRvd25EYXRhIH0gZnJvbSAnLi4vY29tcG9uZW50cyc7XG5cbmV4cG9ydCBjbGFzcyBBd1NjaGVkYURyb3Bkb3duRFMgZXh0ZW5kcyBEYXRhU291cmNlIHtcbiAgcHJvdGVjdGVkIHRyYW5zZm9ybShyZXNwb25zZSk6IFNjaGVkYURyb3Bkb3duRGF0YSB7XG4gICAgY29uc3QgeyBkaWdpdGFsT2JqZWN0cyB9ID0gcmVzcG9uc2U7XG4gICAgY29uc3QgZmlyc3RPYmplY3QgPSBkaWdpdGFsT2JqZWN0c1swXTtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyOiB7XG4gICAgICAgIGxhYmVsOiBmaXJzdE9iamVjdC5sYWJlbCxcbiAgICAgICAgaWNvbjoge1xuICAgICAgICAgIGlkOiAnbjctaWNvbi1jYXJldC1kb3duJ1xuICAgICAgICB9LFxuICAgICAgICBwYXlsb2FkOiAndG9nZ2xlJyxcbiAgICAgIH0sXG4gICAgICBpdGVtczogZGlnaXRhbE9iamVjdHMubWFwKCh7IGxhYmVsLCB0eXBlIH0sIGluZGV4KSA9PiAoe1xuICAgICAgICBsYWJlbCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgcGF5bG9hZDogaW5kZXgsXG4gICAgICAgIHNlbGVjdGVkOiBpbmRleCA9PT0gMCxcbiAgICAgIH0pKVxuICAgIH07XG4gIH1cblxuICB0b2dnbGUoKSB7XG4gICAgY29uc3QgeyBjbGFzc2VzIH0gPSB0aGlzLm91dHB1dDtcbiAgICB0aGlzLm91dHB1dC5jbGFzc2VzID0gY2xhc3NlcyA/IG51bGwgOiAnaXMtb3Blbic7XG4gIH1cblxuICBvbkNoYW5nZShwYXlsb2FkKSB7XG4gICAgLy8gbGluayBjaGVja1xuICAgIGlmICh0aGlzLm91dHB1dC5pdGVtc1twYXlsb2FkXS50eXBlICE9PSAnZXh0ZXJuYWwnKSB7XG4gICAgICB0aGlzLm91dHB1dC5pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIGl0ZW0uc2VsZWN0ZWQgPSBpdGVtLnBheWxvYWQgPT09IHBheWxvYWQ7XG4gICAgICAgIGlmIChpdGVtLnNlbGVjdGVkKSB7XG4gICAgICAgICAgdGhpcy5vdXRwdXQuaGVhZGVyLmxhYmVsID0gaXRlbS5sYWJlbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGNsb3NlXG4gICAgdGhpcy50b2dnbGUoKTtcbiAgfVxufVxuIl19