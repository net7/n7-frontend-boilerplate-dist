import { DataSource } from '@n7-frontend/core';
export class AwSchedaDropdownDS extends DataSource {
    transform(response) {
        const { digitalObjects } = response;
        const firstObject = digitalObjects[0];
        return {
            header: {
                label: firstObject.label,
                icon: {
                    id: 'n7-icon-caret-down'
                },
                payload: 'toggle',
            },
            items: digitalObjects.map(({ label, type }, index) => ({
                label,
                type,
                payload: index,
                selected: index === 0,
            }))
        };
    }
    toggle() {
        const { classes } = this.output;
        this.output.classes = classes ? null : 'is-open';
    }
    onChange(payload) {
        // link check
        if (this.output.items[payload].type !== 'external') {
            this.output.items.forEach((item) => {
                item.selected = item.payload === payload;
                if (item.selected) {
                    this.output.header.label = item.label;
                }
            });
        }
        // close
        this.toggle();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NoZWRhLWRyb3Bkb3duLmRzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG43LWZyb250ZW5kL2JvaWxlcnBsYXRlLyIsInNvdXJjZXMiOlsibGliL2FyaWFubmEtd2ViL2RhdGEtc291cmNlcy9zY2hlZGEtZHJvcGRvd24uZHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRy9DLE1BQU0sT0FBTyxrQkFBbUIsU0FBUSxVQUFVO0lBQ3RDLFNBQVMsQ0FBQyxRQUFRO1FBQzFCLE1BQU0sRUFBRSxjQUFjLEVBQUUsR0FBRyxRQUFRLENBQUM7UUFDcEMsTUFBTSxXQUFXLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RDLE9BQU87WUFDTCxNQUFNLEVBQUU7Z0JBQ04sS0FBSyxFQUFFLFdBQVcsQ0FBQyxLQUFLO2dCQUN4QixJQUFJLEVBQUU7b0JBQ0osRUFBRSxFQUFFLG9CQUFvQjtpQkFDekI7Z0JBQ0QsT0FBTyxFQUFFLFFBQVE7YUFDbEI7WUFDRCxLQUFLLEVBQUUsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDckQsS0FBSztnQkFDTCxJQUFJO2dCQUNKLE9BQU8sRUFBRSxLQUFLO2dCQUNkLFFBQVEsRUFBRSxLQUFLLEtBQUssQ0FBQzthQUN0QixDQUFDLENBQUM7U0FDSixDQUFDO0lBQ0osQ0FBQztJQUVELE1BQU07UUFDSixNQUFNLEVBQUUsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUNoQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ25ELENBQUM7SUFFRCxRQUFRLENBQUMsT0FBTztRQUNkLGFBQWE7UUFDYixJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksS0FBSyxVQUFVLEVBQUU7WUFDbEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7Z0JBQ2pDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLE9BQU8sS0FBSyxPQUFPLENBQUM7Z0JBQ3pDLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtvQkFDakIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7aUJBQ3ZDO1lBQ0gsQ0FBQyxDQUFDLENBQUM7U0FDSjtRQUNELFFBQVE7UUFDUixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDaEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YVNvdXJjZSB9IGZyb20gJ0BuNy1mcm9udGVuZC9jb3JlJztcbmltcG9ydCB7IFNjaGVkYURyb3Bkb3duRGF0YSB9IGZyb20gJy4uL2NvbXBvbmVudHMnO1xuXG5leHBvcnQgY2xhc3MgQXdTY2hlZGFEcm9wZG93bkRTIGV4dGVuZHMgRGF0YVNvdXJjZSB7XG4gIHByb3RlY3RlZCB0cmFuc2Zvcm0ocmVzcG9uc2UpOiBTY2hlZGFEcm9wZG93bkRhdGEge1xuICAgIGNvbnN0IHsgZGlnaXRhbE9iamVjdHMgfSA9IHJlc3BvbnNlO1xuICAgIGNvbnN0IGZpcnN0T2JqZWN0ID0gZGlnaXRhbE9iamVjdHNbMF07XG4gICAgcmV0dXJuIHtcbiAgICAgIGhlYWRlcjoge1xuICAgICAgICBsYWJlbDogZmlyc3RPYmplY3QubGFiZWwsXG4gICAgICAgIGljb246IHtcbiAgICAgICAgICBpZDogJ243LWljb24tY2FyZXQtZG93bidcbiAgICAgICAgfSxcbiAgICAgICAgcGF5bG9hZDogJ3RvZ2dsZScsXG4gICAgICB9LFxuICAgICAgaXRlbXM6IGRpZ2l0YWxPYmplY3RzLm1hcCgoeyBsYWJlbCwgdHlwZSB9LCBpbmRleCkgPT4gKHtcbiAgICAgICAgbGFiZWwsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIHBheWxvYWQ6IGluZGV4LFxuICAgICAgICBzZWxlY3RlZDogaW5kZXggPT09IDAsXG4gICAgICB9KSlcbiAgICB9O1xuICB9XG5cbiAgdG9nZ2xlKCkge1xuICAgIGNvbnN0IHsgY2xhc3NlcyB9ID0gdGhpcy5vdXRwdXQ7XG4gICAgdGhpcy5vdXRwdXQuY2xhc3NlcyA9IGNsYXNzZXMgPyBudWxsIDogJ2lzLW9wZW4nO1xuICB9XG5cbiAgb25DaGFuZ2UocGF5bG9hZCkge1xuICAgIC8vIGxpbmsgY2hlY2tcbiAgICBpZiAodGhpcy5vdXRwdXQuaXRlbXNbcGF5bG9hZF0udHlwZSAhPT0gJ2V4dGVybmFsJykge1xuICAgICAgdGhpcy5vdXRwdXQuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBpdGVtLnNlbGVjdGVkID0gaXRlbS5wYXlsb2FkID09PSBwYXlsb2FkO1xuICAgICAgICBpZiAoaXRlbS5zZWxlY3RlZCkge1xuICAgICAgICAgIHRoaXMub3V0cHV0LmhlYWRlci5sYWJlbCA9IGl0ZW0ubGFiZWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjbG9zZVxuICAgIHRoaXMudG9nZ2xlKCk7XG4gIH1cbn1cbiJdfQ==