import { LayoutDataSource } from '@n7-frontend/core';
import { BehaviorSubject } from 'rxjs';
import getCollection from './collection-mocks';
export class AwCollectionLayoutDS extends LayoutDataSource {
    constructor() {
        super(...arguments);
        this.innerTitleData = {
            title: { main: { text: 'Articoli recenti' } },
        };
        this.pageSize = 6;
        this.currentOffset = 0;
    }
    onInit(payload) {
        this.communication = payload.communication;
        getCollection({ limit: this.pageSize, offset: this.currentOffset })
            .subscribe((d) => {
            this.currentOffset += this.pageSize;
            this.loadedCollections = new BehaviorSubject(d.results);
        });
    }
    loadMore() {
        const collection = this.loadedCollections.getValue();
        getCollection({ limit: this.pageSize, offset: this.currentOffset }).subscribe((d) => {
            this.currentOffset += this.pageSize;
            this.loadedCollections.next([...collection, ...d.results]);
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbi1sYXlvdXQuZHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbjctZnJvbnRlbmQvYm9pbGVycGxhdGUvIiwic291cmNlcyI6WyJsaWIvYXJpYW5uYS13ZWIvbGF5b3V0cy9jb2xsZWN0aW9uLWxheW91dC9jb2xsZWN0aW9uLWxheW91dC5kcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3ZDLE9BQU8sYUFBYSxNQUFNLG9CQUFvQixDQUFDO0FBRS9DLE1BQU0sT0FBTyxvQkFBcUIsU0FBUSxnQkFBZ0I7SUFBMUQ7O1FBR0UsbUJBQWMsR0FBbUI7WUFDL0IsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLGtCQUFrQixFQUFFLEVBQUU7U0FDOUMsQ0FBQTtRQUVELGFBQVEsR0FBRyxDQUFDLENBQUM7UUFFYixrQkFBYSxHQUFHLENBQUMsQ0FBQztJQW9CcEIsQ0FBQztJQWhCQyxNQUFNLENBQUMsT0FBTztRQUNaLElBQUksQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUMzQyxhQUFhLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO2FBQ2hFLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ2YsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3BDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLGVBQWUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsUUFBUTtRQUNOLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNyRCxhQUFhLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDbEYsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3BDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzdELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5uZXJUaXRsZURhdGEsIEl0ZW1QcmV2aWV3RGF0YSB9IGZyb20gJ0BuNy1mcm9udGVuZC9jb21wb25lbnRzJztcclxuaW1wb3J0IHsgTGF5b3V0RGF0YVNvdXJjZSB9IGZyb20gJ0BuNy1mcm9udGVuZC9jb3JlJztcclxuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCBnZXRDb2xsZWN0aW9uIGZyb20gJy4vY29sbGVjdGlvbi1tb2Nrcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgQXdDb2xsZWN0aW9uTGF5b3V0RFMgZXh0ZW5kcyBMYXlvdXREYXRhU291cmNlIHtcclxuICBwcml2YXRlIGNvbW11bmljYXRpb247XHJcblxyXG4gIGlubmVyVGl0bGVEYXRhOiBJbm5lclRpdGxlRGF0YSA9IHtcclxuICAgIHRpdGxlOiB7IG1haW46IHsgdGV4dDogJ0FydGljb2xpIHJlY2VudGknIH0gfSxcclxuICB9XHJcblxyXG4gIHBhZ2VTaXplID0gNjtcclxuXHJcbiAgY3VycmVudE9mZnNldCA9IDA7XHJcblxyXG4gIGxvYWRlZENvbGxlY3Rpb25zOiBCZWhhdmlvclN1YmplY3Q8SXRlbVByZXZpZXdEYXRhW10+O1xyXG5cclxuICBvbkluaXQocGF5bG9hZCkge1xyXG4gICAgdGhpcy5jb21tdW5pY2F0aW9uID0gcGF5bG9hZC5jb21tdW5pY2F0aW9uO1xyXG4gICAgZ2V0Q29sbGVjdGlvbih7IGxpbWl0OiB0aGlzLnBhZ2VTaXplLCBvZmZzZXQ6IHRoaXMuY3VycmVudE9mZnNldCB9KVxyXG4gICAgICAuc3Vic2NyaWJlKChkKSA9PiB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50T2Zmc2V0ICs9IHRoaXMucGFnZVNpemU7XHJcbiAgICAgICAgdGhpcy5sb2FkZWRDb2xsZWN0aW9ucyA9IG5ldyBCZWhhdmlvclN1YmplY3QoZC5yZXN1bHRzKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBsb2FkTW9yZSgpIHtcclxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLmxvYWRlZENvbGxlY3Rpb25zLmdldFZhbHVlKCk7XHJcbiAgICBnZXRDb2xsZWN0aW9uKHsgbGltaXQ6IHRoaXMucGFnZVNpemUsIG9mZnNldDogdGhpcy5jdXJyZW50T2Zmc2V0IH0pLnN1YnNjcmliZSgoZCkgPT4ge1xyXG4gICAgICB0aGlzLmN1cnJlbnRPZmZzZXQgKz0gdGhpcy5wYWdlU2l6ZTtcclxuICAgICAgdGhpcy5sb2FkZWRDb2xsZWN0aW9ucy5uZXh0KFsuLi5jb2xsZWN0aW9uLCAuLi5kLnJlc3VsdHNdKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXX0=