import { LayoutDataSource } from '@n7-frontend/core';
import { BehaviorSubject } from 'rxjs';
import getCollection from './collection-mocks';
export class AwCollectionLayoutDS extends LayoutDataSource {
    constructor() {
        super(...arguments);
        this.innerTitleData = {
            title: { main: { text: 'Articoli recenti' } },
        };
        this.pageSize = 6;
        this.currentOffset = 0;
    }
    onInit(payload) {
        this.communication = payload.communication;
        getCollection({ limit: this.pageSize, offset: this.currentOffset })
            .subscribe((d) => {
            this.currentOffset += this.pageSize;
            this.loadedCollections = new BehaviorSubject(d.results);
        });
    }
    loadMore() {
        const collection = this.loadedCollections.getValue();
        getCollection({ limit: this.pageSize, offset: this.currentOffset }).subscribe((d) => {
            this.currentOffset += this.pageSize;
            this.loadedCollections.next([...collection, ...d.results]);
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbi1sYXlvdXQuZHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbjctZnJvbnRlbmQvYm9pbGVycGxhdGUvIiwic291cmNlcyI6WyJsaWIvYXJpYW5uYS13ZWIvbGF5b3V0cy9jb2xsZWN0aW9uLWxheW91dC9jb2xsZWN0aW9uLWxheW91dC5kcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNyRCxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQ3ZDLE9BQU8sYUFBYSxNQUFNLG9CQUFvQixDQUFDO0FBRS9DLE1BQU0sT0FBTyxvQkFBcUIsU0FBUSxnQkFBZ0I7SUFBMUQ7O1FBR0UsbUJBQWMsR0FBbUI7WUFDL0IsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLGtCQUFrQixFQUFFLEVBQUU7U0FDOUMsQ0FBQTtRQUVELGFBQVEsR0FBRyxDQUFDLENBQUM7UUFFYixrQkFBYSxHQUFHLENBQUMsQ0FBQztJQW9CcEIsQ0FBQztJQWhCQyxNQUFNLENBQUMsT0FBTztRQUNaLElBQUksQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQztRQUMzQyxhQUFhLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO2FBQ2hFLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ2YsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3BDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLGVBQWUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUQsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsUUFBUTtRQUNOLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUNyRCxhQUFhLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDbEYsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ3BDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLFVBQVUsRUFBRSxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzdELENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5uZXJUaXRsZURhdGEsIEl0ZW1QcmV2aWV3RGF0YSB9IGZyb20gJ0BuNy1mcm9udGVuZC9jb21wb25lbnRzJztcbmltcG9ydCB7IExheW91dERhdGFTb3VyY2UgfSBmcm9tICdAbjctZnJvbnRlbmQvY29yZSc7XG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCBnZXRDb2xsZWN0aW9uIGZyb20gJy4vY29sbGVjdGlvbi1tb2Nrcyc7XG5cbmV4cG9ydCBjbGFzcyBBd0NvbGxlY3Rpb25MYXlvdXREUyBleHRlbmRzIExheW91dERhdGFTb3VyY2Uge1xuICBwcml2YXRlIGNvbW11bmljYXRpb247XG5cbiAgaW5uZXJUaXRsZURhdGE6IElubmVyVGl0bGVEYXRhID0ge1xuICAgIHRpdGxlOiB7IG1haW46IHsgdGV4dDogJ0FydGljb2xpIHJlY2VudGknIH0gfSxcbiAgfVxuXG4gIHBhZ2VTaXplID0gNjtcblxuICBjdXJyZW50T2Zmc2V0ID0gMDtcblxuICBsb2FkZWRDb2xsZWN0aW9uczogQmVoYXZpb3JTdWJqZWN0PEl0ZW1QcmV2aWV3RGF0YVtdPjtcblxuICBvbkluaXQocGF5bG9hZCkge1xuICAgIHRoaXMuY29tbXVuaWNhdGlvbiA9IHBheWxvYWQuY29tbXVuaWNhdGlvbjtcbiAgICBnZXRDb2xsZWN0aW9uKHsgbGltaXQ6IHRoaXMucGFnZVNpemUsIG9mZnNldDogdGhpcy5jdXJyZW50T2Zmc2V0IH0pXG4gICAgICAuc3Vic2NyaWJlKChkKSA9PiB7XG4gICAgICAgIHRoaXMuY3VycmVudE9mZnNldCArPSB0aGlzLnBhZ2VTaXplO1xuICAgICAgICB0aGlzLmxvYWRlZENvbGxlY3Rpb25zID0gbmV3IEJlaGF2aW9yU3ViamVjdChkLnJlc3VsdHMpO1xuICAgICAgfSk7XG4gIH1cblxuICBsb2FkTW9yZSgpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5sb2FkZWRDb2xsZWN0aW9ucy5nZXRWYWx1ZSgpO1xuICAgIGdldENvbGxlY3Rpb24oeyBsaW1pdDogdGhpcy5wYWdlU2l6ZSwgb2Zmc2V0OiB0aGlzLmN1cnJlbnRPZmZzZXQgfSkuc3Vic2NyaWJlKChkKSA9PiB7XG4gICAgICB0aGlzLmN1cnJlbnRPZmZzZXQgKz0gdGhpcy5wYWdlU2l6ZTtcbiAgICAgIHRoaXMubG9hZGVkQ29sbGVjdGlvbnMubmV4dChbLi4uY29sbGVjdGlvbiwgLi4uZC5yZXN1bHRzXSk7XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==