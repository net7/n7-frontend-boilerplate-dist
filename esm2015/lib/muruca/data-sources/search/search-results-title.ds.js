import { DataSource } from '@n7-frontend/core';
export class MrSearchResultsTitleDS extends DataSource {
    transform(data) {
        const { totalResultsText, sort } = this.options.config;
        const { total_count: totalCount, sort: currentSort } = data;
        const mainText = `<strong>${totalCount || 0}</strong> ${totalResultsText[totalCount === 1 ? 1 : 0]}`;
        return {
            title: {
                main: {
                    text: mainText
                }
            },
            actions: {
                select: {
                    label: sort.label,
                    options: sort.options.map(({ label, value, selected, disabled }) => ({
                        value,
                        disabled,
                        selected: currentSort ? value === currentSort : selected,
                        text: label
                    })),
                    payload: 'sort'
                }
            }
        };
    }
    OnInputQueryChange(value) {
        const { sort } = this.options.config;
        sort.options.forEach((option) => {
            if (option.value === '_score') {
                option.disabled = !value;
            }
        });
        this.update(this.input);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLXJlc3VsdHMtdGl0bGUuZHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AbjctZnJvbnRlbmQvYm9pbGVycGxhdGUvIiwic291cmNlcyI6WyJsaWIvbXVydWNhL2RhdGEtc291cmNlcy9zZWFyY2gvc2VhcmNoLXJlc3VsdHMtdGl0bGUuZHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRS9DLE1BQU0sT0FBTyxzQkFBdUIsU0FBUSxVQUFVO0lBQzFDLFNBQVMsQ0FBQyxJQUFJO1FBQ3RCLE1BQU0sRUFDSixnQkFBZ0IsRUFDaEIsSUFBSSxFQUNMLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7UUFDeEIsTUFBTSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQztRQUM1RCxNQUFNLFFBQVEsR0FBRyxXQUFXLFVBQVUsSUFBSSxDQUFDLGFBQWEsZ0JBQWdCLENBQUMsVUFBVSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBRXJHLE9BQU87WUFDTCxLQUFLLEVBQUU7Z0JBQ0wsSUFBSSxFQUFFO29CQUNKLElBQUksRUFBRSxRQUFRO2lCQUNmO2FBQ0Y7WUFDRCxPQUFPLEVBQUU7Z0JBQ1AsTUFBTSxFQUFFO29CQUNOLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSztvQkFDakIsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsRUFDekIsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUNqQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO3dCQUNMLEtBQUs7d0JBQ0wsUUFBUTt3QkFDUixRQUFRLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssV0FBVyxDQUFDLENBQUMsQ0FBQyxRQUFRO3dCQUN4RCxJQUFJLEVBQUUsS0FBSztxQkFDWixDQUFDLENBQUM7b0JBQ0gsT0FBTyxFQUFFLE1BQU07aUJBQ2hCO2FBQ0Y7U0FDRixDQUFDO0lBQ0osQ0FBQztJQUVELGtCQUFrQixDQUFDLEtBQUs7UUFDdEIsTUFBTSxFQUFFLElBQUksRUFBRSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUU7WUFDOUIsSUFBSSxNQUFNLENBQUMsS0FBSyxLQUFLLFFBQVEsRUFBRTtnQkFDN0IsTUFBTSxDQUFDLFFBQVEsR0FBRyxDQUFDLEtBQUssQ0FBQzthQUMxQjtRQUNILENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGF0YVNvdXJjZSB9IGZyb20gJ0BuNy1mcm9udGVuZC9jb3JlJztcblxuZXhwb3J0IGNsYXNzIE1yU2VhcmNoUmVzdWx0c1RpdGxlRFMgZXh0ZW5kcyBEYXRhU291cmNlIHtcbiAgcHJvdGVjdGVkIHRyYW5zZm9ybShkYXRhKSB7XG4gICAgY29uc3Qge1xuICAgICAgdG90YWxSZXN1bHRzVGV4dCxcbiAgICAgIHNvcnRcbiAgICB9ID0gdGhpcy5vcHRpb25zLmNvbmZpZztcbiAgICBjb25zdCB7IHRvdGFsX2NvdW50OiB0b3RhbENvdW50LCBzb3J0OiBjdXJyZW50U29ydCB9ID0gZGF0YTtcbiAgICBjb25zdCBtYWluVGV4dCA9IGA8c3Ryb25nPiR7dG90YWxDb3VudCB8fCAwfTwvc3Ryb25nPiAke3RvdGFsUmVzdWx0c1RleHRbdG90YWxDb3VudCA9PT0gMSA/IDEgOiAwXX1gO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRpdGxlOiB7XG4gICAgICAgIG1haW46IHtcbiAgICAgICAgICB0ZXh0OiBtYWluVGV4dFxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgYWN0aW9uczoge1xuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICBsYWJlbDogc29ydC5sYWJlbCxcbiAgICAgICAgICBvcHRpb25zOiBzb3J0Lm9wdGlvbnMubWFwKCh7XG4gICAgICAgICAgICBsYWJlbCwgdmFsdWUsIHNlbGVjdGVkLCBkaXNhYmxlZFxuICAgICAgICAgIH0pID0+ICh7XG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIGRpc2FibGVkLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IGN1cnJlbnRTb3J0ID8gdmFsdWUgPT09IGN1cnJlbnRTb3J0IDogc2VsZWN0ZWQsXG4gICAgICAgICAgICB0ZXh0OiBsYWJlbFxuICAgICAgICAgIH0pKSxcbiAgICAgICAgICBwYXlsb2FkOiAnc29ydCdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBPbklucHV0UXVlcnlDaGFuZ2UodmFsdWUpIHtcbiAgICBjb25zdCB7IHNvcnQgfSA9IHRoaXMub3B0aW9ucy5jb25maWc7XG4gICAgc29ydC5vcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4ge1xuICAgICAgaWYgKG9wdGlvbi52YWx1ZSA9PT0gJ19zY29yZScpIHtcbiAgICAgICAgb3B0aW9uLmRpc2FibGVkID0gIXZhbHVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudXBkYXRlKHRoaXMuaW5wdXQpO1xuICB9XG59XG4iXX0=